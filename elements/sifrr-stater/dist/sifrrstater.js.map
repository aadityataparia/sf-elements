{"version":3,"file":"sifrrstater.js","sources":["../../sifrr-tab-header/src/sifrrtabheader.js","../../../node_modules/@sifrr/animate/dist/sifrr.animate.js","../../sifrr-tab-container/src/sifrrtabcontainer.js","../src/sifrrstater.js"],"sourcesContent":["import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n  slot::slotted(*) {\n    \\${this.options ? this.options.style : ''}\n  }\n</style>\n<slot>\n</slot>\n<div class=\"underline\"></div>`;\n\nfunction removeExceptOne(elements, name, index) {\n  if (elements.nodeType === 1) elements = elements.children;\n  for (let j = 0, l = elements.length; j < l; j++) {\n    j === index || elements[j] === index ? elements[j].classList.add(name) : elements[j].classList.remove(name);\n  }\n}\n\nclass SifrrTabHeader extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['options'];\n  }\n\n  onConnect() {\n    this._connected = true;\n    this.$('slot').addEventListener('slotchange', this.refresh.bind(this, {}));\n    this.refresh();\n  }\n\n  onAttributeChange(n, _, v) {\n    if (n === 'options') {\n      this._attrOptions = JSON.parse(v || '{}');\n      if (this._connected) this.refresh();\n    }\n  }\n\n  refresh(options = {}) {\n    this.options = Object.assign({\n      content: this,\n      slot: this.$('slot'),\n      showUnderline: true,\n      line: this.$('.underline'),\n      container: null\n    }, this.options, options, this._attrOptions);\n    this.options.menus = this.options.slot.assignedNodes().filter(n => n.nodeType === 1);\n    if (!this.options.menus || this.options.menus.length < 1) return;\n    this.setProps();\n    this.active = this.active || 0;\n  }\n\n  setProps() {\n    if (!this.options.showUnderline) this.options.line.style.display = 'none';\n    this.setMenuProps();\n    if (this.options.container) {\n      const c = this.options.container;\n      c.onScrollPercent = this.setScrollPercent.bind(this);\n      SifrrDom.Event.addListener('update', c, () => this.active = c.active);\n    }\n  }\n\n  setMenuProps() {\n    let left = 0;\n    this.options.menuProps = [];\n    Array.from(this.options.menus).forEach((elem, i) => {\n      this.options.menuProps[i] = {\n        width: elem.offsetWidth,\n        left: left\n      };\n      left += elem.offsetWidth;\n      elem._click = () => {\n        if (this.options.container) this.options.container.active = i;\n        else this.active = i;\n      };\n    });\n    const last = this.options.menuProps[this.options.menus.length - 1];\n    this.options.totalMenuWidth = last.left + last.width;\n    this.options.slot.style.width = last.left + last.width + 1 * this.options.menuProps.length + 'px';\n    const active = this.options.menuProps[this.active];\n    this.options.line.style.left = active.left + 'px';\n    this.options.line.style.width = active.width + 'px';\n    this.setScrollPercent(0);\n  }\n\n  setScrollPercent(total) {\n    const per = total % 1, t = Math.floor(total);\n    const left = this.options.menuProps[t].left * (1 - per) + (this.options.menuProps[t + 1] || {\n      left: 0\n    }).left * per;\n    const width = this.options.menuProps[t].width * (1 - per) + (this.options.menuProps[t + 1] || {\n      width: 0\n    }).width * per;\n    this.options.line.style.left = left + 'px';\n    this.options.line.style.width = width + 'px';\n    this.scrollLeft = left + (width - this.clientWidth) / 2;\n  }\n\n  get active() {\n    return this._active || 0;\n  }\n\n  set active(i) {\n    this._active = i;\n    this.setScrollPercent(i);\n    this.update();\n  }\n\n  onUpdate() {\n    if (!this.options) return;\n    removeExceptOne(this.options.menus, 'active', this.active);\n  }\n}\n\nSifrrDom.register(SifrrTabHeader);\nexport default SifrrTabHeader;\n","/*! sifrr-animate v0.0.3 - sifrr project | MIT licensed | https://github.com/sifrr/sifrr-animate */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, (global.Sifrr = global.Sifrr || {}, global.Sifrr.animate = factory()));\n}(this, function () { 'use strict';\n\n  const beziers = {};\n  class Bezier {\n    constructor(args) {\n      const key = args.join('_');\n      if (!beziers[key]) {\n        this.setProps(...args);\n        beziers[key] = this.final.bind(this);\n      }\n      return beziers[key];\n    }\n    setProps(x1, y1, x2, y2) {\n      let props = {\n        x1,\n        y1,\n        x2,\n        y2,\n        A: (x1, x2) => 1.0 - 3.0 * x2 + 3.0 * x1,\n        B: (x1, x2) => 3.0 * x2 - 6.0 * x1,\n        C: x1 => 3.0 * x1,\n        CalcBezier: (t, x1, x2) => ((this.A(x1, x2) * t + this.B(x1, x2)) * t + this.C(x1)) * t,\n        GetSlope: (t, x1, x2) => 3.0 * this.A(x1, x2) * t * t + 2.0 * this.B(x1, x2) * t + this.C(x1)\n      };\n      Object.assign(this, props);\n    }\n    final(x) {\n      if (this.x1 == this.y1 && this.x2 == this.y2) return x;\n      return this.CalcBezier(this.GetTForX(x), this.y1, this.y2);\n    }\n    GetTForX(xx) {\n      let t = xx;\n      for (let i = 0; i < 4; ++i) {\n        let slope = this.GetSlope(t, this.x1, this.x2);\n        if (slope == 0) return t;\n        let x = this.CalcBezier(t, this.x1, this.x2) - xx;\n        t -= x / slope;\n      }\n      return t;\n    }\n  }\n  var bezier = Bezier;\n\n  var types = {\n    linear: [0, 0, 1, 1],\n    ease: [.25, .1, .25, 1],\n    easeIn: [.42, 0, 1, 1],\n    easeOut: [0, 0, .58, 1],\n    easeInOut: [.42, 0, .58, 1],\n    spring: [.3642, 0, .6358, 1]\n  };\n\n  var wait = t => new Promise(res => setTimeout(res, t));\n\n  const digitRgx = /((?:[+\\-*/]=)?-?\\d+\\.?\\d*)/;\n  const frames = new Set();\n  function runFrames(currentTime) {\n    frames.forEach(f => f(currentTime));\n    window.requestAnimationFrame(runFrames);\n  }\n  window.requestAnimationFrame(runFrames);\n  function animateOne({\n    target,\n    prop,\n    from,\n    to,\n    time = 300,\n    type = 'spring',\n    onUpdate,\n    round = false,\n    delay = 0\n  }) {\n    const toSplit = to.toString().split(digitRgx),\n          l = toSplit.length,\n          raw = [],\n          fromNums = [],\n          diffs = [];\n    const fromSplit = (from || target[prop] || '').toString().split(digitRgx);\n    const onUp = typeof onUpdate === 'function';\n    for (let i = 0; i < l; i++) {\n      const fn = Number(fromSplit[i]) || 0;\n      let tn = Number(toSplit[i]);\n      if (toSplit[i][1] === '=') {\n        tn = Number(toSplit[i].slice(2));\n        switch (toSplit[i][0]) {\n          case '+':\n            tn = fn + tn;\n            break;\n          case '-':\n            tn = fn - tn;\n            break;\n          case '*':\n            tn = fn * tn;\n            break;\n          case '/':\n            tn = fn / tn;\n            break;\n        }\n      }\n      if (isNaN(tn) || !toSplit[i]) raw.push(toSplit[i]);else {\n        fromNums.push(fn);\n        diffs.push(tn - fn);\n      }\n    }\n    const rawObj = {\n      raw\n    };\n    return wait(delay).then(() => new Promise((resolve, reject) => {\n      if (types[type]) type = types[type];\n      if (Array.isArray(type)) type = new bezier(type);else if (typeof type !== 'function') return reject(Error('type should be one of ' + Object.keys(types).toString() + ' or Bezier Array or Function, given ' + type));\n      let startTime;\n      const frame = function (currentTime) {\n        startTime = startTime || currentTime - 17;\n        const percent = (currentTime - startTime) / time,\n              bper = type(percent >= 1 ? 1 : percent);\n        const next = diffs.map((d, i) => {\n          const n = bper * d + fromNums[i];\n          return round ? Math.round(n) : n;\n        });\n        const val = String.raw(rawObj, ...next);\n        try {\n          target[prop] = Number(val) || val;\n          if (onUp) onUpdate(target, prop, target[prop]);\n          if (percent >= 1) resolve(frames.delete(frame));\n        } catch (e) {\n          frames.delete(frame);\n          reject(e);\n        }\n      };\n      frames.add(frame);\n    }));\n  }\n  var animateone = animateOne;\n\n  function animate({\n    targets,\n    target,\n    to,\n    time,\n    type,\n    onUpdate,\n    round,\n    delay\n  }) {\n    targets = targets ? Array.from(targets) : [target];\n    function iterate(tg, props, d, ntime) {\n      const promises = [];\n      for (let prop in props) {\n        let from, final;\n        if (Array.isArray(props[prop])) [from, final] = props[prop];else final = props[prop];\n        if (typeof props[prop] === 'object' && !Array.isArray(props[prop])) {\n          promises.push(iterate(tg[prop], props[prop], d, ntime));\n        } else {\n          promises.push(animateone({\n            target: tg,\n            prop,\n            to: final,\n            time: ntime,\n            type,\n            from,\n            onUpdate,\n            round,\n            delay: d\n          }));\n        }\n      }\n      return Promise.all(promises);\n    }\n    let numTo = to,\n        numDelay = delay,\n        numTime = time;\n    return Promise.all(targets.map((target, i) => {\n      if (typeof to === 'function') numTo = to.call(target, i);\n      if (typeof delay === 'function') numDelay = delay.call(target, i);\n      if (typeof time === 'function') numTime = time.call(target, i);\n      return iterate(target, numTo, numDelay, numTime);\n    }));\n  }\n  animate.types = types;\n  animate.wait = wait;\n  animate.animate = animate;\n  animate.keyframes = arrOpts => {\n    let promise = Promise.resolve(true);\n    arrOpts.forEach(opts => {\n      if (Array.isArray(opts)) promise = promise.then(() => Promise.all(opts.map(animate)));\n      promise = promise.then(() => animate(opts));\n    });\n    return promise;\n  };\n  animate.loop = fxn => fxn().then(() => animate.loop(fxn));\n  var animate_1 = animate;\n\n  return animate_1;\n\n}));\n/*! (c) @aadityataparia */\n//# sourceMappingURL=sifrr.animate.js.map\n","import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\nimport animate from '@sifrr/animate';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n<style media=\"screen\">\n  .tabs {\n    width: \\${this.totalWidth + 'px'};\n  }\n  .tabs::slotted(*) {\n    width: \\${this.tabWidth + 'px'};\n  }\n</style>\n<slot class=\"tabs\">\n</slot>`;\n\nfunction removeExceptOne(elements, name, index) {\n  if (elements.nodeType === 1) elements = elements.children;\n  for (let j = 0, l = elements.length; j < l; j++) {\n    j === index || elements[j] === index ? elements[j].classList.add(name) : elements[j].classList.remove(name);\n  }\n}\n\nclass SifrrTabContainer extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['options'];\n  }\n\n  onConnect() {\n    this._connected = true;\n    this.refresh();\n    window.addEventListener('resize', () => requestAnimationFrame(this.refresh.bind(this)));\n    this.options.slot.addEventListener('slotchange', this.refresh.bind(this, {}));\n    this.setScrollEvent();\n  }\n\n  onAttributeChange(n, _, v) {\n    if (n === 'options') {\n      this._attrOptions = JSON.parse(v || '{}');\n      if (this._connected) this.refresh();\n    }\n  }\n\n  refresh(options = {}) {\n    this.options = Object.assign({\n      content: this,\n      slot: this.$('slot'),\n      num: 1,\n      animation: 'spring',\n      animationTime: 300,\n      scrollBreakpoint: 0.3,\n      loop: false\n    }, this.options, options, this._attrOptions);\n    this.options.tabs = this.options.slot.assignedNodes().filter(n => n.nodeType === 1);\n    if (!this.options.tabs || this.options.tabs.length < 1) return;\n    this.tabWidth = this.clientWidth / this.options.num;\n    this.totalWidth = this.tabWidth * this.options.tabs.length;\n    this.active = typeof this._active === 'number' ? this._active : 0;\n  }\n\n  setScrollEvent() {\n    let me = this,\n      isScrolling,\n      scrollPos;\n    this.options.content.addEventListener('scroll', onScroll);\n\n    function onScroll() {\n      scrollPos = me.active;\n      const total = me.options.content.scrollLeft / me.tabWidth;\n      const t = Math.round(total);\n      me.onScrollPercent(total);\n      clearTimeout(isScrolling);\n      isScrolling = setTimeout(function() {\n        if (total - scrollPos < -me.options.scrollBreakpoint) {\n          me.active = Math.min(t, scrollPos - 1);\n        } else if (total - scrollPos > +me.options.scrollBreakpoint) {\n          me.active = Math.max(t, scrollPos + 1);\n        } else {\n          me.active = scrollPos;\n        }\n      }, 100);\n    }\n  }\n\n  onScrollPercent() {}\n\n  get active() {\n    return this._active;\n  }\n\n  set active(i) {\n    this._active = this.getTabNumber(i);\n    this.update();\n  }\n\n  beforeUpdate() {\n    if (!this.options) return;\n    const i = this._active;\n    animate({\n      target: this.options.content,\n      to: {\n        scrollLeft: i * this.tabWidth\n      },\n      time: this.options.animationTime,\n      type: this.options.animation === 'none' ? () => 1 : this.options.animation\n    });\n    removeExceptOne(this.options.tabs, 'active', i);\n  }\n\n  next() {\n    this.active += 1;\n  }\n\n  hasNext() {\n    if (this.active === this.options.tabs.length - this.options.num) return false;\n    return true;\n  }\n\n  prev() {\n    this.active -= 1;\n  }\n\n  hasPrev() {\n    return this.active === 0 ? false : true;\n  }\n\n  getTabNumber(i) {\n    const l = this.options.tabs.length;\n    if (l < 1) return 0;\n    const num = this.options.num;\n    i = i < 0 ? i + l : i % l;\n    if (i + num - 1 >= l) {\n      i = this.options.loop ? i % l : l - num;\n    }\n    return i;\n  }\n}\n\nSifrrDom.register(SifrrTabContainer);\nexport default SifrrTabContainer;\n","import SifrrDom from '@sifrr/dom';\nimport SifrrStorage from '@sifrr/storage';\nimport '../../sifrr-tab-header/src/sifrrtabheader';\nimport '../../sifrr-tab-container/src/sifrrtabcontainer';\nimport style from './style.scss';\n\nconst template = SifrrDom.template`<style>\n  ${style}\n</style>\n<div id=\"showHide\" _click=\\${this.showHide}></div>\n<sifrr-tab-header style='background: blue; color: white' data-sifrr-html=\"true\">\n  \\${ this.headingHtml() }\n</sifrr-tab-header>\n<sifrr-tab-container style='height: calc(100vh - 132px)' data-sifrr-html=\"true\">\n  \\${ this.stateHtml() }\n</sifrr-tab-container>\n<footer>\n  <input _keyup=\\${this.addTargetOnEnter} id=\"addTargetInput\" type=\"text\" name=\"addTargetInput\" value=\"\" placeholder=\"Enter css selector query of target\">\n  <button _click=\\${this.addTarget} class=\"btn3\" type=\"button\" name=\"addTargetButton\">Add Taget</button>\n  <button _click=\\${this.commitAll} class=\"btn3\" type=\"button\" name=\"commitAll\">Commit All</button>\n  <button _click=\\${this.resetAllToFirstState} class=\"btn3\" type=\"button\" name=\"resetAll\">Reset All</button>\n  <button _click=\\${this.saveData} class=\"btn3\" type=\"button\" name=\"saveData\">Save Data</button>\n  <button _click=\\${this.loadData} class=\"btn3\" type=\"button\" name=\"loadData\">Load Data</button>\n  <button _click=\\${this.clearAll} class=\"btn3\" type=\"button\" name=\"clearAll\">Remove All</button>\n</footer>`;\n\nSifrrDom.Event.add('click');\nSifrrDom.Event.add('keyup');\nclass SifrrStater extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  onConnect() {\n    let me = this;\n    this.storage = new SifrrStorage({\n      name: 'sifrr-stater' + window.location.href\n    });\n    SifrrDom.Event.addListener('click', '.state', function(e, el) {\n      el.classList.contains('open') ? el.classList.remove('open') : el.classList.add('open');\n    });\n    SifrrDom.Event.addListener('click', '.dotC', function(e, target, el) {\n      me.toState(parseInt(el.dataset.target), parseInt(el.dataset.stateIndex));\n    });\n    SifrrDom.Event.addListener('click', '.delete', function(e, el) {\n      me.deleteState(parseInt(el.dataset.target), parseInt(el.dataset.stateIndex));\n    });\n    SifrrDom.Event.addListener('click', '.commit', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.commit(i);\n    });\n    SifrrDom.Event.addListener('click', '.reset', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.resetToFirstState(i);\n    });\n    SifrrDom.Event.addListener('click', '.remove', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.removeTarget(i);\n    });\n  }\n\n  showHide() {\n    this.classList.contains('show') ? this.classList.remove('show') : this.classList.add('show');\n  }\n\n  addTargetOnEnter(event) {\n    if (event.key === 'Enter') {\n      this.addTarget();\n    }\n  }\n\n  headingHtml() {\n    return this.state.queries.map((q) => `<span>${q}</span>`).join('');\n  }\n\n  stateHtml() {\n    let me = this;\n    return this.state.states.map((s, i) =>\n      `<div data-target=\"${i}\">\n      <button class=\"btn3 commit\" type=\"button\" name=\"commit\">Commit</button>\n      <button class=\"btn3 reset\" type=\"button\" name=\"reset\">Reset</button>\n      <button class=\"btn3 remove\" type=\"button\" name=\"remove\">Remove</button>\n      ${s.map((jsn, j) => `<div class=\"stateContainer ${j <= me.state.activeStates[i] ? 'on' : 'off'}\">\n                           <div class=\"dotC\" data-target=\"${i}\" data-state-index=\"${j}\"><div class=\"dot\"></div></div>\n                           <div class=\"state\">${SifrrStater.prettyJSON(jsn)}</div>\n                           <div class=\"delete\" data-target=\"${i}\" data-state-index=\"${j}\">X</div>\n                           </div>`).join('')}</div>`\n    ).join('');\n  }\n\n  addTarget(query) {\n    if (typeof query !== 'string') query = this.$('#addTargetInput').value;\n    let target = window.document.querySelector(query);\n    if (!target.isSifrr) {\n      window.console.log('Invalid Sifrr Element.', target);\n      return false;\n    }\n    if (!target.state) {\n      window.console.log('Sifrr Element has no state.', target);\n      return false;\n    }\n    const old = target.onStateChange, me = this;\n    target.onStateChange = function() {\n      me.addState(this, this.state);\n      old.call(this);\n    };\n    let index = this.state.targets.indexOf(target);\n    if (index > -1) return;\n    this.state.targets.push(target);\n    this.state.queries.push(query);\n    index = this.state.targets.indexOf(target);\n    this.state.states[index] = [JSON.parse(JSON.stringify(target.state))];\n    this.state.activeStates[index] = 0;\n    this.update();\n  }\n\n  removeTarget(el) {\n    const {\n      index\n    } = this.getTarget(el);\n    if (index > -1) {\n      this.state.targets.splice(index, 1);\n      this.state.queries.splice(index, 1);\n      this.state.states.splice(index, 1);\n      this.state.activeStates.splice(index, 1);\n      this.update();\n    }\n  }\n\n  addState(el, state) {\n    const {\n      index\n    } = this.getTarget(el);\n    if (index > -1) {\n      const active = this.state.activeStates[index];\n      const newState = JSON.stringify(state);\n      if (newState !== JSON.stringify(this.state.states[index][active])) {\n        this.state.states[index].splice(active + 1, 0, JSON.parse(newState));\n        this.state.activeStates[index] = active + 1;\n        this.update();\n      }\n    }\n  }\n  deleteState(el, stateN) {\n    const {\n      index\n    } = this.getTarget(el);\n    this.state.states[index].splice(stateN, 1);\n    if (stateN < this.state.activeStates[index]) {\n      this.state.activeStates[index] -= 1;\n    } else if (stateN == this.state.activeStates[index]) {\n      this.state.activeStates[index] -= 1;\n      this.toState(index, this.state.activeStates[index]);\n    }\n    this.update();\n  }\n\n  commit(el) {\n    const {\n      index\n    } = this.getTarget(el);\n    const last_state = this.state.states[index][this.state.states[index].length - 1];\n    this.state.states[index] = [last_state];\n    this.state.activeStates[index] = 0;\n    this.update();\n  }\n\n  commitAll() {\n    const me = this;\n    this.state.targets.forEach(t => me.commit(t));\n    this.update();\n  }\n\n  toState(el, n) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    this.state.activeStates[index] = n;\n    target.state = this.state.states[index][n];\n    this.update();\n  }\n\n  resetToFirstState(el) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    this.toState(target, 0, false);\n    this.state.states[index] = [this.state.states[index][0]];\n    this.update();\n  }\n\n  resetAllToFirstState() {\n    const me = this;\n    this.state.targets.forEach(t => me.resetToFirstState(t));\n    this.update();\n  }\n\n  clear(target) {\n    const {\n      index\n    } = this.getTarget(target);\n    this.state.activeStates[index] = -1;\n    this.state.states[index] = [];\n    this.update();\n  }\n\n  clearAll() {\n    const me = this;\n    this.state.targets.forEach(t => me.clear(t));\n    this.update();\n  }\n\n  saveData() {\n    const me = this;\n    this.storage.clear().then(() => {\n      me.state.queries.forEach((q, i) => {\n        const data = {\n          active: me.state.activeStates[i],\n          states: me.state.states[i]\n        };\n        me.storage.set(q, data);\n      });\n    });\n  }\n\n  loadData() {\n    const me = this;\n    this.storage.all().then((data) => {\n      let i = 0;\n      for (let q in data) {\n        me.addTarget(q);\n        me.clear(i);\n        data[q].states.forEach(s => me.addState(i, s));\n        me.toState(i, data[q].active);\n        i++;\n      }\n    });\n  }\n\n  getTarget(target) {\n    let index;\n    if (Number.isInteger(target)) {\n      index = target;\n      target = this.state.targets[index];\n    } else {\n      index = this.state.targets.indexOf(target);\n    }\n    return {\n      index: index,\n      target: target\n    };\n  }\n\n  static prettyJSON(json) {\n    json = JSON.stringify(json, null, 4);\n    json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/g, function(match) {\n      let cls = 'number';\n      if (/:$/.test(match)) {\n        cls = 'key';\n        return '<span class=\"' + cls + '\">' + match + '</span>';\n      } else if (/^\"/.test(match)) {\n        cls = 'string';\n      } else if (/true|false/.test(match)) {\n        cls = 'boolean';\n      } else if (/null/.test(match)) {\n        cls = 'null';\n      }\n      return '<span class=\"' + cls + '\">' + match + '</span>';\n    });\n  }\n}\n\nSifrrStater.defaultState = {\n  targets: [],\n  states: [],\n  queries: [],\n  activeStates: []\n};\n\nSifrrDom.register(SifrrStater);\n\nexport default SifrrStater;\n"],"names":["template","SifrrDom","style","removeExceptOne","elements","name","index","nodeType","children","j","l","length","classList","add","remove","SifrrTabHeader","Element","observedAttrs","onConnect","_connected","$","addEventListener","refresh","bind","onAttributeChange","n","_","v","_attrOptions","JSON","parse","options","Object","assign","content","slot","showUnderline","line","container","menus","assignedNodes","filter","setProps","active","display","setMenuProps","c","onScrollPercent","setScrollPercent","Event","addListener","left","menuProps","Array","from","forEach","elem","i","width","offsetWidth","_click","last","totalMenuWidth","total","per","t","Math","floor","scrollLeft","clientWidth","_active","update","onUpdate","register","this","SifrrTabContainer","window","requestAnimationFrame","setScrollEvent","num","animation","animationTime","scrollBreakpoint","loop","tabs","tabWidth","totalWidth","me","isScrolling","scrollPos","onScroll","round","clearTimeout","setTimeout","min","max","getTabNumber","beforeUpdate","animate","target","to","time","type","next","hasNext","prev","hasPrev","SifrrStater","storage","SifrrStorage","location","href","e","el","contains","toState","parseInt","dataset","stateIndex","deleteState","parentNode","commit","resetToFirstState","removeTarget","showHide","addTargetOnEnter","event","key","addTarget","headingHtml","state","queries","map","q","join","stateHtml","states","s","jsn","activeStates","prettyJSON","query","value","document","querySelector","isSifrr","console","log","old","onStateChange","addState","call","targets","indexOf","push","stringify","getTarget","splice","newState","stateN","last_state","commitAll","resetAllToFirstState","clear","clearAll","saveData","then","data","set","loadData","all","Number","isInteger","json","replace","match","cls","test","defaultState"],"mappings":"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"}