{"version":3,"file":"sifrrstater.js","sources":["../../sifrr-tabs/src/sifrrtabs.js","../src/sifrrstater.js"],"sourcesContent":["import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n<div class=\"headings\">\n  <ul>\n    <slot name=\"heading\">\n    </slot>\n  </ul>\n  <div class=\"underline\"></div>\n</div>\n<div class=\"content\">\n  <div class=\"arrow l\" _click=\\${this.prev}>\n    <span></span>\n  </div>\n  <div class=\"arrow r\" _click=\\${this.next}>\n    <span></span>\n  </div>\n  <div class=\"tabs\">\n    <slot name=\"tab\">\n    </slot>\n  </div>\n</div>`;\n\nfunction removeExceptOne(elements, name, index) {\n  if (elements instanceof HTMLElement) elements = elements.children;\n  for (let j = 0; j < elements.length; j++) {\n    j !== index && elements[j] !== index ? elements[j].classList.remove(name) : elements[j].classList.add(name);\n  }\n}\n\n//Simple tabs\nclass SifrrTabs extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['options'];\n  }\n\n  onConnect() {\n    this._connected = true;\n    this.refresh();\n    this.setWindowResizeEvent();\n    this.setSlotChangeEvent();\n    this.setScrollEvent();\n  }\n\n  onAttributeChange(n, _, v) {\n    if (n === 'options') {\n      this._attrOptions = JSON.parse(v || '{}');\n      if (this._connected) this.refresh();\n    }\n  }\n\n  refresh() {\n    this.options = Object.assign({\n      menu: this.$('.headings ul'),\n      content: this.$('.content'),\n      tabcontainer: this.$('.tabs'),\n      menus: this.$('slot[name=heading]').assignedNodes(),\n      tabs: this.$('slot[name=tab]').assignedNodes(),\n      la: this.$('.arrow.l'),\n      ra: this.$('.arrow.r'),\n      line: this.$('.underline'),\n      num: 1,\n      showArrows: false,\n      arrowMargin: 0,\n      showMenu: true,\n      step: 1,\n      tabHeight: 'auto',\n      showUnderline: true,\n      loop: false,\n      animation: 'easeOut',\n      animationTime: 300,\n      scrollBreakpoint: 0.2\n    }, this._attrOptions);\n    if (!this.options.tabs || this.options.tabs.length < 1) return;\n    this.usableWidth = this.clientWidth;\n    this.margin = 0;\n    this.totalWidth = this.usableWidth / this.options.num * this.options.tabs.length;\n    if (this.options.showArrows) {\n      this.usableWidth -= 2 * this.options.arrowMargin;\n      this.margin = this.options.arrowMargin;\n    }\n    this.tabWidth = this.usableWidth / this.options.num;\n    this.setProps();\n    this.active = this.active || 0;\n  }\n\n  setProps() {\n    if (!this.options.showArrows) {\n      this.options.la.style.display = 'none';\n      this.options.ra.style.display = 'none';\n    } else {\n      this.options.la.style.display = 'block';\n      this.options.ra.style.display = 'block';\n      Array.from(this.options.tabs).forEach(e => e.style.margin = `0 ${this.margin}px`);\n    }\n    if (!this.options.showUnderline) this.options.line.style.display = 'none';\n    if (this.options.showMenu) {\n      this.options.menu.style.display = 'block';\n      this.setMenuProps();\n      this.options.line.style.width = this.options.menus[0].offsetWidth + 'px';\n    } else this.options.menu.style.display = 'none';\n    this.options.tabcontainer.style.width = this.totalWidth + 'px';\n    this.options.tabcontainer.style.height = this.options.tabHeight;\n    Array.from(this.options.tabs).forEach(e => e.style.width = this.tabWidth + 'px');\n  }\n\n  setMenuProps() {\n    let left = 0;\n    this.options.menuProps = [];\n    Array.from(this.options.menus).forEach((elem, i) => {\n      this.options.menuProps[i] = {\n        width: elem.offsetWidth,\n        left: left\n      };\n      left += elem.offsetWidth;\n      elem._click = () => this.active = i;\n    });\n    const last = this.options.menuProps[this.options.menus.length - 1];\n    this.options.menu.style.width = last.left + last.width + 5 * this.options.menus.length + 'px';\n    const active = this.options.menuProps[this.active];\n    this.options.line.style.left = active.left + 'px';\n    this.options.line.style.width = active.width + 'px';\n  }\n\n  setScrollEvent() {\n    let me = this,\n      isScrolling,\n      scrollPos;\n    me.options.content.onscroll = () => requestAnimationFrame(onScroll);\n\n    function onScroll() {\n      if (!me.options.showMenu) return;\n      scrollPos = me.active;\n      const total = me.options.content.scrollLeft / me.clientWidth;\n      const per = total % 1;\n      const t = Math.floor(total);\n      const left = me.options.menuProps[t].left * (1 - per) + (me.options.menuProps[t + 1] || {\n        left: 0\n      }).left * per;\n      const width = me.options.menuProps[t].width * (1 - per) + (me.options.menuProps[t + 1] || {\n        width: 0\n      }).width * per;\n      me.options.line.style.left = left + 'px';\n      me.options.line.style.width = width + 'px';\n      me.options.menu.parentElement.scrollLeft = left - (me.width - width) / 2;\n      clearTimeout(isScrolling);\n      isScrolling = setTimeout(function() {\n        if (total - scrollPos < -me.options.scrollBreakpoint) {\n          me.active = t;\n        } else if (total - scrollPos > +me.options.scrollBreakpoint) {\n          me.active = t + 1;\n        } else {\n          me.active = scrollPos;\n        }\n      }, 66);\n    }\n  }\n\n  setWindowResizeEvent() {\n    window.addEventListener('resize', () => {\n      if (this._resizing) {\n        clearTimeout(this._resizing);\n      }\n      this._resizing = setTimeout(() => {\n        this._resizing = null;\n        this.refresh();\n      }, 66);\n    });\n  }\n\n  setSlotChangeEvent() {\n    const me = this;\n    const fxn = () => {\n      me.options.menus = me.$$('slot')[0].assignedNodes();\n      me.options.tabs = me.$$('slot')[1].assignedNodes();\n      me.refresh();\n    };\n    this.$$('slot')[0].addEventListener('slotchange', fxn);\n    this.$$('slot')[1].addEventListener('slotchange', fxn);\n  }\n\n  get active() {\n    return this.state ? this.state.active : 0;\n  }\n\n  set active(i) {\n    this.state = {\n      active: i\n    };\n  }\n\n  beforeUpdate() {\n    if (!this.options) return;\n    let i = this.state.active;\n    i = this.getTabNumber(i);\n    if (!isNaN(i) && i !== this.state.active) return this.active = i;\n    this.animate(this.options.content, 'scrollLeft', i * (this.tabWidth + 2 * this.margin), this.options.animationTime, this.options.animation);\n    removeExceptOne(this.options.tabs, 'active', i);\n    removeExceptOne(this.options.tabs, 'prev', this.getTabNumber(i - 1));\n    removeExceptOne(this.options.tabs, 'next', this.getTabNumber(i + 1));\n    removeExceptOne(this.options.menus, 'active', i);\n    removeExceptOne(this.options.menus, 'prev', this.getTabNumber(i - 1));\n    removeExceptOne(this.options.menus, 'next', this.getTabNumber(i + 1));\n    if (this.options.showArrows) {\n      this.options.la.style.display = this.hasPrev() || this.options.loop ? 'block' : 'none';\n      this.options.ra.style.display = this.hasNext() || this.options.loop ? 'block' : 'none';\n    }\n  }\n\n  next() {\n    this.active = this.state.active + this.options.step;\n  }\n\n  hasNext() {\n    if (this.active === this.options.tabs.length - this.options.num) return false;\n    return true;\n  }\n\n  prev() {\n    this.active = this.state.active - this.options.step;\n  }\n\n  hasPrev() {\n    if (this.active === 0) return false;\n    return true;\n  }\n\n  getTabNumber(i) {\n    const l = this.options.tabs.length;\n    const num = this.options.num;\n    i = i < 0 ? i + l : i % l;\n    if (i + num - 1 >= l) {\n      i = this.options.loop ? 0 : l - num;\n    }\n    return i;\n  }\n\n  animate(who, what, to, time, type = 'easeOut') {\n    const from = who[what];\n    const diff = to - from;\n    const me = this;\n    let startTime;\n\n    function frame(currentTime) {\n      startTime = startTime || currentTime;\n      if (currentTime - startTime > time) {\n        who[what] = to;\n        return;\n      }\n      let percent = (currentTime - startTime) / time;\n      who[what] = Math.round(me.animations[type].call(this, percent) * diff + from);\n      window.requestAnimationFrame(frame);\n    }\n    window.requestAnimationFrame(frame);\n  }\n\n  get animations() {\n    return {\n      linear: i => i,\n      easeOut: i => (--i) * i * i + 1,\n      easeIn: i => i * i * i,\n      none: () => 1\n    };\n  }\n}\n\nSifrrTabs.defaultState = { active: 0 };\n\nSifrrDom.register(SifrrTabs);\nexport default SifrrTabs;\n","import SifrrDom from '@sifrr/dom';\nimport SifrrStorage from '@sifrr/storage';\nimport '../../sifrr-tabs/src/sifrrtabs';\nimport style from './style.scss';\n\nconst template = SifrrDom.template`<style>\n  ${style}\n</style>\n<div id=\"showHide\" _click=\\${this.showHide}></div>\n<sifrr-tabs options='{\"tabHeight\": \"calc(100vh - 132px)\"}' data-sifrr-html=\"true\">\n  \\${ this.headingHtml() }\n  \\${ this.stateHtml() }\n</sifrr-tabs>\n<footer>\n  <input _keyup=\\${this.addTargetOnEnter} id=\"addTargetInput\" type=\"text\" name=\"addTargetInput\" value=\"\" placeholder=\"Enter css selector query of target\">\n  <button _click=\\${this.addTarget} class=\"btn3\" type=\"button\" name=\"addTargetButton\">Add Taget</button>\n  <button _click=\\${this.commitAll} class=\"btn3\" type=\"button\" name=\"commitAll\">Commit All</button>\n  <button _click=\\${this.resetAllToFirstState} class=\"btn3\" type=\"button\" name=\"resetAll\">Reset All</button>\n  <button _click=\\${this.saveData} class=\"btn3\" type=\"button\" name=\"saveData\">Save Data</button>\n  <button _click=\\${this.loadData} class=\"btn3\" type=\"button\" name=\"loadData\">Load Data</button>\n  <button _click=\\${this.clearAll} class=\"btn3\" type=\"button\" name=\"clearAll\">Remove All</button>\n</footer>`;\n\nSifrrDom.Event.add('click');\nSifrrDom.Event.add('keyup');\nclass SifrrStater extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  onConnect() {\n    let me = this;\n    this.storage = new SifrrStorage({\n      name: window.location.href\n    });\n    SifrrDom.Event.addListener('click', '.state', function(e, el) {\n      el.classList.contains('open') ? el.classList.remove('open') : el.classList.add('open');\n    });\n    SifrrDom.Event.addListener('click', '.dotC', function(e, target, el) {\n      me.toState(parseInt(el.dataset.target), parseInt(el.dataset.stateIndex));\n    });\n    SifrrDom.Event.addListener('click', '.delete', function(e, el) {\n      me.deleteState(parseInt(el.dataset.target), parseInt(el.dataset.stateIndex));\n    });\n    SifrrDom.Event.addListener('click', '.commit', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.commit(i);\n    });\n    SifrrDom.Event.addListener('click', '.reset', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.resetToFirstState(i);\n    });\n    SifrrDom.Event.addListener('click', '.remove', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.removeTarget(i);\n    });\n  }\n\n  showHide() {\n    this.classList.contains('show') ? this.classList.remove('show') : this.classList.add('show');\n  }\n\n  addTargetOnEnter(event) {\n    if (event.key === 'Enter') {\n      this.addTarget();\n    }\n  }\n\n  headingHtml() {\n    return this.state.queries.map((q) => `<li slot=\"heading\">${q}</li>`).join('');\n  }\n\n  stateHtml() {\n    let me = this;\n    return this.state.states.map((s, i) =>\n      `<div data-target=\"${i}\" slot=\"tab\">\n      <button class=\"btn3 commit\" type=\"button\" name=\"commit\">Commit</button>\n      <button class=\"btn3 reset\" type=\"button\" name=\"reset\">Reset</button>\n      <button class=\"btn3 remove\" type=\"button\" name=\"remove\">Remove</button>\n      ${s.map((jsn, j) => `<div class=\"stateContainer ${j <= me.state.activeStates[i] ? 'on' : 'off'}\">\n                           <div class=\"dotC\" data-target=\"${i}\" data-state-index=\"${j}\"><div class=\"dot\"></div></div>\n                           <div class=\"state\">${SifrrStater.prettyJSON(jsn)}</div>\n                           <div class=\"delete\" data-target=\"${i}\" data-state-index=\"${j}\">X</div>\n                           </div>`).join('')}</div>`\n    ).join('');\n  }\n\n  addTarget(query) {\n    if (typeof query !== 'string') query = this.$('#addTargetInput').value;\n    const target = window.document.querySelector(query);\n    if (!target.isSifrr) {\n      window.console.log('Invalid Sifrr Element.', target);\n      return false;\n    }\n    if (!target.state) {\n      window.console.log('Sifrr Element has no state.', target);\n      return false;\n    }\n    const old = target.onStateChange, me = this;\n    target.onStateChange = function() {\n      me.addState(this, this.state);\n      old();\n    };\n    let index = this.state.targets.indexOf(target);\n    if (index > -1) return;\n    this.state.targets.push(target);\n    this.state.queries.push(query);\n    index = this.state.targets.indexOf(target);\n    this.state.states[index] = [JSON.parse(JSON.stringify(target.state))];\n    this.state.activeStates[index] = 0;\n    this.update();\n  }\n\n  removeTarget(el) {\n    const {\n      index\n    } = this.getTarget(el);\n    if (index > -1) {\n      this.state.targets.splice(index, 1);\n      this.state.queries.splice(index, 1);\n      this.state.states.splice(index, 1);\n      this.state.activeStates.splice(index, 1);\n      this.update();\n    }\n  }\n\n  addState(el, state) {\n    const {\n      index\n    } = this.getTarget(el);\n    if (index > -1) {\n      const active = this.state.activeStates[index];\n      const newState = JSON.stringify(state);\n      if (newState !== JSON.stringify(this.state.states[index][active])) {\n        this.state.states[index].splice(active + 1, 0, JSON.parse(newState));\n        this.state.activeStates[index] = active + 1;\n        this.update();\n      }\n    }\n  }\n  deleteState(el, stateN) {\n    const {\n      index\n    } = this.getTarget(el);\n    this.state.states[index].splice(stateN, 1);\n    if (stateN < this.state.activeStates[index]) {\n      this.state.activeStates[index] -= 1;\n    } else if (stateN == this.state.activeStates[index]) {\n      this.state.activeStates[index] -= 1;\n      this.toState(index, this.state.activeStates[index]);\n    }\n    this.update();\n  }\n\n  commit(el) {\n    const {\n      index\n    } = this.getTarget(el);\n    const last_state = this.state.states[index][this.state.states[index].length - 1];\n    this.state.states[index] = [last_state];\n    this.state.activeStates[index] = 0;\n    this.update();\n  }\n\n  commitAll() {\n    const me = this;\n    this.state.targets.forEach(t => me.commit(t));\n    this.update();\n  }\n\n  toState(el, n) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    this.state.activeStates[index] = n;\n    target.state = this.state.states[index][n];\n    this.update();\n  }\n\n  resetToFirstState(el) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    this.toState(target, 0, false);\n    this.state.states[index] = [this.state.states[index][0]];\n    this.update();\n  }\n\n  resetAllToFirstState() {\n    const me = this;\n    this.state.targets.forEach(t => me.resetToFirstState(t));\n    this.update();\n  }\n\n  clear(target) {\n    const {\n      index\n    } = this.getTarget(target);\n    this.state.activeStates[index] = -1;\n    this.state.states[index] = [];\n    this.update();\n  }\n\n  clearAll() {\n    const me = this;\n    this.state.targets.forEach(t => me.clear(t));\n    this.update();\n  }\n\n  saveData() {\n    const me = this;\n    this.storage.clear().then(() => {\n      me.state.queries.forEach((q, i) => {\n        const data = {\n          active: me.state.activeStates[i],\n          states: me.state.states[i]\n        };\n        me.storage.insert(q, data);\n      });\n    });\n  }\n\n  loadData() {\n    const me = this;\n    this.storage.data().then((data) => {\n      let i = 0;\n      for (let q in data) {\n        me.addTarget(q);\n        me.clear(i);\n        data[q].states.forEach(s => me.addState(i, s));\n        me.toState(i, data[q].active);\n        i++;\n      }\n    });\n  }\n\n  getTarget(target) {\n    let index;\n    if (Number.isInteger(target)) {\n      index = target;\n      target = this.state.targets[index];\n    } else {\n      index = this.state.targets.indexOf(target);\n    }\n    return {\n      index: index,\n      target: target\n    };\n  }\n\n  static prettyJSON(json) {\n    json = JSON.stringify(json, null, 4);\n    json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/g, function(match) {\n      let cls = 'number';\n      if (/:$/.test(match)) {\n        cls = 'key';\n        return '<span class=\"' + cls + '\">' + match + '</span>';\n      } else if (/^\"/.test(match)) {\n        cls = 'string';\n      } else if (/true|false/.test(match)) {\n        cls = 'boolean';\n      } else if (/null/.test(match)) {\n        cls = 'null';\n      }\n      return '<span class=\"' + cls + '\">' + match + '</span>';\n    });\n  }\n}\n\nSifrrStater.defaultState = {\n  targets: [],\n  states: [],\n  queries: [],\n  activeStates: []\n};\n\nSifrrDom.register(SifrrStater);\n\nexport default SifrrStater;\n"],"names":["template","SifrrDom","style","removeExceptOne","elements","name","index","HTMLElement","children","j","length","classList","remove","add","SifrrTabs","Element","observedAttrs","onConnect","_connected","refresh","setWindowResizeEvent","setSlotChangeEvent","setScrollEvent","onAttributeChange","n","_","v","_attrOptions","JSON","parse","options","Object","assign","menu","$","content","tabcontainer","menus","assignedNodes","tabs","la","ra","line","num","showArrows","arrowMargin","showMenu","step","tabHeight","showUnderline","loop","animation","animationTime","scrollBreakpoint","usableWidth","clientWidth","margin","totalWidth","tabWidth","setProps","active","display","Array","from","forEach","e","setMenuProps","width","offsetWidth","height","left","menuProps","elem","i","_click","last","me","isScrolling","scrollPos","onscroll","requestAnimationFrame","onScroll","total","scrollLeft","per","t","Math","floor","parentElement","clearTimeout","setTimeout","window","addEventListener","_resizing","fxn","$$","state","beforeUpdate","getTabNumber","isNaN","animate","hasPrev","hasNext","next","prev","l","who","what","to","time","type","diff","startTime","frame","currentTime","percent","round","animations","call","linear","easeOut","easeIn","none","defaultState","register","Event","SifrrStater","storage","SifrrStorage","location","href","addListener","el","contains","target","toState","parseInt","dataset","stateIndex","deleteState","parentNode","commit","resetToFirstState","removeTarget","showHide","addTargetOnEnter","event","key","addTarget","headingHtml","queries","map","q","join","stateHtml","states","s","jsn","activeStates","prettyJSON","query","value","document","querySelector","isSifrr","console","log","old","onStateChange","addState","targets","indexOf","push","stringify","update","getTarget","splice","newState","stateN","last_state","commitAll","resetAllToFirstState","clear","clearAll","saveData","then","data","insert","loadData","Number","isInteger","json","replace","match","cls","test"],"mappings":"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"}