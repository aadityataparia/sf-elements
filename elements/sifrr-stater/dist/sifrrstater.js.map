{"version":3,"file":"sifrrstater.js","sources":["../../sifrr-tabs/src/sifrrtabs.js","../src/sifrrstater.js"],"sourcesContent":["import SifrrDom from '@sifrr/dom'\nimport style from './style.scss'\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n<div class=\"headings\">\n  <ul>\n    <slot name=\"heading\">\n    </slot>\n  </ul>\n  <div class=\"underline\"></div>\n</div>\n<div class=\"content\">\n  <div class=\"arrow l\">\n    <span></span>\n  </div>\n  <div class=\"arrow r\">\n    <span></span>\n  </div>\n  <div class=\"tabs\">\n    <slot name=\"tab\">\n    </slot>\n  </div>\n</div>`;\n\nfunction removeExceptOne(elems, classN, index) {\n  for (let j = 0; j < elems.length; j++) {\n    j !== index && elems[j] !== index ? elems[j].classList.remove(classN) : elems[j].classList.add(classN);\n  }\n}\n\n//Simple tabs\nclass SifrrTabs extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  onConnect() {\n    this.options = {\n      menu: this.$(\".headings ul\"),\n      content: this.$(\".content\"),\n      tabcontainer: this.$(\".tabs\"),\n      menus: this.$('slot[name=heading]').assignedNodes(),\n      tabs: this.$('slot[name=tab]').assignedNodes(),\n      la: this.$(\".arrow.l\"),\n      ra: this.$(\".arrow.r\"),\n      line: this.$(\".underline\"),\n      num: 1,\n      showArrows: false,\n      arrowMargin: 0,\n      showMenu: true,\n      step: 1,\n      tabHeight: 'auto',\n      showUnderline: true,\n      loop: false,\n      animation: 'easeOut',\n      animationTime: 300,\n      scrollBreakpoint: 0.2\n    }\n    if (this.getAttribute('options')) Object.assign(this.options, JSON.parse(this.getAttribute('options')));\n    this.animations = this.animations();\n    this.setWindowResizeEvent();\n    this.setClickEvents();\n    this.setSlotChangeEvent();\n    this.refresh();\n  }\n\n  refresh(params = {}) {\n    Object.assign(this.options, params);\n    if (!this.options.tabs || this.options.tabs.length < 1) return;\n    this.width = this.clientWidth / this.options.num;\n    this.margin = 0;\n    if (this.options.showArrows) {\n      this.width -= 2 * this.options.arrowMargin;\n      this.margin = this.options.arrowMargin;\n    }\n    this.setProps();\n    this.active = params.active || this.active || 0;\n  }\n\n  get active() {\n    return this.state ? this.state.active : 0;\n  }\n\n  set active(i) {\n    this.state = {\n      active: i\n    };\n  }\n\n  onStateChange() {\n    if (!this.options) return;\n    let i = this.state.active;\n    i = this.getTabNumber(i);\n    if (i + this.options.num - 1 == this.options.tabs.length) {\n      if (this.options.loop) i = 0;\n      else i = this.options.tabs.length - this.options.num;\n    }\n    if (i !== this.state.active) {\n      this.state = {\n        active: i\n      };\n      return;\n    }\n    this.animate(this.options.content, 'scrollLeft', i * (this.width + 2 * this.margin), this.options.animationTime, this.options.animation);\n    removeExceptOne(this.options.tabs, 'active', i);\n    removeExceptOne(this.options.tabs, 'prev', this.getTabNumber(i - 1));\n    removeExceptOne(this.options.tabs, 'next', this.getTabNumber(i + 1));\n    removeExceptOne(this.options.menus, 'active', i);\n    removeExceptOne(this.options.menus, 'prev', this.getTabNumber(i - 1));\n    removeExceptOne(this.options.menus, 'next', this.getTabNumber(i + 1));\n    if (this.options.showArrows) {\n      this.options.la.style.display = this.hasPrev() || this.options.loop ? \"block\" : \"none\";\n      this.options.ra.style.display = this.hasNext() || this.options.loop ? \"block\" : \"none\";\n    }\n  }\n\n  next() {\n    this.active = this.state.active + this.options.step;\n  }\n\n  hasNext() {\n    if (this.active === this.options.tabs.length - this.options.num) return false;\n    return true;\n  }\n\n  prev() {\n    this.active = this.state.active - this.options.step;\n  }\n\n  hasPrev() {\n    if (this.active === 0) return false;\n    return true;\n  }\n\n  getTabNumber(i) {\n    const l = this.options.tabs.length;\n    i = i < 0 ? i + l : i % l\n    return i;\n  }\n\n  setProps() {\n    const me = this;\n    if (!this.options.showArrows) {\n      if (this.options.la) this.options.la.style.display = 'none';\n      if (this.options.ra) this.options.ra.style.display = 'none';\n    } else {\n      Array.from(this.options.tabs).forEach(e => e.style.margin = `0 ${this.margin}px`);\n    }\n    if (!this.options.showUnderline) {\n      if (this.options.line) this.options.line.style.display = 'none';\n    }\n    if (this.options.showMenu) {\n      this.setMenuProps();\n      this.options.line.style.width = this.options.menus[0].offsetWidth + 'px';\n    } else {\n      if (this.options.menu) this.options.menu.style.display = 'none';\n    }\n    this.setScrollEvent();\n    this.options.tabcontainer.style.width = this.options.tabs.length * (this.width + 2 * this.margin) + 'px';\n    this.options.tabcontainer.style.height = this.options.tabHeight;\n    Array.from(this.options.tabs).forEach(e => e.style.width = this.width + 'px');\n  }\n\n  setMenuProps() {\n    const me = this;\n    let left = 0;\n    this.options.menuProps = {};\n    Array.from(this.options.menus).forEach((elem, i) => {\n      this.options.menuProps[i] = {\n        width: elem.offsetWidth,\n        left: left\n      }\n      left += elem.offsetWidth;\n      elem._click = () => me.active = i;\n    });\n    const last = this.options.menuProps[this.options.menus.length - 1];\n    this.options.menu.style.width = last.left + last.width + 5 + 'px';\n    const active = this.options.menuProps[this.active];\n    if (active) {\n      me.options.line.style.left = active.left + 'px';\n      me.options.line.style.width = active.width + 'px';\n    }\n  }\n\n  setClickEvents() {\n    let me = this;\n    if (this.options.la) this.options.la._click = () => me.prev();\n    if (this.options.ra) this.options.ra._click = () => me.next();\n  }\n\n  setScrollEvent() {\n    let me = this,\n      isScrolling,\n      scrollPos = -1;\n    me.options.content.onscroll = () => requestAnimationFrame(onScroll);\n\n    function onScroll() {\n      const total = me.options.content.scrollLeft / me.width;\n      const per = total % 1;\n      if (scrollPos < 0) scrollPos = per;\n      const t = Math.floor(total);\n      try {\n        const left = me.options.menuProps[t].left * (1 - per) + (me.options.menuProps[t + 1] || {\n          left: 0\n        }).left * per;\n        const width = me.options.menuProps[t].width * (1 - per) + (me.options.menuProps[t + 1] || {\n          width: 0\n        }).width * per;\n        me.options.line.style.left = left + 'px';\n        me.options.line.style.width = width + 'px';\n        me.options.menu.parentElement.scrollLeft = left - (me.width - width) / 2;\n      } catch (e) {}\n      clearTimeout(isScrolling);\n      isScrolling = setTimeout(function() {\n        if (per - scrollPos < -me.options.scrollBreakpoint) {\n          me.active = t;\n        } else if (per - scrollPos > +me.options.scrollBreakpoint) {\n          me.active = t + 1;\n        } else {\n          me.active = me.active;\n        }\n        scrollPos = -1;\n      }, 66);\n    }\n  }\n\n  setWindowResizeEvent() {\n    const me = this;\n    window.addEventListener(\"resize\", function() {\n      me.refresh();\n    });\n  }\n\n  setSlotChangeEvent() {\n    const me = this;\n    const fxn = () => {\n      me.options.menus = me.$$('slot')[0].assignedNodes();\n      me.options.tabs = me.$$('slot')[1].assignedNodes();\n      me.refresh();\n    }\n    this.$$('slot')[0].addEventListener('slotchange', fxn);\n    this.$$('slot')[1].addEventListener('slotchange', fxn);\n  }\n\n  animate(who, what, to, time, type = 'easeOut') {\n    const from = who[what];\n    const diff = to - from;\n    const step = 1 / Math.round(time / 16) * diff;\n    const me = this;\n    let pos = 0,\n      raf, startTime;\n\n    function frame(currentTime) {\n      startTime = startTime || currentTime;\n      if (currentTime - startTime > time) {\n        who[what] = to;\n        return;\n      }\n      let percent = (currentTime - startTime) / time;\n      who[what] = Math.round(me.animations[type].call(this, percent) * diff + from);\n      window.requestAnimationFrame(frame);\n    }\n    window.requestAnimationFrame(frame);\n  }\n\n  animations() {\n    return {\n      linear: i => i,\n      easeOut: i => (--i) * i * i + 1,\n      easeIn: i => i * i * i,\n      none: i => 1\n    }\n  }\n}\n\nif (window) SifrrDom.register(SifrrTabs);\nexport default SifrrTabs;\n","import SifrrDom from '@sifrr/dom'\nimport SifrrStorage from '@sifrr/storage'\nimport '../../sifrr-tabs/src/sifrrtabs'\nimport style from './style.scss'\n\nconst template = SifrrDom.template`<style>\n  ${style}\n</style>\n<div id=\"showHide\" _click=\\${this.showHide}></div>\n<sifrr-tabs options='{\"tabHeight\": \"calc(100vh - 132px)\"}' data-sifrr-html=\"true\">\n  \\${ this.headingHtml() }\n  \\${ this.stateHtml() }\n</sifrr-tabs>\n<footer>\n  <input _keyup=\\${this.addTargetOnEnter} id=\"addTargetInput\" type=\"text\" name=\"addTargetInput\" value=\"\" placeholder=\"Enter css selector query of target\">\n  <button _click=\\${this.addTarget} class=\"btn3\" type=\"button\" name=\"addTargetButton\">Add Taget</button>\n  <button _click=\\${this.commitAll} class=\"btn3\" type=\"button\" name=\"commitAll\">Commit All</button>\n  <button _click=\\${this.resetAllToFirstState} class=\"btn3\" type=\"button\" name=\"resetAll\">Reset All</button>\n  <button _click=\\${this.saveData} class=\"btn3\" type=\"button\" name=\"saveData\">Save Data</button>\n  <button _click=\\${this.loadData} class=\"btn3\" type=\"button\" name=\"loadData\">Load Data</button>\n  <button _click=\\${this.clearAll} class=\"btn3\" type=\"button\" name=\"clearAll\">Remove All</button>\n</footer>`;\n\nSifrrDom.Event.add('click');\nSifrrDom.Event.add('keyup');\nclass SifrrStater extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  onConnect() {\n    let me = this;\n    this.storage = new SifrrStorage({\n      name: window.location.href\n    });\n    SifrrDom.Event.addListener('click', '.state', function(e, el) {\n      el.classList.contains('open') ? el.classList.remove('open') : el.classList.add('open');\n    });\n    SifrrDom.Event.addListener('click', '.dotC', function(e, target, el) {\n      me.toState(parseInt(el.dataset.target), parseInt(el.dataset.stateIndex));\n    });\n    SifrrDom.Event.addListener('click', '.delete', function(e, el) {\n      me.deleteState(parseInt(el.dataset.target), parseInt(el.dataset.stateIndex));\n    });\n    SifrrDom.Event.addListener('click', '.commit', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.commit(i);\n    });\n    SifrrDom.Event.addListener('click', '.reset', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.resetToFirstState(i);\n    });\n    SifrrDom.Event.addListener('click', '.remove', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.removeTarget(i);\n    });\n    SifrrDom.Element.onStateChange = function(target) {\n      me.addState(target, target.state);\n    }\n  }\n\n  showHide() {\n    this.classList.contains('show') ? this.classList.remove('show') : this.classList.add('show');\n  }\n\n  addTargetOnEnter(event) {\n    if (event.key === 'Enter') {\n      this.addTarget();\n    }\n  }\n\n  headingHtml() {\n    return this.state.queries.map((q) => `<li slot=\"heading\">${q}</li>`).join('');\n  }\n\n  stateHtml() {\n    let me = this;\n    return this.state.states.map((s, i) =>\n      `<div data-target=\"${i}\" slot=\"tab\">\n      <button class=\"btn3 commit\" type=\"button\" name=\"commit\">Commit</button>\n      <button class=\"btn3 reset\" type=\"button\" name=\"reset\">Reset</button>\n      <button class=\"btn3 remove\" type=\"button\" name=\"remove\">Remove</button>\n      ${s.map((jsn, j) => `<div class=\"stateContainer ${j <= me.state.activeStates[i] ? 'on' : 'off'}\">\n                           <div class=\"dotC\" data-target=\"${i}\" data-state-index=\"${j}\"><div class=\"dot\"></div></div>\n                           <div class=\"state\">${SifrrStater.prettyJSON(jsn)}</div>\n                           <div class=\"delete\" data-target=\"${i}\" data-state-index=\"${j}\">X</div>\n                           </div>`).join('')}</div>`\n    ).join('');\n  }\n\n  addTarget(query) {\n    if (typeof query !== 'string') query = this.$('#addTargetInput').value;\n    const target = window.document.querySelector(query);\n    if (!target.isSifrr) {\n      console.log(\"Invalid Sifrr Element.\", target);\n      return false;\n    }\n    if (!target.state) {\n      console.log(\"Sifrr Element has no state.\", target);\n      return false;\n    }\n    let index = this.state.targets.indexOf(target);\n    if (index > -1) return;\n    this.state.targets.push(target);\n    this.state.queries.push(query);\n    index = this.state.targets.indexOf(target);\n    this.state.states[index] = [JSON.parse(JSON.stringify(target.state))];\n    this.state.activeStates[index] = 0;\n    this.update();\n  }\n\n  removeTarget(el) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    if (index > -1) {\n      this.state.targets.splice(index, 1);\n      this.state.queries.splice(index, 1);\n      this.state.states.splice(index, 1);\n      this.state.activeStates.splice(index, 1);\n      this.update();\n    }\n  }\n\n  addState(el, state) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    if (index > -1) {\n      const active = this.state.activeStates[index];\n      const newState = JSON.stringify(state);\n      if (newState !== JSON.stringify(this.state.states[index][active])) {\n        this.state.states[index].splice(active + 1, 0, JSON.parse(newState));\n        this.state.activeStates[index] = active + 1;\n        this.update();\n      }\n    }\n  }\n  deleteState(el, stateN) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    this.state.states[index].splice(stateN, 1);\n    if (stateN < this.state.activeStates[index]) {\n      this.state.activeStates[index] -= 1;\n    } else if (stateN == this.state.activeStates[index]) {\n      this.state.activeStates[index] -= 1;\n      this.toState(index, this.state.activeStates[index]);\n    }\n    this.update();\n  }\n\n  commit(el) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    const last_state = this.state.states[index][this.state.states[index].length - 1];\n    this.state.states[index] = [last_state];\n    this.state.activeStates[index] = 0;\n    this.update();\n  }\n\n  commitAll() {\n    const me = this;\n    this.state.targets.forEach(t => me.commit(t));\n    this.update();\n  }\n\n  toState(el, n) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    const active = this.state.activeStates[index];\n    this.state.activeStates[index] = n;\n    target.state = this.state.states[index][n];\n    this.update();\n  }\n\n  resetToFirstState(el) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    this.toState(target, 0, false);\n    this.state.states[index] = [this.state.states[index][0]];\n    this.update();\n  }\n\n  resetAllToFirstState() {\n    const me = this;\n    this.state.targets.forEach(t => me.resetToFirstState(t));\n    this.update();\n  }\n\n  clear(target) {\n    const {\n      index\n    } = this.getTarget(target);\n    this.state.activeStates[index] = -1;\n    this.state.states[index] = [];\n    this.update();\n  }\n\n  clearAll() {\n    const me = this;\n    this.state.targets.forEach(t => me.clear(t));\n    this.update();\n  }\n\n  saveData() {\n    const me = this;\n    this.storage.clear().then(() => {\n      me.state.queries.forEach((q, i) => {\n        const data = {\n          active: me.state.activeStates[i],\n          states: me.state.states[i]\n        }\n        me.storage.insert(q, data);\n      });\n    });\n  }\n\n  loadData() {\n    const me = this;\n    this.storage.data().then((data) => {\n      let i = 0;\n      for (let q in data) {\n        me.addTarget(q);\n        me.clear(i);\n        data[q].states.forEach(s => me.addState(i, s));\n        me.toState(i, data[q].active);\n        i++;\n      }\n    });\n  }\n\n  getTarget(target) {\n    let index;\n    if (Number.isInteger(target)) {\n      index = target;\n      target = this.state.targets[index]\n    } else {\n      index = this.state.targets.indexOf(target);\n    }\n    return {\n      index: index,\n      target: target\n    };\n  }\n\n  static prettyJSON(json) {\n    json = JSON.stringify(json, null, 4);\n    json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g, function(match) {\n      var cls = 'number';\n      if (/:$/.test(match)) {\n        cls = 'key';\n        return '<span class=\"' + cls + '\">' + match + '</span>';\n      } else if (/^\"/.test(match)) {\n        cls = 'string';\n      } else if (/true|false/.test(match)) {\n        cls = 'boolean';\n      } else if (/null/.test(match)) {\n        cls = 'null';\n      }\n      return '<span class=\"' + cls + '\">' + match + '</span>';\n    });\n  }\n}\n\nSifrrStater.defaultState = {\n  targets: [],\n  states: [],\n  queries: [],\n  activeStates: []\n}\n\nif (window) SifrrDom.register(SifrrStater);\n\nexport default SifrrStater;\n"],"names":["template","SifrrDom","style","removeExceptOne","elems","classN","index","j","length","classList","remove","add","SifrrTabs","Element","onConnect","options","menu","$","content","tabcontainer","menus","assignedNodes","tabs","la","ra","line","num","showArrows","arrowMargin","showMenu","step","tabHeight","showUnderline","loop","animation","animationTime","scrollBreakpoint","getAttribute","Object","assign","JSON","parse","animations","setWindowResizeEvent","setClickEvents","setSlotChangeEvent","refresh","params","width","clientWidth","margin","setProps","active","state","i","onStateChange","getTabNumber","animate","display","hasPrev","hasNext","next","prev","l","Array","from","forEach","e","setMenuProps","offsetWidth","setScrollEvent","height","me","left","menuProps","elem","_click","last","isScrolling","scrollPos","onscroll","requestAnimationFrame","onScroll","total","scrollLeft","per","t","Math","floor","parentElement","clearTimeout","setTimeout","window","addEventListener","fxn","$$","who","what","to","time","type","diff","startTime","frame","currentTime","percent","round","call","linear","easeOut","easeIn","none","register","Event","SifrrStater","storage","SifrrStorage","name","location","href","addListener","el","contains","target","toState","parseInt","dataset","stateIndex","deleteState","parentNode","commit","resetToFirstState","removeTarget","addState","showHide","addTargetOnEnter","event","key","addTarget","headingHtml","queries","map","q","join","stateHtml","states","s","jsn","activeStates","prettyJSON","query","value","document","querySelector","isSifrr","console","log","targets","indexOf","push","stringify","update","getTarget","splice","newState","stateN","last_state","commitAll","n","resetAllToFirstState","clear","clearAll","saveData","then","data","insert","loadData","Number","isInteger","json","replace","match","cls","test","defaultState"],"mappings":"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"}