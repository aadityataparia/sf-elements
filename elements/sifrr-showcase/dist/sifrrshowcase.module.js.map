{"version":3,"file":"sifrrshowcase.module.js","sources":["../../sifrr-code-editor/src/sifrrcodeeditor.js","../src/singleshowcase.js","../src/sifrrshowcase.js"],"sourcesContent":["import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\n\nconst CM_VERSION = '5.48.0';\n\nconst template = SifrrDom.template`\n<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/codemirror@${CM_VERSION}/lib/codemirror.css\">\n<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/codemirror@${CM_VERSION}/theme/\\${this.getTheme()}.css\">\n<style media=\"screen\">\n  ${style}\n</style>\n<textarea></textarea>`;\n\nclass SifrrCodeEditor extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['value', 'theme', 'lang'];\n  }\n\n  static syncedAttrs() {\n    return ['theme'];\n  }\n\n  static cm() {\n    this._cm = this._cm || SifrrDom.Loader.executeJS(`https://cdn.jsdelivr.net/npm/codemirror@${CM_VERSION}/lib/codemirror.js`);\n    return this._cm;\n  }\n\n  onAttributeChange(n, _, v) {\n    if (this._cmLoaded) {\n      if (n === 'theme') this.cm.setOption('theme', v);\n      if (n === 'lang') this.cm.setOption('mode', this.getTheme());\n    }\n  }\n\n  onConnect() {\n    this.constructor.cm().then(() => this.cmLoaded());\n  }\n\n  input() {\n    SifrrDom.Event.trigger(this, 'input');\n    this.update();\n  }\n\n  cmLoaded() {\n    SifrrDom.Loader.executeJS(`https://cdn.jsdelivr.net/npm/codemirror@${CM_VERSION}/mode/${this.lang}/${this.lang}.js`)\n      .then(() => {\n        this.cm = window.CodeMirror.fromTextArea(this.$('textarea'), {\n          value: this.$('textarea').value,\n          mode: this.lang,\n          htmlMode: true,\n          theme: this.getTheme(),\n          indentUnit: 2,\n          tabSize: 2,\n          lineNumbers: true\n        });\n        this.cm.on('change', this.input.bind(this));\n        this._cmLoaded = true;\n      });\n  }\n\n  getTheme() {\n    return this.theme ? this.theme.split(' ')[0] : 'dracula';\n  }\n\n  get value() {\n    if (this._cmLoaded) return this.cm.getValue();\n    else return this.$('textarea').value;\n  }\n\n  set value(v) {\n    if (v === this.value) return;\n    if (this._cmLoaded) return this.cm.setValue(v);\n    else this.$('textarea').value = v;\n  }\n\n  get lang() {\n    const attr = this.getAttribute('lang');\n    if (!attr || attr === 'html') return 'xml';\n    return attr;\n  }\n}\n\nSifrrDom.register(SifrrCodeEditor);\n\nexport default SifrrCodeEditor;\n","import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\nimport html from './template.html';\nimport '../../sifrr-code-editor/src/sifrrcodeeditor';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n<style>\n\\${this.state.style}\n</style>\n${html}`;\n\nSifrrDom.Event.add('click');\n\nconst defaultShowcase = {\n  id: 1,\n  name: 'Placeholder Element',\n  element: 'sifrr-placeholder',\n  elementUrl: '',\n  isjs: true,\n  variantName: '',\n  variants: [\n    {\n      variantId: 1,\n      variantName: 'variant',\n      style: `#element > * {\n  display: block;\n  background-color: white;\n  margin: auto;\n}`,\n      code: '<sifrr-placeholder>\\n</sifrr-placeholder>',\n      elState: 'return {\\n\\n}'\n    }\n  ]\n};\n\nclass SifrrSingleShowcase extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['url'];\n  }\n\n  onConnect() {\n    this.switchVariant();\n    SifrrDom.Event.addListener('click', '.variant', (e, el) => {\n      if (el.matches('.variant')) this.switchVariant(el.dataset.variantId);\n      if (el.matches('.variant span')) this.deleteVariant(el.parentNode.dataset.variantId);\n    });\n  }\n\n  beforeUpdate() {\n    this.saveVariant();\n    if (!this.state.elemnt) return;\n    if (this._element !== this.state.element || this._js !== this.state.isjs || this._url !== this.state.elementUrl) {\n      SifrrDom.load(this.state.element, {\n        js: this.state.isjs == 'true',\n        url: this.state.elementUrl ? this.state.elementUrl : undefined\n      }).then(() => this.$('#error').innerText = '').catch(e => this.$('#error').innerText = e.message);\n      this._js = this.state.isjs;\n      this._element = this.state.element;\n      this._url = this.state.elementUrl;\n    }\n  }\n\n  onUpdate() {\n    if (this._stateFxnTimeout) clearTimeout(this._stateFxnTimeout);\n    this._stateFxnTimeout = setTimeout(this.runStateFunction.bind(this), 500);\n  }\n\n  runStateFunction() {\n    let state;\n    try {\n      state = new Function(this.$('#elState').value).call(this.element());\n    } catch (e) { window.console.warn(e); }\n    if (state && this.element() && this.element().isSifrr && this.element().state !== state) {\n      this.element().state = state;\n    }\n  }\n\n  onAttributeChange(name, _, value) {\n    if (name === 'url') this.url = value;\n  }\n\n  createNewVariant() {\n    const id = Math.max(...this.state.variants.map(s => s.variantId), 0) + 1;\n    const cid = this.state.variants.findIndex(v => v.variantId == this.state.variantId) + 1 || 1;\n    this.state.variants.splice(cid, 0, Object.assign({}, {\n      variantId: id,\n      variantName: this.state.variantName,\n      style: this.state.style || '',\n      code: this.state.code || '',\n      elState: this.state.elState || ''\n    }));\n    this.switchVariant(id);\n  }\n\n  deleteVariant(id) {\n    this.state.variants.forEach((s, i) => {\n      if (s.variantId == id) {\n        this.state.variants.splice(i, 1);\n        if (this.state.variantId == id) this.switchVariant((this.state.variants[i] || {}).variantId);\n        else this.update();\n      }\n    });\n  }\n\n  saveVariant() {\n    if (!this.state.variants) this.state.variants = [];\n    const id = this.state.variantId;\n    this.state.variants.forEach(s => {\n      if (s.variantId == id) {\n        Object.assign(s, {\n          variantName: this.state.variantName,\n          style: this.state.style,\n          code: this.state.code,\n          elState: this.state.elState\n        });\n      }\n    });\n  }\n\n  switchVariant(id) {\n    this.$('#element').textContent = '';\n    Object.assign(this.state, this.variant(id));\n    this.update();\n  }\n\n  updateHtml(e, el) {\n    const html = `<${el.value}></${el.value}>`;\n    this.state = { code: html, element: el.value };\n  }\n\n  element() {\n    return this.$('#element').firstElementChild;\n  }\n\n  variant(id) {\n    return this.state.variants.find(s => s.variantId == id) || this.state.variants[this.state.variants.length - 1];\n  }\n}\n\nSifrrSingleShowcase.defaultState = defaultShowcase;\n\nSifrrDom.register(SifrrSingleShowcase);\n\nexport default SifrrSingleShowcase;\n","import SifrrDom from '@sifrr/dom';\nimport SifrrStorage from '@sifrr/storage';\nimport style from './style.scss';\nimport './singleshowcase';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n<div class=\"container\">\n  <div class=\"flex-column\" id=\"sidemenu\">\n    <div class=\"box\">\n      <h1 class=\"font head\">Sifrr Showcase</h1>\n      <p class=\"font\" id=\"loader\"></p>\n      <input id=\"url\" type=\"text\" placeholder=\"Enter url here...\" name=\"url\" />\n      <button type=\"button\" name=\"loadUrl\" _click=\\${this.loadUrl}>Load from url</button>\n      <p class=\"font\" id=\"status\"></p>\n      <span class=\"button font\">\n        Upload File\n        <input type=\"file\" name=\"file\" accept=\"application/json\" _input=\"\\${this.loadFile}\" />\n      </span>\n      <button class=\"font\" type=\"button\" name=\"saveFile\" _click=\"\\${this.saveFile}\">Save to File</button>\n      <h3 class=\"font head\">Showcases</h3>\n      <input id=\"showcaseName\" type=\"text\" name=\"showcase\" _input=\\${this.changeName} value=\\${this.state.showcases[this.state.current].name}>\n      <button class=\"font\" type=\"button\" name=\"createVariant\" _click=\"\\${this.createShowcase}\">Create new showcase</button>\n      <div id=\"showcases\" data-sifrr-repeat=\"\\${this.state.showcases}\">\n        <li class=\"font showcase small \\${(this.root && this.state.name === this.root.state.currentSC.name) ? 'current' : ''}\" data-showcase-id=\"\\${this.state.key}\" draggable=\"true\">\\${this.state.name}<span>X</span></li>\n      </div>\n    </div>\n  </div>\n  <sifrr-single-showcase _update=\\${this.saveShowcase} _state=\\${this.state.currentSC} data-sifrr-bind=\"currentSC\"></sifrr-single-showcase>\n</div>`;\n\nconst storage = new SifrrStorage({ name: 'showcases', version: '1.0' });\n\nclass SifrrShowcase extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['url'];\n  }\n\n  onAttributeChange(n, _, value) {\n    if (n === 'url') this.url = value;\n  }\n\n  onConnect() {\n    SifrrDom.Event.addListener('click', '.showcase', (e, el) => {\n      if (el.matches('.showcase')) this.switchShowcase(this.getChildIndex(el));\n      if (el.matches('.showcase span')) this.deleteShowcase(this.getChildIndex(el.parentNode));\n    });\n    this.loadUrl();\n    this.switchShowcase(0);\n    if (window.Sortable) {\n      const me = this;\n      new window.Sortable(this.$('#showcases'), {\n        draggable: 'li',\n        onEnd: (e) => {\n          const o = e.oldIndex, n = e.newIndex;\n          const old = me.state.showcases[o];\n          me.state.showcases[o] = me.state.showcases[n];\n          me.state.showcases[n] = old;\n          const current = me.$('#showcases .current');\n          me.switchShowcase(me.getChildIndex(current));\n        }\n      });\n    }\n  }\n\n  getChildIndex(el) {\n    let i = 0;\n    while((el = el.previousElementSibling) != null) i++;\n    return i;\n  }\n\n  deleteShowcase(i) {\n    this.state.showcases.splice(i, 1);\n    if (i == this.state.current) this.switchShowcase(this.state.current);\n    else this.switchShowcase(this.state.current - 1);\n  }\n\n  createShowcase() {\n    this.state.showcases.splice(this.state.current + 1, 0, {\n      name: this.$('#showcaseName').value,\n      variants: [],\n      element: this.$('#showcaseName').value\n    });\n    this.switchShowcase(this.state.current + 1);\n  }\n\n  switchShowcase(i) {\n    this.current = i;\n    this.$('#showcases').children[this.state.current].classList.remove('current');\n    if (!this.state.showcases[i]) i = this.state.showcases.length - 1;\n    this.state = { current: i, currentSC: this.state.showcases[i] };\n    this.$('#showcases').children[i].classList.add('current');\n  }\n\n  onStateChange() {\n    if (this.state.current !== this.current) this.switchShowcase(this.state.current);\n  }\n\n  saveShowcase() {\n    this.state.showcases[this.state.current] = Object.assign(this.state.showcases[this.state.current], this.state.currentSC);\n    if (this._loaded) {\n      this.$('#status').textContent = 'saving locally!';\n      if (this._timeout) clearTimeout(this._timeout);\n      this._timeout = setTimeout(() => {\n        this._timeout = null;\n        storage.set({ showcases: this.state.showcases, current: this.state.current }).then(() => {\n          this.$('#status').textContent = 'saved locally!';\n        });\n      }, 500);\n    }\n  }\n\n  changeName() {\n    this.state.showcases[this.state.current].name = this.$('#showcaseName').value;\n    this.update();\n  }\n\n  get el() {\n    return this.$('sifrr-single-showcase');\n  }\n\n  set url(v) {\n    this._url = v;\n    if (this.getAttribute('url') !== v) this.setAttribute('url', v);\n    if (this.$('#url').value !== v) this.$('#url').value = v;\n    this.loadUrl();\n  }\n\n  get url() {\n    return this._url;\n  }\n\n  loadUrl() {\n    this._url = this.$('#url').value;\n    window.fetch(this._url).then((resp) => resp.json()).then(v => {\n      this.state.showcases = v.showcases;\n      this.switchShowcase(v.current);\n      this.$('#status').textContent = 'loaded from url!';\n    }).catch((e) => {\n      this.$('#status').textContent = e.message;\n      storage.all().then(v => {\n        this.$('#status').textContent = 'failed to load from url, loaded from storage!';\n        this._loaded = true;\n        if (Array.isArray(v.showcases)) {\n          this.state.showcases = v.showcases;\n          this.switchShowcase(v.current);\n        }\n      });\n    });\n  }\n\n  saveFile() {\n    const blob = new Blob([JSON.stringify(this.state, null, 2)], {\n      type: 'application/json'\n    });\n    const a = document.createElement('a');\n    a.href = URL.createObjectURL(blob);\n    a.download = 'showcases';\n    a.click();\n  }\n\n  loadFile(e, el) {\n    const file = el.files[0];\n    const fr = new FileReader();\n    fr.onload = () => {\n      const json = JSON.parse(fr.result);\n      this.state = json;\n      this.switchShowcase(json.current);\n      this.$('#status').textContent = 'loaded from file!';\n    };\n    fr.readAsText(file);\n  }\n}\n\nSifrrShowcase.defaultState = {\n  current: 0,\n  showcases: [{\n    name: 'new'\n  }]\n};\n\nSifrrDom.register(SifrrShowcase);\n\nexport default SifrrShowcase;\n"],"names":["style","template"],"mappings":"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"}