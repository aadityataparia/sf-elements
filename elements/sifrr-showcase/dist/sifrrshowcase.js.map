{"version":3,"file":"sifrrshowcase.js","sources":["../../sifrr-code-editor/src/sifrrcodeeditor.js","../../../node_modules/strict-uri-encode/index.js","../../../node_modules/decode-uri-component/index.js","../../../node_modules/split-on-first/index.js","../../../node_modules/query-string/index.js","../../../helpers/urlparams.js","../../../node_modules/@sifrr/animate/dist/sifrr.animate.js","../../../helpers/makefullscreen.js","../src/singleshowcase.js","../src/sifrrshowcase.js"],"sourcesContent":["import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\n\nconst CM_VERSION = '5.48.0';\n\nconst template = SifrrDom.template`\n<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/codemirror@${CM_VERSION}/lib/codemirror.css\">\n<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/codemirror@${CM_VERSION}/theme/\\${this.getTheme()}.css\">\n<style media=\"screen\">\n  ${style}\n</style>\n<textarea></textarea>`;\n\nclass SifrrCodeEditor extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['value', 'theme', 'lang'];\n  }\n\n  static syncedAttrs() {\n    return ['theme'];\n  }\n\n  static cm() {\n    this._cm =\n      this._cm ||\n      SifrrDom.Loader.executeJS(\n        `https://cdn.jsdelivr.net/npm/codemirror@${CM_VERSION}/lib/codemirror.js`\n      );\n    return this._cm;\n  }\n\n  onAttributeChange(n, _, v) {\n    if (this._cmLoaded) {\n      if (n === 'theme') this.cm.setOption('theme', v);\n      if (n === 'lang') this.cm.setOption('mode', this.getTheme());\n    }\n  }\n\n  onConnect() {\n    this.constructor.cm().then(() => this.cmLoaded());\n  }\n\n  input() {\n    SifrrDom.Event.trigger(this, 'input');\n    this.update();\n  }\n\n  cmLoaded() {\n    SifrrDom.Loader.executeJS(\n      `https://cdn.jsdelivr.net/npm/codemirror@${CM_VERSION}/mode/${this.lang}/${this.lang}.js`\n    ).then(() => {\n      this.cm = window.CodeMirror.fromTextArea(this.$('textarea'), {\n        value: this.$('textarea').value,\n        mode: this.lang,\n        htmlMode: true,\n        theme: this.getTheme(),\n        indentUnit: 2,\n        tabSize: 2,\n        lineNumbers: true\n      });\n      this.cm.on('change', this.input.bind(this));\n      this._cmLoaded = true;\n    });\n  }\n\n  getTheme() {\n    return this.theme ? this.theme.split(' ')[0] : 'dracula';\n  }\n\n  get value() {\n    if (this._cmLoaded) return this.cm.getValue();\n    else return this.$('textarea').value;\n  }\n\n  set value(v) {\n    if (v === this.value) return;\n    if (this._cmLoaded) return this.cm.setValue(v);\n    else this.$('textarea').value = v;\n  }\n\n  get lang() {\n    const attr = this.getAttribute('lang');\n    if (!attr || attr === 'html') return 'xml';\n    return attr;\n  }\n}\n\nSifrrDom.register(SifrrCodeEditor);\n\nexport default SifrrCodeEditor;\n","'use strict';\nmodule.exports = str => encodeURIComponent(str).replace(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n","'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp(token, 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn decodeURIComponent(components.join(''));\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher);\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher);\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n","'use strict';\n\nmodule.exports = (string, separator) => {\n\tif (!(typeof string === 'string' && typeof separator === 'string')) {\n\t\tthrow new TypeError('Expected the arguments to be of type `string`');\n\t}\n\n\tif (separator === '') {\n\t\treturn [string];\n\t}\n\n\tconst separatorIndex = string.indexOf(separator);\n\n\tif (separatorIndex === -1) {\n\t\treturn [string];\n\t}\n\n\treturn [\n\t\tstring.slice(0, separatorIndex),\n\t\tstring.slice(separatorIndex + separator.length)\n\t];\n};\n","'use strict';\nconst strictUriEncode = require('strict-uri-encode');\nconst decodeComponent = require('decode-uri-component');\nconst splitOnFirst = require('split-on-first');\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tconst index = result.length;\n\t\t\t\tif (value === undefined) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[', index, ']'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')\n\t\t\t\t];\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (value === undefined) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[]'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '[]=', encode(value, options)].join('')];\n\t\t\t};\n\n\t\tcase 'comma':\n\t\t\treturn key => (result, value, index) => {\n\t\t\t\tif (value === null || value === undefined || value.length === 0) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (index === 0) {\n\t\t\t\t\treturn [[encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [[result, encode(value, options)].join(',')];\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (value === undefined) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, encode(key, options)];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tcase 'comma':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = typeof value === 'string' && value.split('').indexOf(',') > -1;\n\t\t\t\tconst newValue = isArray ? value.split(',') : value;\n\t\t\t\taccumulator[key] = newValue;\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction removeHash(input) {\n\tconst hashStart = input.indexOf('#');\n\tif (hashStart !== -1) {\n\t\tinput = input.slice(0, hashStart);\n\t}\n\n\treturn input;\n}\n\nfunction extract(input) {\n\tinput = removeHash(input);\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\n\treturn input.slice(queryStart + 1);\n}\n\nfunction parse(input, options) {\n\toptions = Object.assign({\n\t\tdecode: true,\n\t\tsort: true,\n\t\tarrayFormat: 'none',\n\t\tparseNumbers: false,\n\t\tparseBooleans: false\n\t}, options);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst ret = Object.create(null);\n\n\tif (typeof input !== 'string') {\n\t\treturn ret;\n\t}\n\n\tinput = input.trim().replace(/^[?#&]/, '');\n\n\tif (!input) {\n\t\treturn ret;\n\t}\n\n\tfor (const param of input.split('&')) {\n\t\tlet [key, value] = splitOnFirst(param.replace(/\\+/g, ' '), '=');\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : decode(value, options);\n\n\t\tif (options.parseNumbers && !Number.isNaN(Number(value))) {\n\t\t\tvalue = Number(value);\n\t\t}\n\n\t\tif (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n\t\t\tvalue = value.toLowerCase() === 'true';\n\t\t}\n\n\t\tformatter(decode(key, options), value, ret);\n\t}\n\n\tif (options.sort === false) {\n\t\treturn ret;\n\t}\n\n\treturn (options.sort === true ? Object.keys(ret).sort() : Object.keys(ret).sort(options.sort)).reduce((result, key) => {\n\t\tconst value = ret[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = (object, options) => {\n\tif (!object) {\n\t\treturn '';\n\t}\n\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none'\n\t}, options);\n\n\tconst formatter = encoderForArrayFormat(options);\n\tconst keys = Object.keys(object);\n\n\tif (options.sort !== false) {\n\t\tkeys.sort(options.sort);\n\t}\n\n\treturn keys.map(key => {\n\t\tconst value = object[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value\n\t\t\t\t.reduce(formatter(key), [])\n\t\t\t\t.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&');\n};\n\nexports.parseUrl = (input, options) => {\n\treturn {\n\t\turl: removeHash(input).split('?')[0] || '',\n\t\tquery: parse(extract(input), options)\n\t};\n};\n","import queryString from 'query-string';\n\nfunction getParam(name) {\n  return queryString.parse(location.search)[name];\n}\n\nfunction setParam(name, value) {\n  const newParams = Object.assign(queryString.parse(location.search), {\n    [name]: value\n  });\n  history.replaceState(\n    newParams,\n    'Title',\n    `${location.pathname}?${queryString.stringify(newParams)}`\n  );\n}\n\nexport { getParam, setParam };\n","/*! sifrr-animate v0.0.3 - sifrr project | MIT licensed | https://github.com/sifrr/sifrr-animate */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, (global.Sifrr = global.Sifrr || {}, global.Sifrr.animate = factory()));\n}(this, function () { 'use strict';\n\n  const beziers = {};\n  class Bezier {\n    constructor(args) {\n      const key = args.join('_');\n      if (!beziers[key]) {\n        this.setProps(...args);\n        beziers[key] = this.final.bind(this);\n      }\n      return beziers[key];\n    }\n    setProps(x1, y1, x2, y2) {\n      let props = {\n        x1,\n        y1,\n        x2,\n        y2,\n        A: (x1, x2) => 1.0 - 3.0 * x2 + 3.0 * x1,\n        B: (x1, x2) => 3.0 * x2 - 6.0 * x1,\n        C: x1 => 3.0 * x1,\n        CalcBezier: (t, x1, x2) => ((this.A(x1, x2) * t + this.B(x1, x2)) * t + this.C(x1)) * t,\n        GetSlope: (t, x1, x2) => 3.0 * this.A(x1, x2) * t * t + 2.0 * this.B(x1, x2) * t + this.C(x1)\n      };\n      Object.assign(this, props);\n    }\n    final(x) {\n      if (this.x1 == this.y1 && this.x2 == this.y2) return x;\n      return this.CalcBezier(this.GetTForX(x), this.y1, this.y2);\n    }\n    GetTForX(xx) {\n      let t = xx;\n      for (let i = 0; i < 4; ++i) {\n        let slope = this.GetSlope(t, this.x1, this.x2);\n        if (slope == 0) return t;\n        let x = this.CalcBezier(t, this.x1, this.x2) - xx;\n        t -= x / slope;\n      }\n      return t;\n    }\n  }\n  var bezier = Bezier;\n\n  var types = {\n    linear: [0, 0, 1, 1],\n    ease: [.25, .1, .25, 1],\n    easeIn: [.42, 0, 1, 1],\n    easeOut: [0, 0, .58, 1],\n    easeInOut: [.42, 0, .58, 1],\n    spring: [.3642, 0, .6358, 1]\n  };\n\n  var wait = t => new Promise(res => setTimeout(res, t));\n\n  const digitRgx = /((?:[+\\-*/]=)?-?\\d+\\.?\\d*)/;\n  const frames = new Set();\n  function runFrames(currentTime) {\n    frames.forEach(f => f(currentTime));\n    window.requestAnimationFrame(runFrames);\n  }\n  window.requestAnimationFrame(runFrames);\n  function animateOne({\n    target,\n    prop,\n    from,\n    to,\n    time = 300,\n    type = 'spring',\n    onUpdate,\n    round = false,\n    delay = 0\n  }) {\n    const toSplit = to.toString().split(digitRgx),\n          l = toSplit.length,\n          raw = [],\n          fromNums = [],\n          diffs = [];\n    const fromSplit = (from || target[prop] || '').toString().split(digitRgx);\n    const onUp = typeof onUpdate === 'function';\n    for (let i = 0; i < l; i++) {\n      const fn = Number(fromSplit[i]) || 0;\n      let tn = Number(toSplit[i]);\n      if (toSplit[i][1] === '=') {\n        tn = Number(toSplit[i].slice(2));\n        switch (toSplit[i][0]) {\n          case '+':\n            tn = fn + tn;\n            break;\n          case '-':\n            tn = fn - tn;\n            break;\n          case '*':\n            tn = fn * tn;\n            break;\n          case '/':\n            tn = fn / tn;\n            break;\n        }\n      }\n      if (isNaN(tn) || !toSplit[i]) raw.push(toSplit[i]);else {\n        fromNums.push(fn);\n        diffs.push(tn - fn);\n      }\n    }\n    const rawObj = {\n      raw\n    };\n    return wait(delay).then(() => new Promise((resolve, reject) => {\n      if (types[type]) type = types[type];\n      if (Array.isArray(type)) type = new bezier(type);else if (typeof type !== 'function') return reject(Error('type should be one of ' + Object.keys(types).toString() + ' or Bezier Array or Function, given ' + type));\n      let startTime;\n      const frame = function (currentTime) {\n        startTime = startTime || currentTime - 17;\n        const percent = (currentTime - startTime) / time,\n              bper = type(percent >= 1 ? 1 : percent);\n        const next = diffs.map((d, i) => {\n          const n = bper * d + fromNums[i];\n          return round ? Math.round(n) : n;\n        });\n        const val = String.raw(rawObj, ...next);\n        try {\n          target[prop] = Number(val) || val;\n          if (onUp) onUpdate(target, prop, target[prop]);\n          if (percent >= 1) resolve(frames.delete(frame));\n        } catch (e) {\n          frames.delete(frame);\n          reject(e);\n        }\n      };\n      frames.add(frame);\n    }));\n  }\n  var animateone = animateOne;\n\n  function animate({\n    targets,\n    target,\n    to,\n    time,\n    type,\n    onUpdate,\n    round,\n    delay\n  }) {\n    targets = targets ? Array.from(targets) : [target];\n    function iterate(tg, props, d, ntime) {\n      const promises = [];\n      for (let prop in props) {\n        let from, final;\n        if (Array.isArray(props[prop])) [from, final] = props[prop];else final = props[prop];\n        if (typeof props[prop] === 'object' && !Array.isArray(props[prop])) {\n          promises.push(iterate(tg[prop], props[prop], d, ntime));\n        } else {\n          promises.push(animateone({\n            target: tg,\n            prop,\n            to: final,\n            time: ntime,\n            type,\n            from,\n            onUpdate,\n            round,\n            delay: d\n          }));\n        }\n      }\n      return Promise.all(promises);\n    }\n    let numTo = to,\n        numDelay = delay,\n        numTime = time;\n    return Promise.all(targets.map((target, i) => {\n      if (typeof to === 'function') numTo = to.call(target, i);\n      if (typeof delay === 'function') numDelay = delay.call(target, i);\n      if (typeof time === 'function') numTime = time.call(target, i);\n      return iterate(target, numTo, numDelay, numTime);\n    }));\n  }\n  animate.types = types;\n  animate.wait = wait;\n  animate.animate = animate;\n  animate.keyframes = arrOpts => {\n    let promise = Promise.resolve(true);\n    arrOpts.forEach(opts => {\n      if (Array.isArray(opts)) promise = promise.then(() => Promise.all(opts.map(animate)));\n      promise = promise.then(() => animate(opts));\n    });\n    return promise;\n  };\n  animate.loop = fxn => fxn().then(() => animate.loop(fxn));\n  var animate_1 = animate;\n\n  return animate_1;\n\n}));\n/*! (c) @aadityataparia */\n//# sourceMappingURL=sifrr.animate.js.map\n","import animate from '@sifrr/animate';\n\nconst styles = ['position', 'left', 'top', 'width', 'height', 'z-index'];\nconst FS_CLASS = 'fs';\n\nfunction getNewProps(rect) {\n  const ans = {};\n  styles.forEach(s => {\n    if (s === 'position') {\n      ans[s] = 'fixed';\n    } else if (s === 'z-index') {\n      ans[s] = '99999';\n    } else {\n      ans[s] = rect[s] + 'px';\n    }\n  });\n  return ans;\n}\n\nfunction makeFullScreen(element, onUpdate) {\n  const rect = element.getBoundingClientRect();\n  const newProps = getNewProps(rect);\n  const clone = element.cloneNode(true);\n  for (let prop in newProps) {\n    element[`__o${prop}`] = element.style[prop];\n    element[`__n${prop}`] = newProps[prop];\n    element.style[prop] = newProps[prop];\n  }\n  element.insertAdjacentElement('afterend', clone);\n  element.___clone = clone;\n  element.classList.add(FS_CLASS);\n\n  return animate({\n    target: element.style,\n    to: {\n      left: '0px',\n      top: '0px',\n      width: window.innerWidth + 'px',\n      height: window.innerHeight + 'px'\n    },\n    onUpdate\n  });\n}\n\nfunction exitFullScreen(element, onUpdate) {\n  element.___clone.remove();\n  return animate({\n    target: element.style,\n    to: {\n      left: element.__nleft,\n      top: element.__ntop,\n      width: element.__nwidth,\n      height: element.__nheight\n    },\n    onUpdate\n  }).then(() => {\n    styles.forEach(s => {\n      element.style[s] = element[`__o${s}`];\n      delete element[`__o${s}`];\n      delete element[`__n${s}`];\n    });\n    element.classList.remove(FS_CLASS);\n  });\n}\n\nfunction toggleFullScreen(element, onUpdate) {\n  if (element.classList.contains(FS_CLASS)) {\n    exitFullScreen(element, onUpdate);\n  } else {\n    makeFullScreen(element, onUpdate);\n  }\n}\n\nexport { makeFullScreen, exitFullScreen, toggleFullScreen };\n","import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\nimport html from './template.html';\nimport '../../sifrr-code-editor/src/sifrrcodeeditor';\nimport { getParam, setParam } from '../../../helpers/urlparams';\nimport { toggleFullScreen } from '../../../helpers/makefullscreen';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n<style>\n\\${this.state.style}\n</style>\n${html}`;\n\nSifrrDom.Event.add('click');\n\nconst defaultShowcase = {\n  id: 1,\n  name: 'Placeholder Element',\n  element: 'sifrr-placeholder',\n  elementUrl: '',\n  isjs: true,\n  variantName: '',\n  variants: [\n    {\n      variantId: 1,\n      variantName: 'variant',\n      style: `#element > * {\n  display: block;\n  background-color: white;\n  margin: auto;\n}`,\n      code: '<sifrr-placeholder>\\n</sifrr-placeholder>',\n      elState: 'return {\\n\\n}'\n    }\n  ]\n};\n\nclass SifrrSingleShowcase extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['url'];\n  }\n\n  onConnect() {\n    this.switchVariant(getParam('variant'));\n    SifrrDom.Event.addListener('click', '.variant', (e, el) => {\n      if (el.matches('.variant')) this.switchVariant(el.dataset.variantId);\n      if (el.matches('.variant span')) this.deleteVariant(el.parentNode.dataset.variantId);\n    });\n    this.$('#fs')._click = () => {\n      toggleFullScreen(this.$('#element'));\n    };\n  }\n\n  beforeUpdate() {\n    this.saveVariant();\n    if (!this.state.element) return;\n    if (\n      this._element !== this.state.element ||\n      this._js !== this.state.isjs ||\n      this._url !== this.state.elementUrl\n    ) {\n      SifrrDom.load(this.state.element, {\n        js: this.state.isjs == 'true',\n        url: this.state.elementUrl ? this.state.elementUrl : undefined\n      })\n        .then(() => (this.$('#error').innerText = ''))\n        .catch(e => (this.$('#error').innerText = e.message));\n      this._js = this.state.isjs;\n      this._element = this.state.element;\n      this._url = this.state.elementUrl;\n    }\n  }\n\n  onUpdate() {\n    if (this._stateFxnTimeout) clearTimeout(this._stateFxnTimeout);\n    this._stateFxnTimeout = setTimeout(this.runStateFunction.bind(this), 500);\n  }\n\n  runStateFunction() {\n    let state;\n    try {\n      state = new Function(this.$('#elState').value).call(this.element());\n    } catch (e) {\n      window.console.warn(e);\n    }\n    if (state && this.element() && this.element().isSifrr && this.element().state !== state) {\n      this.element().state = state;\n    }\n  }\n\n  onAttributeChange(name, _, value) {\n    if (name === 'url') this.url = value;\n  }\n\n  createNewVariant() {\n    const id = Math.max(...this.state.variants.map(s => s.variantId), 0) + 1;\n    const cid = this.state.variants.findIndex(v => v.variantId == this.state.variantId) + 1 || 1;\n    this.state.variants.splice(\n      cid,\n      0,\n      Object.assign(\n        {},\n        {\n          variantId: id,\n          variantName: this.state.variantName,\n          style: this.state.style || '',\n          code: this.state.code || '',\n          elState: this.state.elState || ''\n        }\n      )\n    );\n    this.switchVariant(id);\n  }\n\n  deleteVariant(id) {\n    this.state.variants.forEach((s, i) => {\n      if (s.variantId == id) {\n        this.state.variants.splice(i, 1);\n        if (this.state.variantId == id)\n          this.switchVariant((this.state.variants[i] || {}).variantId);\n        else this.update();\n      }\n    });\n  }\n\n  saveVariant() {\n    if (!this.state.variants) this.state.variants = [];\n    const id = this.state.variantId;\n    this.state.variants.forEach(s => {\n      if (s.variantId == id) {\n        Object.assign(s, {\n          variantName: this.state.variantName,\n          style: this.state.style,\n          code: this.state.code,\n          elState: this.state.elState\n        });\n      }\n    });\n  }\n\n  switchVariant(id) {\n    this.$('#element').textContent = '';\n    Object.assign(this.state, this.variant(id));\n    setParam('variant', id);\n    this.update();\n  }\n\n  updateHtml(e, el) {\n    const html = `<${el.value}></${el.value}>`;\n    this.state = { code: html, element: el.value };\n  }\n\n  element() {\n    return this.$('#element').firstElementChild;\n  }\n\n  variant(id) {\n    return (\n      this.state.variants.find(s => s.variantId == id) ||\n      this.state.variants[this.state.variants.length - 1]\n    );\n  }\n}\n\nSifrrSingleShowcase.defaultState = defaultShowcase;\n\nSifrrDom.register(SifrrSingleShowcase);\n\nexport default SifrrSingleShowcase;\n","import SifrrDom from '@sifrr/dom';\nimport SifrrStorage from '@sifrr/storage';\nimport style from './style.scss';\nimport './singleshowcase';\nimport { getParam, setParam } from '../../../helpers/urlparams';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n<div class=\"container\">\n  <div class=\"flex-column\" id=\"sidemenu\">\n    <div class=\"box\">\n      <h1 class=\"font head\">Sifrr Showcase</h1>\n      <p class=\"font\" id=\"loader\"></p>\n      <input id=\"url\" type=\"text\" placeholder=\"Enter url here...\" name=\"url\" />\n      <button type=\"button\" name=\"loadUrl\" _click=\\${this.loadUrl}>Load from url</button>\n      <p class=\"font\" id=\"status\"></p>\n      <span class=\"button font\">\n        Upload File\n        <input type=\"file\" name=\"file\" accept=\"application/json\" _input=\"\\${this.loadFile}\" />\n      </span>\n      <button class=\"font\" type=\"button\" name=\"saveFile\" _click=\"\\${this.saveFile}\">Save to File</button>\n      <h3 class=\"font head\">Showcases</h3>\n      <input id=\"showcaseName\" type=\"text\" name=\"showcase\" _input=\\${this.changeName} value=\\${this.state.showcases[this.state.current].name}>\n      <button class=\"font\" type=\"button\" name=\"createVariant\" _click=\"\\${this.createShowcase}\">Create new showcase</button>\n      <div id=\"showcases\" data-sifrr-repeat=\"\\${this.state.showcases}\">\n        <li class=\"font showcase small \\${(this.root && this.state.name === this.root.state.currentSC.name) ? 'current' : ''}\" data-showcase-id=\"\\${this.state.key}\" draggable=\"true\">\\${this.state.name}<span>X</span></li>\n      </div>\n    </div>\n  </div>\n  <sifrr-single-showcase _update=\\${this.saveShowcase} _state=\\${this.state.currentSC} data-sifrr-bind=\"currentSC\"></sifrr-single-showcase>\n</div>`;\n\nconst storage = new SifrrStorage({ name: 'showcases', version: '1.0' });\n\nclass SifrrShowcase extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['url'];\n  }\n\n  onAttributeChange(n, _, value) {\n    if (n === 'url') this.url = value;\n  }\n\n  onConnect() {\n    SifrrDom.Event.addListener('click', '.showcase', (e, el) => {\n      if (el.matches('.showcase')) this.switchShowcase(this.getChildIndex(el));\n      if (el.matches('.showcase span')) this.deleteShowcase(this.getChildIndex(el.parentNode));\n    });\n    this.loadUrl();\n    if (window.Sortable) {\n      const me = this;\n      new window.Sortable(this.$('#showcases'), {\n        draggable: 'li',\n        onEnd: e => {\n          const o = e.oldIndex,\n            n = e.newIndex;\n          const old = me.state.showcases[o];\n          me.state.showcases[o] = me.state.showcases[n];\n          me.state.showcases[n] = old;\n          const current = me.$('#showcases .current');\n          me.switchShowcase(me.getChildIndex(current));\n        }\n      });\n    }\n  }\n\n  getChildIndex(el) {\n    let i = 0;\n    while ((el = el.previousElementSibling) != null) i++;\n    return i;\n  }\n\n  deleteShowcase(i) {\n    this.state.showcases.splice(i, 1);\n    if (i == this.state.current) this.switchShowcase(this.state.current);\n    else this.switchShowcase(this.state.current - 1);\n  }\n\n  createShowcase() {\n    this.state.showcases.splice(this.state.current + 1, 0, {\n      name: this.$('#showcaseName').value,\n      variants: [],\n      element: this.$('#showcaseName').value\n    });\n    this.switchShowcase(this.state.current + 1);\n  }\n\n  switchShowcase(i) {\n    i = Number(i);\n    this.current = i;\n    this.$('#showcases').children[this.state.current].classList.remove('current');\n    if (!this.state.showcases[i]) i = this.state.showcases.length - 1;\n    this.state = { current: i, currentSC: this.state.showcases[i] };\n    this.$('#showcases').children[i].classList.add('current');\n    setParam('showcase', i);\n  }\n\n  onStateChange() {\n    if (this.state.current !== this.current) this.switchShowcase(this.state.current);\n  }\n\n  saveShowcase() {\n    this.state.showcases[this.state.current] = Object.assign(\n      this.state.showcases[this.state.current],\n      this.state.currentSC\n    );\n    if (this._loaded) {\n      this.$('#status').textContent = 'saving locally!';\n      if (this._timeout) clearTimeout(this._timeout);\n      this._timeout = setTimeout(() => {\n        this._timeout = null;\n        storage.set({ showcases: this.state.showcases, current: this.state.current }).then(() => {\n          this.$('#status').textContent = 'saved locally!';\n        });\n      }, 500);\n    }\n  }\n\n  changeName() {\n    this.state.showcases[this.state.current].name = this.$('#showcaseName').value;\n    this.update();\n  }\n\n  get el() {\n    return this.$('sifrr-single-showcase');\n  }\n\n  set url(v) {\n    this._url = v;\n    if (this.getAttribute('url') !== v) this.setAttribute('url', v);\n    if (this.$('#url').value !== v) this.$('#url').value = v;\n    this.loadUrl();\n  }\n\n  get url() {\n    return this._url;\n  }\n\n  loadUrl() {\n    this._url = getParam('url') || this.$('#url').value;\n    window\n      .fetch(this._url)\n      .then(resp => resp.json())\n      .then(v => {\n        this.state.showcases = v.showcases;\n        this.switchShowcase(getParam('showcase') === undefined ? v.current : getParam('showcase'));\n        this.$('#status').textContent = 'loaded from url!';\n      })\n      .catch(e => {\n        this.$('#status').textContent = e.message;\n        storage.all().then(v => {\n          this.$('#status').textContent = 'failed to load from url, loaded from storage!';\n          this._loaded = true;\n          if (Array.isArray(v.showcases)) {\n            this.state.showcases = v.showcases;\n            this.switchShowcase(\n              getParam('showcase') === undefined ? v.current : getParam('showcase')\n            );\n          }\n        });\n      });\n  }\n\n  saveFile() {\n    const blob = new Blob([JSON.stringify(this.state, null, 2)], {\n      type: 'application/json'\n    });\n    const a = document.createElement('a');\n    a.href = URL.createObjectURL(blob);\n    a.download = 'showcases';\n    a.click();\n  }\n\n  loadFile(e, el) {\n    const file = el.files[0];\n    const fr = new FileReader();\n    fr.onload = () => {\n      const json = JSON.parse(fr.result);\n      this.state = json;\n      this.switchShowcase(json.current);\n      this.$('#status').textContent = 'loaded from file!';\n    };\n    fr.readAsText(file);\n  }\n}\n\nSifrrShowcase.defaultState = {\n  current: 0,\n  showcases: [\n    {\n      name: 'new'\n    }\n  ]\n};\n\nSifrrDom.register(SifrrShowcase);\n\nexport default SifrrShowcase;\n"],"names":["CM_VERSION","template","SifrrDom","style","SifrrCodeEditor","Element","observedAttrs","syncedAttrs","cm","_cm","Loader","executeJS","onAttributeChange","n","_","v","_cmLoaded","setOption","getTheme","onConnect","constructor","then","cmLoaded","input","Event","trigger","update","lang","window","CodeMirror","fromTextArea","$","value","mode","htmlMode","theme","indentUnit","tabSize","lineNumbers","on","bind","split","getValue","setValue","attr","getAttribute","register","decode","decodeComponent","getParam","name","queryString","parse","location","search","setParam","newParams","Object","assign","history","replaceState","pathname","stringify","this","styles","FS_CLASS","getNewProps","rect","ans","forEach","s","makeFullScreen","element","onUpdate","getBoundingClientRect","newProps","clone","cloneNode","prop","insertAdjacentElement","___clone","classList","add","animate","target","to","left","top","width","innerWidth","height","innerHeight","exitFullScreen","remove","__nleft","__ntop","__nwidth","__nheight","toggleFullScreen","contains","html","defaultShowcase","id","elementUrl","isjs","variantName","variants","variantId","code","elState","SifrrSingleShowcase","switchVariant","addListener","e","el","matches","dataset","deleteVariant","parentNode","_click","beforeUpdate","saveVariant","state","_element","_js","_url","load","js","url","undefined","innerText","catch","message","_stateFxnTimeout","clearTimeout","setTimeout","runStateFunction","Function","call","console","warn","isSifrr","createNewVariant","Math","max","map","cid","findIndex","splice","i","textContent","variant","updateHtml","firstElementChild","find","length","defaultState","storage","SifrrStorage","version","SifrrShowcase","switchShowcase","getChildIndex","deleteShowcase","loadUrl","Sortable","me","draggable","onEnd","o","oldIndex","newIndex","old","showcases","current","previousElementSibling","createShowcase","Number","children","currentSC","onStateChange","saveShowcase","_loaded","_timeout","set","changeName","setAttribute","fetch","resp","json","all","Array","isArray","saveFile","blob","Blob","JSON","type","a","document","createElement","href","URL","createObjectURL","download","click","loadFile","file","files","fr","FileReader","onload","result","readAsText"],"mappings":"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"}