{"version":3,"file":"sifrrshowcase.js","sources":["../../sifrr-code-editor/dist/sifrrcodeeditor.js","../src/singleshowcase.js","../src/sifrrshowcase.js"],"sourcesContent":["/*! SifrrCodeEditor v0.0.4 - sifrr project | MIT licensed | https://github.com/sifrr/sifrr-elements */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('@sifrr/dom')) :\n  typeof define === 'function' && define.amd ? define(['@sifrr/dom'], factory) :\n  (global = global || self, global.SifrrCodeEditor = factory(global.Sifrr.Dom));\n}(this, function (SifrrDom) { 'use strict';\n\n  SifrrDom = SifrrDom && SifrrDom.hasOwnProperty('default') ? SifrrDom['default'] : SifrrDom;\n\n  function _taggedTemplateLiteral(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    return Object.freeze(Object.defineProperties(strings, {\n      raw: {\n        value: Object.freeze(raw)\n      }\n    }));\n  }\n\n  var css = \":host {\\n  display: block;\\n  position: relative; }\\n\\n* {\\n  box-sizing: border-box; }\\n\\n.hljs {\\n  width: 100%;\\n  height: 100%;\\n  font-family: Consolas,Liberation Mono,Courier,monospace;\\n  font-size: 14px;\\n  line-height: 18px;\\n  padding: 8px;\\n  margin: 0;\\n  position: absolute;\\n  white-space: pre-wrap;\\n  top: 0;\\n  left: 0; }\\n\\ntextarea {\\n  z-index: 2;\\n  resize: none;\\n  border: none; }\\n\\ntextarea.loaded {\\n  background: transparent !important;\\n  text-shadow: 0px 0px 0px rgba(0, 0, 0, 0);\\n  text-fill-color: transparent;\\n  -webkit-text-fill-color: transparent; }\\n\\npre {\\n  z-index: 1; }\\n\";\n\n  function _templateObject() {\n    const data = _taggedTemplateLiteral([\"\\n<style media=\\\"screen\\\">\\n  \", \"\\n</style>\\n<link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/atom-one-dark.min.css\\\">\\n<pre class='hljs'>\\n  <code id=\\\"highight\\\" data-sifrr-html=\\\"true\\\">\\n    ${this.htmlValue}\\n  </code>\\n</pre>\\n<textarea class='hljs' _input=\\\"${this.input}\\\"></textarea>\"], [\"\\n<style media=\\\"screen\\\">\\n  \", \"\\n</style>\\n<link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/atom-one-dark.min.css\\\">\\n<pre class='hljs'>\\n  <code id=\\\"highight\\\" data-sifrr-html=\\\"true\\\">\\n    \\\\${this.htmlValue}\\n  </code>\\n</pre>\\n<textarea class='hljs' _input=\\\"\\\\${this.input}\\\"></textarea>\"]);\n    _templateObject = function () {\n      return data;\n    };\n    return data;\n  }\n  const template = SifrrDom.template(_templateObject(), css);\n  class SifrrCodeEditor extends SifrrDom.Element {\n    static get template() {\n      return template;\n    }\n    onAttributeChange() {\n      this.update();\n    }\n    onConnect() {\n      fetch(\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js\").then(resp => resp.text()).then(text => new Function(text)()).then(() => this.hljsLoaded());\n      const txtarea = this.$('textarea');\n      this.$('textarea').addEventListener('keydown', e => {\n        let keyCode = e.keyCode || e.which;\n        if (keyCode == 9) {\n          e.preventDefault();\n          const start = txtarea.selectionStart;\n          const end = txtarea.selectionEnd;\n          const tabCharacter = '  ';\n          const tabOffset = 2;\n          txtarea.value = txtarea.value.substring(0, start) + tabCharacter + txtarea.value.substring(end);\n          txtarea.selectionStart = txtarea.selectionEnd = start + tabOffset;\n        }\n      });\n    }\n    input() {\n      SifrrDom.Event.trigger(this, 'input');\n      this.update();\n    }\n    hljsLoaded() {\n      this.$('textarea').classList.add('loaded');\n      this.update();\n    }\n    get htmlValue() {\n      if (window.hljs) return hljs.highlight(this.lang, this.value).value;else return this.value.replace(/</g, '&lt;');\n    }\n    get value() {\n      return this.$('textarea').value;\n    }\n    set value(v) {\n      this.$('textarea').value = v;\n      this.update();\n    }\n    get lang() {\n      return this.getAttribute('lang') || 'html';\n    }\n  }\n  if (window) SifrrDom.register(SifrrCodeEditor);\n\n  return SifrrCodeEditor;\n\n}));\n/*! (c) @aadityataparia */\n//# sourceMappingURL=sifrrcodeeditor.js.map\n","import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\nimport html from './template.html';\nimport '../../sifrr-code-editor';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n${html}`;\n\nSifrrDom.Event.add('click');\n\nconst defaultShowcase = {\n  id: 1,\n  name: 'Placeholder Element',\n  element: 'sifrr-placeholder',\n  elementUrl: '',\n  isjs: true,\n  variantName: '',\n  variants: [\n    {\n      variantId: 1,\n      variantName: 'variant',\n      style: `#element > * {\n  display: block;\n  background-color: white;\n  margin: auto;\n}`,\n      code: '<sifrr-placeholder>\\n</sifrr-placeholder>',\n      elState: 'return {\\n\\n}'\n    }\n  ]\n};\n\nclass SifrrSingleShowcase extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['url'];\n  }\n\n  onConnect() {\n    this.switchVariant();\n    Sifrr.Dom.Event.addListener('click', '.variant', (e, el) => {\n      if (el.matches('.variant')) this.switchVariant(el.dataset.variantId);\n      if (el.matches('.variant span')) this.deleteVariant(el.parentNode.dataset.variantId);\n    });\n  }\n\n  beforeUpdate() {\n    this.saveVariant();\n  }\n\n  onUpdate() {\n    if (this._element !== this.state.element || this._js !== this.state.isjs || this._url !== this.state.elementUrl) {\n      SifrrDom.load(this.state.element, {\n        js: this.state.isjs == 'true',\n        url: this.state.elementUrl ? this.state.elementUrl : undefined\n      }).then(() => this.$('#error').innerText = '').catch(e => this.$('#error').innerText = e.message);\n      this._js = this.state.isjs;\n      this._element = this.state.element;\n      this._url = this.state.elementUrl;\n    }\n    let state;\n    try {\n      state = new Function(this.$('#elState').value).call(this.element());\n    } catch (e) {}\n    if (state && this.element() && this.element().isSifrr && this.element().state !== state) {\n      this.element().state = state;\n    }\n  }\n\n  onAttributeChange(name, _, value) {\n    if (name === 'url') this.url = value;\n  }\n\n  createNewVariant() {\n    const id = Math.max(...this.state.variants.map(s => s.variantId), 0) + 1;\n    this.state.variants.push(Object.assign({}, {\n      variantId: id,\n      variantName: this.state.variantName,\n      style: this.state.style,\n      code: this.state.code,\n      elState: this.state.elState\n    }));\n    this.switchVariant(id);\n  }\n\n  deleteVariant(id) {\n    this.state.variants.forEach((s, i) => {\n      if (s.variantId == id) {\n        this.state.variants.splice(i, 1);\n        if (this.state.variantId == id) this.switchVariant((this.state.variants[i] || {}).variantId);\n        else this.update();\n      }\n    });\n  }\n\n  saveVariant() {\n    const id = this.state.variantId;\n    this.state.variants.forEach(s => {\n      if (s.variantId == id) {\n        Object.assign(s, {\n          variantName: this.state.variantName,\n          style: this.state.style,\n          code: this.state.code,\n          elState: this.state.elState\n        });\n      }\n    });\n  }\n\n  switchVariant(id) {\n    Object.assign(this.state, this.variant(id));\n    this.update();\n  }\n\n  updateHtml(e, el) {\n    const html = `<${el.value}></${el.value}>`;\n    this.state = { code: html, element: el.value };\n  }\n\n  element() {\n    return this.$('#element').firstElementChild;\n  }\n\n  variant(id) {\n    return this.state.variants.filter(s => s.variantId == id)[0] || this.state.variants[this.state.variants.length - 1];\n  }\n}\n\nSifrrSingleShowcase.defaultState = defaultShowcase;\n\nif (window) SifrrDom.register(SifrrSingleShowcase);\n\nexport default SifrrSingleShowcase;\n","import SifrrDom from '@sifrr/dom';\nimport SifrrStorage from '@sifrr/storage';\nimport style from './style.scss';\nimport './singleshowcase';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n<div class=\"container\">\n  <div class=\"flex-column\" id=\"sidemenu\">\n    <div class=\"box\">\n      <h1>Sifrr Showcase</h1>\n      <p id=\"loader\"></p>\n      <input id=\"url\" type=\"text\" placeholder=\"Enter url here...\" name=\"url\" />\n      <button type=\"button\" name=\"loadUrl\" _click=\\${this.loadUrl}>Load from url</button>\n      <p id=\"status\"></p>\n      <span class=\"button\">\n        Upload File\n        <input type=\"file\" name=\"file\" accept=\"application/json\" _input=\"\\${this.loadFile}\" />\n      </span>\n      <button type=\"button\" name=\"saveFile\" _click=\"\\${this.saveFile}\">Save to File</button>\n      <h3>Showcases</h3>\n      <input id=\"showcaseName\" type=\"text\" name=\"showcase\" _input=\\${this.changeName}>\n      <button type=\"button\" name=\"createVariant\" _click=\"\\${this.createShowcase}\">Create new showcase</button>\n      <style>\n        #showcase\\${this.state.current} {\n          background: #5f616d;\n        }\n      </style>\n      <div id=\"showcases\" data-sifrr-repeat=\"\\${this.state.showcases}\">\n        <li class=\"showcase\" data-showcase-id=\"\\${this.state.key}\">\\${this.state.name}<span>X</span></li>\n      </div>\n    </div>\n  </div>\n  <sifrr-single-showcase _update=\\${this.saveShowcase}></sifrr-single-showcase>\n</div>`;\n\nconst storage = new SifrrStorage({ name: 'showcases', version: '1.0' });\n\nclass SifrrShowcase extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['url'];\n  }\n\n  onAttributeChange(n, _, value) {\n    if (n === 'url') this.url = value;\n  }\n\n  onConnect() {\n    Sifrr.Dom.Event.addListener('click', '.showcase', (e, el) => {\n      if (el.matches('.showcase')) this.switchShowcase(this.getChildIndex(el));\n      if (el.matches('.showcase span')) this.deleteShowcase(this.getChildIndex(el));\n    });\n    this.switchShowcase(0);\n    storage.get(['showcases', 'current']).then(v => {\n      if (Array.isArray(v.showcases)) this.state = v;\n      this.switchShowcase(v.current);\n      this._loaded = true;\n    });\n  }\n\n  getChildIndex(el) {\n    let i = 0;\n    while((el = el.previousSibling) != null) i++;\n    return i;\n  }\n\n  deleteShowcase(i) {\n    this.state.showcases.splice(i, 1);\n    if (i == this.state.current) this.switchShowcase(this.state.current);\n    else this.switchShowcase(this.state.current - 1);\n  }\n\n  createShowcase() {\n    const i = this.state.showcases.push({ name: this.$('#showcaseName').value, variants: [] });\n    this.switchShowcase(i - 1);\n  }\n\n  switchShowcase(i) {\n    if (!this.state.showcases[i]) i = this.state.showcases.length - 1;\n    this.state = { current: i };\n    this.el.state = this.state.showcases[i];\n    this.$('#showcases').children[i].id = 'showcase' + i;\n  }\n\n  saveShowcase() {\n    delete this.el.state.name;\n    this.state.showcases[this.state.current] = Object.assign(this.state.showcases[this.state.current], this.el.state);\n    if (this._loaded) {\n      this.$('#status').textContent = 'saving locally!';\n      if (this._timeout) clearTimeout(this._timeout);\n      setTimeout(() => {\n        storage.set({ showcases: this.state.showcases, current: this.state.current }).then(() => {\n          this.$('#status').textContent = 'saved locally!';\n        });\n      }, 500);\n    }\n  }\n\n  changeName() {\n    this.state.showcases[this.state.current].name = this.$('#showcaseName').value;\n    this.update();\n  }\n\n  get el() {\n    return this.$('sifrr-single-showcase');\n  }\n\n  set url(v) {\n    this._url = v;\n    if (this.getAttribute('url') !== v) this.setAttribute('url', v);\n    if (this.$('#url').value !== v) this.$('#url').value = v;\n    this.loadUrl();\n  }\n\n  get url() {\n    return this._url;\n  }\n\n  loadUrl() {\n    this._url = this.$('#url').value;\n    window.fetch(this._url).then((resp) => resp.json()).then(json => {\n      this.state = json;\n      this.$('#status').textContent = 'loaded from url!';\n    }).catch((e) => {\n      this.$('#status').textContent = e.message;\n    });\n  }\n\n  saveFile() {\n    const blob = new Blob([JSON.stringify(this.state, null, 2)], {\n      type: 'application/json'\n    });\n    const a = document.createElement('a');\n    a.href = URL.createObjectURL(blob);\n    a.download = 'showcases';\n    a.click();\n  }\n\n  loadFile(e, el) {\n    const file = el.files[0];\n    const fr = new FileReader();\n    fr.onload = () => {\n      const json = JSON.parse(fr.result);\n      this.state = json;\n      this.$('#status').textContent = 'loaded from file!';\n    };\n    fr.readAsText(file);\n  }\n}\n\nSifrrShowcase.defaultState = {\n  current: 0,\n  showcases: [{\n    name: 'new'\n  }]\n};\n\nif (window) SifrrDom.register(SifrrShowcase);\n\nexport default SifrrShowcase;\n"],"names":["update","template","SifrrDom","style","html","Event","add","defaultShowcase","id","name","element","elementUrl","isjs","variantName","variants","variantId","code","elState","SifrrSingleShowcase","Element","observedAttrs","onConnect","switchVariant","Sifrr","Dom","addListener","e","el","matches","dataset","deleteVariant","parentNode","beforeUpdate","saveVariant","onUpdate","_element","state","_js","_url","load","js","url","undefined","then","$","innerText","catch","message","Function","value","call","isSifrr","onAttributeChange","_","createNewVariant","Math","max","map","s","push","Object","assign","forEach","i","splice","variant","updateHtml","firstElementChild","filter","length","defaultState","window","register","storage","SifrrStorage","version","SifrrShowcase","n","switchShowcase","getChildIndex","deleteShowcase","get","v","Array","isArray","showcases","current","_loaded","previousSibling","createShowcase","children","saveShowcase","textContent","_timeout","clearTimeout","setTimeout","set","changeName","getAttribute","setAttribute","loadUrl","fetch","resp","json","saveFile","blob","Blob","JSON","stringify","type","a","document","createElement","href","URL","createObjectURL","download","click","loadFile","file","files","fr","FileReader","onload","parse","result","readAsText"],"mappings":"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"}