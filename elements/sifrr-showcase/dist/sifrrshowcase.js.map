{"version":3,"file":"sifrrshowcase.js","sources":["../../sifrr-code-editor/dist/sifrrcodeeditor.js","../src/sifrrshowcase.js"],"sourcesContent":["/*! SifrrCodeEditor v0.0.4 - sifrr project | MIT licensed | https://github.com/sifrr/sifrr-elements */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('@sifrr/dom')) :\n  typeof define === 'function' && define.amd ? define(['@sifrr/dom'], factory) :\n  (global = global || self, global.SifrrCodeEditor = factory(global.Sifrr.Dom));\n}(this, function (SifrrDom) { 'use strict';\n\n  SifrrDom = SifrrDom && SifrrDom.hasOwnProperty('default') ? SifrrDom['default'] : SifrrDom;\n\n  function _taggedTemplateLiteral(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    return Object.freeze(Object.defineProperties(strings, {\n      raw: {\n        value: Object.freeze(raw)\n      }\n    }));\n  }\n\n  var css = \":host {\\n  display: block;\\n  position: relative; }\\n\\n* {\\n  box-sizing: border-box; }\\n\\n.hljs {\\n  width: 100%;\\n  height: 100%;\\n  font-family: Consolas,Liberation Mono,Courier,monospace;\\n  font-size: 14px;\\n  line-height: 18px;\\n  padding: 8px;\\n  margin: 0;\\n  position: absolute;\\n  white-space: pre-wrap;\\n  top: 0;\\n  left: 0; }\\n\\ntextarea {\\n  z-index: 2;\\n  resize: none;\\n  border: none; }\\n\\ntextarea.loaded {\\n  background: transparent !important;\\n  text-shadow: 0px 0px 0px rgba(0, 0, 0, 0);\\n  text-fill-color: transparent;\\n  -webkit-text-fill-color: transparent; }\\n\\npre {\\n  z-index: 1; }\\n\";\n\n  function _templateObject() {\n    const data = _taggedTemplateLiteral([\"\\n<style media=\\\"screen\\\">\\n  \", \"\\n</style>\\n<link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/atom-one-dark.min.css\\\">\\n<pre class='hljs'>\\n  <code id=\\\"highight\\\" data-sifrr-html=\\\"true\\\">\\n    ${this.htmlValue}\\n  </code>\\n</pre>\\n<textarea class='hljs' _input=\\\"${this.input}\\\"></textarea>\"], [\"\\n<style media=\\\"screen\\\">\\n  \", \"\\n</style>\\n<link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/atom-one-dark.min.css\\\">\\n<pre class='hljs'>\\n  <code id=\\\"highight\\\" data-sifrr-html=\\\"true\\\">\\n    \\\\${this.htmlValue}\\n  </code>\\n</pre>\\n<textarea class='hljs' _input=\\\"\\\\${this.input}\\\"></textarea>\"]);\n    _templateObject = function () {\n      return data;\n    };\n    return data;\n  }\n  const template = SifrrDom.template(_templateObject(), css);\n  class SifrrCodeEditor extends SifrrDom.Element {\n    static get template() {\n      return template;\n    }\n    onAttributeChange() {\n      this.update();\n    }\n    onConnect() {\n      fetch(\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js\").then(resp => resp.text()).then(text => new Function(text)()).then(() => this.hljsLoaded());\n      const txtarea = this.$('textarea');\n      this.$('textarea').addEventListener('keydown', e => {\n        let keyCode = e.keyCode || e.which;\n        if (keyCode == 9) {\n          e.preventDefault();\n          const start = txtarea.selectionStart;\n          const end = txtarea.selectionEnd;\n          const tabCharacter = '  ';\n          const tabOffset = 2;\n          txtarea.value = txtarea.value.substring(0, start) + tabCharacter + txtarea.value.substring(end);\n          txtarea.selectionStart = txtarea.selectionEnd = start + tabOffset;\n        }\n      });\n    }\n    input() {\n      SifrrDom.Event.trigger(this, 'input');\n      this.update();\n    }\n    hljsLoaded() {\n      this.$('textarea').classList.add('loaded');\n      this.update();\n    }\n    get htmlValue() {\n      if (window.hljs) return hljs.highlight(this.lang, this.value).value;else return this.value.replace(/</g, '&lt;');\n    }\n    get value() {\n      return this.$('textarea').value;\n    }\n    set value(v) {\n      this.$('textarea').value = v;\n      this.update();\n    }\n    get lang() {\n      return this.getAttribute('lang') || 'html';\n    }\n  }\n  if (window) SifrrDom.register(SifrrCodeEditor);\n\n  return SifrrCodeEditor;\n\n}));\n/*! (c) @aadityataparia */\n//# sourceMappingURL=sifrrcodeeditor.js.map\n","import SifrrDom from '@sifrr/dom';\nimport SifrrStorage from '@sifrr/storage';\nimport style from './style.scss';\nimport html from './template.html';\nimport '../../sifrr-code-editor';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n${html}`;\n\nSifrrDom.Event.add('click');\n\nconst defaultShowcase = {\n  id: 1,\n  name: 'new',\n  element: 'sifrr-placeholder',\n  style: `#element > * {\n  display: block;\n  background-color: white;\n  margin: auto;\n}`,\n  code: '<sifrr-placeholder>\\n</sifrr-placeholder>',\n  elState: 'return {\\n\\n}',\n  isjs: 'true',\n  elementUrl: ''\n};\nconst storage = new SifrrStorage({ name: 'sifrr-showcase', version: 1 });\nconst showcases = [];\n\nclass SifrrShowcase extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['url'];\n  }\n\n  onConnect() {\n    storage.get(['showcases', 'current']).then((res) => {\n      if (Array.isArray(res.showcases) && res.showcases.length > 0) {\n        showcases.push(...res.showcases);\n      } else showcases.push(defaultShowcase);\n      this.switchShowcase(res.current || defaultShowcase.id);\n    });\n    this.$('#loader').textContent = 'loaded from storage!';\n    SifrrDom.Event.addListener('click', '.showcase', (e, el) => {\n      if (el.matches('.showcase')) {\n        const id = el.dataset.showcaseId;\n        this.switchShowcase(id);\n      }\n    });\n    SifrrDom.Event.addListener('click', '.showcase span', (e, el) => {\n      const id = el.parentNode.dataset.showcaseId;\n      this.deleteShowcase(id);\n    });\n  }\n\n  onUpdate() {\n    if (this._element !== this.state.element || this._js !== this.state.isjs) {\n      SifrrDom.load(this.state.element, {\n        js: this.state.isjs == 'true',\n        url: this.state.elementUrl ? this.state.elementUrl : undefined\n      }).then(() => this.$('#error').innerText = '').catch(e => this.$('#error').innerText = e.message);\n      this._js = this.state.isjs;\n      this._element = this.state.element;\n    }\n    let state;\n    try {\n      state = new Function(this.$('#elState').value).call(this.element());\n    } catch (e) {}\n    if (state && this.element() && this.element().isSifrr && this.element().state !== state) {\n      this.element().state = state;\n    }\n    this.$('#saver').textContent = 'saving in storage...';\n    if (this._autoSaver) clearTimeout(this._autoSaver);\n    this._autoSaver = setTimeout(() => {\n      delete this._autoSaver;\n      this.saveShowcase().then(() => {\n        this.$('#saver').textContent = 'saved in storage!';\n      });\n    }, 1000);\n  }\n\n  onAttributeChange(name, _, value) {\n    if (name === 'url') this.url = value;\n  }\n\n  createNewVariant() {\n    const i = showcases.length;\n    showcases[i] = Object.assign({}, defaultShowcase, { id: Math.max(...showcases.map(s => s.id)) + 1, name: this.$('#variantName').value });\n    this.switchShowcase(i);\n  }\n\n  deleteShowcase(id) {\n    showcases.forEach((s, i) => {\n      if (s.id == id) showcases.splice(i, 1);\n    });\n    this.update();\n  }\n\n  saveShowcase() {\n    const i = this.state.id;\n    showcases.forEach(s => {\n      if (s.id == i) {\n        Object.assign(s, this.state);\n      }\n    });\n    return storage.set('showcases', showcases);\n  }\n\n  switchShowcase(id) {\n    this.state = Object.assign({}, showcases.filter(s => s.id == id)[0] || showcases[0]);\n    storage.set('current', id);\n  }\n\n  set url(v) {\n    this._url = v;\n    if (this.getAttribute('url') !== v) this.setAttribute('url', v);\n    if (this.$('#url').value !== v) this.$('#url').value = v;\n    this.loadUrl();\n  }\n\n  get url() {\n    return this._url;\n  }\n\n  loadUrl() {\n    this._url = this.$('#url').value;\n    window.fetch(this._url).then((resp) => resp.json()).then(json => {\n      showcases.splice(0, showcases.length);\n      showcases.push(...json.showcases);\n      this.switchShowcase(json.current);\n      this.$('#loader').textContent = 'loaded from url!';\n    }).catch((e) => {\n      this.$('#urlStatus').textContent = e.message;\n    });\n  }\n\n  saveFile() {\n    const blob = new Blob([JSON.stringify({\n      current: this.state.id,\n      showcases: showcases\n    })], {\n      type: 'application/json'\n    });\n    const a = document.createElement('a');\n    a.href = URL.createObjectURL(blob);\n    a.download = 'showcases';\n    a.click();\n  }\n\n  loadFile(e, el) {\n    const file = el.files[0];\n    const fr = new FileReader();\n    fr.onload = () => {\n      const json = JSON.parse(fr.result);\n      showcases.splice(0, showcases.length);\n      showcases.push(...json.showcases);\n      this.switchShowcase(json.current);\n      this.$('#loader').textContent = 'loaded from file!';\n    };\n    fr.readAsText(file);\n  }\n\n  updateHtml(e, el) {\n    const html = `<${el.value}></${el.value}>`;\n    this.state = { code: html, element: el.value };\n  }\n\n  element() {\n    return this.$('#element').firstElementChild;\n  }\n\n  allShowcases() {\n    return showcases;\n  }\n}\n\nSifrrShowcase.defaultState = defaultShowcase;\n\nif (window) SifrrDom.register(SifrrShowcase);\n\nexport default SifrrShowcase;\n"],"names":["update","template","SifrrDom","style","html","Event","add","defaultShowcase","id","name","element","code","elState","isjs","elementUrl","storage","SifrrStorage","version","showcases","SifrrShowcase","Element","observedAttrs","onConnect","get","then","res","Array","isArray","length","push","switchShowcase","current","$","textContent","addListener","e","el","matches","dataset","showcaseId","parentNode","deleteShowcase","onUpdate","_element","state","_js","load","js","url","undefined","innerText","catch","message","Function","value","call","isSifrr","_autoSaver","clearTimeout","setTimeout","saveShowcase","onAttributeChange","_","createNewVariant","i","Object","assign","Math","max","map","s","forEach","splice","set","filter","v","_url","getAttribute","setAttribute","loadUrl","window","fetch","resp","json","saveFile","blob","Blob","JSON","stringify","type","a","document","createElement","href","URL","createObjectURL","download","click","loadFile","file","files","fr","FileReader","onload","parse","result","readAsText","updateHtml","firstElementChild","allShowcases","defaultState","register"],"mappings":"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"}