/*! SifrrTabs v0.0.4 - sifrr project | MIT licensed | https://github.com/sifrr/sifrr-elements */
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i(require("@sifrr/dom")):"function"==typeof define&&define.amd?define(["@sifrr/dom"],i):(t=t||self).SifrrTabs=i(t.Sifrr.Dom)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var i,s=(function(t,i){t.exports=function(){const t={};var i=class{constructor(i){const s=i.join("_");return t[s]||(this.setProps(...i),t[s]=this.final.bind(this)),t[s]}setProps(t,i,s,e){let n={x1:t,y1:i,x2:s,y2:e,A:(t,i)=>1-3*i+3*t,B:(t,i)=>3*i-6*t,C:t=>3*t,CalcBezier:(t,i,s)=>((this.A(i,s)*t+this.B(i,s))*t+this.C(i))*t,GetSlope:(t,i,s)=>3*this.A(i,s)*t*t+2*this.B(i,s)*t+this.C(i)};Object.assign(this,n)}final(t){return this.x1==this.y1&&this.x2==this.y2?t:this.CalcBezier(this.GetTForX(t),this.y1,this.y2)}GetTForX(t){let i=t;for(let s=0;s<4;++s){let s=this.GetSlope(i,this.x1,this.x2);if(0==s)return i;let e=this.CalcBezier(i,this.x1,this.x2)-t;i-=e/s}return i}},s={linear:[0,0,1,1],ease:[.25,.1,.25,1],easeIn:[.42,0,1,1],easeOut:[0,0,.58,1],easeInOut:[.42,0,.58,1]};const e=/(\d+)/;var n=function({target:t,prop:n,from:o,to:a,time:r=300,type:h="ease",onUpdate:l,round:p=!1}){const d=a.toString().split(e),c=d.length,u=[],f=[],g=[],m=(o||t[n]||"").toString().split(e),b="function"==typeof l;for(let t=0;t<c;t++){const i=Number(d[t]);isNaN(i)||!d[t]?u.push(d[t]):(f.push(Number(m[t])||0),g.push(i-(Number(m[t])||0)))}return h="function"==typeof h?h:new i(s[h]||h),new Promise(i=>{let s;window.requestAnimationFrame(function e(o){const a=(o-(s=s||o))/r,d=h(a>=1?1:a),c=g.map((t,i)=>p?Math.round(d*t+f[i]):d*t+(f[i]||0)),m=String.raw({raw:u},...c);if(t[n]=Number(m)||m,b&&l(t,n,t[n]),a>=1)return i();window.requestAnimationFrame(e)})})};function o({targets:t,target:i,to:s,time:e,type:o,onUpdate:a,round:r}){return t=t?Array.from(t):[i],Promise.all(t.map(t=>(function t(i,s){const h=[];for(let l in s){let p,d;Array.isArray(s[l])?[p,d]=s[l]:d=s[l],"object"!=typeof s[l]||Array.isArray(s[l])?h.push(n({target:i,prop:l,to:d,time:e,type:o,from:p,onUpdate:a,round:r})):h.push(t(i[l],s[l]))}return Promise.all(h)})(t,s)))}return o.types=s,o.wait=((t=0)=>new Promise(i=>setTimeout(i,t))),o.animate=o,o}()}(i={exports:{}},i.exports),i.exports);function e(){const t=(i=['<style media="screen">\n  ','\n</style>\n<style>\n  .tabs {\n    height: ${this.options ? this.options.tabHeight : \'auto\'};\n    width: ${this.totalWidth + \'px\'};\n  }\n  .headings {\n    display: ${this.headingDisplay};\n    background: ${this.options ? this.options.background : \'transparent\'};\n  }\n  .content *::slotted([slot="tab"]) {\n    width: ${this.tabWidth + \'px\'};\n    margin: 0 ${this.options ? this.options.arrowMargin + \'px\' : 0};\n  }\n  .arrow {\n    width: ${this.options ? this.options.arrowWidth : \'20px\'};\n  }\n</style>\n<div class="headings">\n  <ul>\n    <slot name="heading">\n    </slot>\n  </ul>\n  <div class="underline"></div>\n</div>\n<div class="content">\n  <div class="arrow l" _click=${this.prev}>\n    <span></span>\n  </div>\n  <div class="arrow r" _click=${this.next}>\n    <span></span>\n  </div>\n  <div class="tabs">\n    <slot name="tab">\n    </slot>\n  </div>\n</div>'],(s=['<style media="screen">\n  ','\n</style>\n<style>\n  .tabs {\n    height: \\${this.options ? this.options.tabHeight : \'auto\'};\n    width: \\${this.totalWidth + \'px\'};\n  }\n  .headings {\n    display: \\${this.headingDisplay};\n    background: \\${this.options ? this.options.background : \'transparent\'};\n  }\n  .content *::slotted([slot="tab"]) {\n    width: \\${this.tabWidth + \'px\'};\n    margin: 0 \\${this.options ? this.options.arrowMargin + \'px\' : 0};\n  }\n  .arrow {\n    width: \\${this.options ? this.options.arrowWidth : \'20px\'};\n  }\n</style>\n<div class="headings">\n  <ul>\n    <slot name="heading">\n    </slot>\n  </ul>\n  <div class="underline"></div>\n</div>\n<div class="content">\n  <div class="arrow l" _click=\\${this.prev}>\n    <span></span>\n  </div>\n  <div class="arrow r" _click=\\${this.next}>\n    <span></span>\n  </div>\n  <div class="tabs">\n    <slot name="tab">\n    </slot>\n  </div>\n</div>'])||(s=i.slice(0)),Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(s)}})));var i,s;return e=function(){return t},t}const n=t.template(e(),":host{line-height:24px;overflow:hidden;display:block}.headings,:host{width:100%;position:relative}.headings{overflow-y:hidden;overflow-x:auto;box-shadow:0 2px 3px rgba(0,0,0,.2)}.headings ul{padding:0 0 3px;margin:0;font-size:0}.headings ::slotted(*){font-size:16px;display:inline-block;text-align:center;padding:8px;text-decoration:none;list-style:none;color:#fff;border-bottom:2px solid transparent;opacity:.9;cursor:pointer;box-sizing:border-box}.headings ::slotted(.active),.headings ::slotted(:hover){opacity:1}.headings .underline{position:absolute;bottom:0;left:0;height:3px;background:#fff}.arrow{z-index:5;top:0;bottom:0}.arrow,.arrow>*{position:absolute}.arrow>*{width:8px;height:8px;margin:-6px 5px;top:50%;border:solid #fff;border-width:0 3px 3px 0;display:inline-block;padding:3px;filter:drop-shadow(-1px -1px 3px #000)}.arrow.l{left:0;cursor:w-resize}.arrow.l>*{left:0;transform:rotate(135deg)}.arrow.r{right:0;cursor:e-resize}.arrow.r>*{right:0;transform:rotate(-45deg)}.content{width:100%;height:100%;overflow-x:auto;overflow-y:hidden;margin:0;line-height:normal;box-sizing:border-box}.content .tabs{min-height:1px}.content ::slotted([slot=tab]){float:left;max-height:100%;height:100%;overflow-x:hidden;overflow-y:auto;vertical-align:top;padding:8px;box-sizing:border-box}");function o(t,i,s){t instanceof HTMLElement&&(t=t.children);for(let e=0;e<t.length;e++)e!==s&&t[e]!==s?t[e].classList.remove(i):t[e].classList.add(i)}class a extends t.Element{static get template(){return n}static observedAttrs(){return["options"]}onConnect(){this._connected=!0,this.refresh(),this.setWindowResizeEvent(),this.setSlotChangeEvent(),this.setScrollEvent()}onAttributeChange(t,i,s){"options"===t&&(this._attrOptions=JSON.parse(s||"{}"),this._connected&&this.refresh())}refresh(){this.options=Object.assign({menu:this.$(".headings ul"),content:this.$(".content"),tabcontainer:this.$(".tabs"),menus:this.$("slot[name=heading]").assignedNodes(),tabs:this.$("slot[name=tab]").assignedNodes(),la:this.$(".arrow.l"),ra:this.$(".arrow.r"),line:this.$(".underline"),num:1,showArrows:!1,arrowMargin:0,arrowWidth:"20px",showMenu:!0,step:1,tabHeight:"auto",showUnderline:!0,loop:!1,animation:"ease",animationTime:300,scrollBreakpoint:.2,background:"#714cfe"},this._attrOptions),!this.options.tabs||this.options.tabs.length<1||(this.usableWidth=this.clientWidth,this.totalWidth=this.usableWidth/this.options.num*this.options.tabs.length,this.usableWidth-=2*this.options.arrowMargin,this.tabWidth=this.usableWidth/this.options.num,this.setProps(),this.update(),this.active=this.active||0)}setProps(){this.options.showArrows?(this.options.la.style.display="block",this.options.ra.style.display="block",Array.from(this.options.tabs).forEach(t=>t.style.margin="0 ".concat(this.margin,"px"))):(this.options.la.style.display="none",this.options.ra.style.display="none"),this.options.showUnderline||(this.options.line.style.display="none"),this.options.showMenu?(this.headingDisplay="block",this.options.line.style.width=this.options.menus[0].offsetWidth+"px",this.setMenuProps()):this.headingDisplay="none"}setMenuProps(){let t=0;this.options.menuProps=[],Array.from(this.options.menus).forEach((i,s)=>{this.options.menuProps[s]={width:i.offsetWidth,left:t},t+=i.offsetWidth,i._click=(()=>this.active=s)});const i=this.options.menuProps[this.options.menus.length-1];this.options.menu.style.width=i.left+i.width+5*this.options.menus.length+"px";const s=this.options.menuProps[this.active];this.options.line.style.left=s.left+"px",this.options.line.style.width=s.width+"px"}setScrollEvent(){let t,i,s=this;function e(){i=s.active;const e=s.options.content.scrollLeft/s.tabWidth,n=e%1,o=Math.floor(e);if(s.options.showMenu){const t=s.options.menuProps[o].left*(1-n)+(s.options.menuProps[o+1]||{left:0}).left*n,i=s.options.menuProps[o].width*(1-n)+(s.options.menuProps[o+1]||{width:0}).width*n;s.options.line.style.left=t+"px",s.options.line.style.width=i+"px",s.options.menu.parentElement.scrollLeft=t+(i-s.tabWidth)/2}clearTimeout(t),t=setTimeout(function(){e-i<-s.options.scrollBreakpoint?s.active=o:e-i>+s.options.scrollBreakpoint?s.active=o+1:s.active=i},66)}this.options.content.onscroll=(()=>requestAnimationFrame(e))}setWindowResizeEvent(){window.addEventListener("resize",()=>requestAnimationFrame(this.refresh.bind(this)))}setSlotChangeEvent(){const t=this,i=()=>{t.options.menus=t.$$("slot")[0].assignedNodes(),t.options.tabs=t.$$("slot")[1].assignedNodes(),t.refresh()};this.$$("slot")[0].addEventListener("slotchange",i),this.$$("slot")[1].addEventListener("slotchange",i)}get active(){return this.state?this.state.active:0}set active(t){this.state={active:t}}beforeUpdate(){if(!this.options)return;let t=this.state.active;if(t=this.getTabNumber(t),!isNaN(t)&&t!==this.state.active)return this.active=t;s({target:this.options.content,to:{scrollLeft:t*(this.tabWidth+2*this.options.arrowMargin)},time:this.options.animationTime,type:"none"===this.options.animation?()=>1:this.options.animation}),o(this.options.tabs,"active",t),o(this.options.tabs,"prev",this.getTabNumber(t-1)),o(this.options.tabs,"next",this.getTabNumber(t+1)),o(this.options.menus,"active",t),o(this.options.menus,"prev",this.getTabNumber(t-1)),o(this.options.menus,"next",this.getTabNumber(t+1)),this.options.showArrows&&(this.options.la.style.display=this.hasPrev()||this.options.loop?"block":"none",this.options.ra.style.display=this.hasNext()||this.options.loop?"block":"none")}next(){this.active=this.state.active+this.options.step}hasNext(){return this.active!==this.options.tabs.length-this.options.num}prev(){this.active=this.state.active-this.options.step}hasPrev(){return 0!==this.active}getTabNumber(t){const i=this.options.tabs.length,s=this.options.num;return(t=t<0?t+i:t%i)+s-1>=i&&(t=this.options.loop?0:i-s),t}}return a.defaultState={active:0},t.register(a),a});
/*! (c) @aadityataparia */
