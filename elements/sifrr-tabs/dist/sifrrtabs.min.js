/*! SifrrTabs v0.0.5 - sifrr project | MIT licensed | https://github.com/sifrr/sifrr-elements */
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i(require("@sifrr/dom")):"function"==typeof define&&define.amd?define(["@sifrr/dom"],i):(t=t||self).SifrrTabs=i(t.Sifrr.Dom)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var i=function(t,i){return t(i={exports:{}},i.exports),i.exports}(function(t,i){t.exports=function(){const t={};var i=class{constructor(i){const s=i.join("_");return t[s]||(this.setProps(...i),t[s]=this.final.bind(this)),t[s]}setProps(t,i,s,e){let n={x1:t,y1:i,x2:s,y2:e,A:(t,i)=>1-3*i+3*t,B:(t,i)=>3*i-6*t,C:t=>3*t,CalcBezier:(t,i,s)=>((this.A(i,s)*t+this.B(i,s))*t+this.C(i))*t,GetSlope:(t,i,s)=>3*this.A(i,s)*t*t+2*this.B(i,s)*t+this.C(i)};Object.assign(this,n)}final(t){return this.x1==this.y1&&this.x2==this.y2?t:this.CalcBezier(this.GetTForX(t),this.y1,this.y2)}GetTForX(t){let i=t;for(let s=0;s<4;++s){let s=this.GetSlope(i,this.x1,this.x2);if(0==s)return i;let e=this.CalcBezier(i,this.x1,this.x2)-t;i-=e/s}return i}},s={linear:[0,0,1,1],ease:[.25,.1,.25,1],easeIn:[.42,0,1,1],easeOut:[0,0,.58,1],easeInOut:[.42,0,.58,1]},e=t=>new Promise(i=>setTimeout(i,t));const n=/(\d+\.?\d*)/,o=new Set;window.requestAnimationFrame(function t(i){o.forEach(t=>t(i)),window.requestAnimationFrame(t)});var r=function({target:t,prop:r,from:a,to:h,time:l=300,type:p="ease",onUpdate:d,round:c=!1,delay:u=0}){const f=h.toString().split(n),g=f.length,b=[],m=[],w=[],y=(a||t[r]||"").toString().split(n),v="function"==typeof d;for(let t=0;t<g;t++){const i=Number(f[t]);isNaN(i)||!f[t]?b.push(f[t]):(m.push(Number(y[t])||0),w.push(i-(Number(y[t])||0)))}const x={raw:b};return e(u).then(()=>new Promise((e,n)=>{if(s[p])p=new i(s[p]);else if(Array.isArray(p))p=new i(p);else if("function"!=typeof p)return n(Error("type should be one of "+Object.keys(s).toString()+" or Bezier Array or Function, given "+p));let a=performance.now();const h=function(i){const s=(i-a)/l,u=p(s>=1?1:s),f=w.map((t,i)=>{const s=u*t+m[i];return c?Math.round(s):s}),g=String.raw(x,...f);try{t[r]=Number(g)||g,v&&d(t,r,t[r]),s>=1&&e(o.delete(h))}catch(t){o.delete(h),n(t)}};o.add(h)}))};function a({targets:t,target:i,to:s,time:e,type:n,onUpdate:o,round:a,delay:h}){t=t?Array.from(t):[i];let l=s,p=h,d=e;return Promise.all(t.map((t,i)=>("function"==typeof s&&(l=s(i)),"function"==typeof h&&(p=h(i)),"function"==typeof e&&(d=e(i)),function t(i,s,e,h){const l=[];for(let p in s){let d,c;Array.isArray(s[p])?[d,c]=s[p]:c=s[p],"object"!=typeof s[p]||Array.isArray(s[p])?l.push(r({target:i,prop:p,to:c,time:h,type:n,from:d,onUpdate:o,round:a,delay:e})):l.push(t(i[p],s[p],e,h))}return Promise.all(l)}(t,l,p,d))))}return a.types=s,a.wait=e,a.animate=a,a}()});function s(){const t=(i=['<style media="screen">\n  ','\n</style>\n<style>\n  .tabs {\n    height: ${this.options ? this.options.tabHeight : \'auto\'};\n    width: ${this.totalWidth + \'px\'};\n  }\n  .headings {\n    display: ${this.headingDisplay};\n    background: ${this.options ? this.options.background : \'transparent\'};\n  }\n  .content *::slotted([slot="tab"]) {\n    width: ${this.tabWidth + \'px\'};\n    margin: 0 ${this.options ? this.options.arrowMargin + \'px\' : 0};\n  }\n  .arrow {\n    width: ${this.options ? this.options.arrowWidth : \'20px\'};\n  }\n</style>\n<div class="headings">\n  <ul>\n    <slot name="heading">\n    </slot>\n  </ul>\n  <div class="underline"></div>\n</div>\n<div class="content">\n  <div class="arrow l" _click=${this.prev}>\n    <span></span>\n  </div>\n  <div class="arrow r" _click=${this.next}>\n    <span></span>\n  </div>\n  <div class="tabs">\n    <slot name="tab">\n    </slot>\n  </div>\n</div>'],(e=['<style media="screen">\n  ','\n</style>\n<style>\n  .tabs {\n    height: \\${this.options ? this.options.tabHeight : \'auto\'};\n    width: \\${this.totalWidth + \'px\'};\n  }\n  .headings {\n    display: \\${this.headingDisplay};\n    background: \\${this.options ? this.options.background : \'transparent\'};\n  }\n  .content *::slotted([slot="tab"]) {\n    width: \\${this.tabWidth + \'px\'};\n    margin: 0 \\${this.options ? this.options.arrowMargin + \'px\' : 0};\n  }\n  .arrow {\n    width: \\${this.options ? this.options.arrowWidth : \'20px\'};\n  }\n</style>\n<div class="headings">\n  <ul>\n    <slot name="heading">\n    </slot>\n  </ul>\n  <div class="underline"></div>\n</div>\n<div class="content">\n  <div class="arrow l" _click=\\${this.prev}>\n    <span></span>\n  </div>\n  <div class="arrow r" _click=\\${this.next}>\n    <span></span>\n  </div>\n  <div class="tabs">\n    <slot name="tab">\n    </slot>\n  </div>\n</div>'])||(e=i.slice(0)),Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(e)}})));var i,e;return s=function(){return t},t}const e=t.template(s(),":host{line-height:24px;overflow:hidden;display:block}.headings,:host{width:100%;position:relative}.headings{overflow-y:hidden;overflow-x:auto;box-shadow:0 2px 3px rgba(0,0,0,.2)}.headings ul{padding:0 0 3px;margin:0;font-size:0}.headings ::slotted(*){font-size:16px;display:inline-block;text-align:center;padding:8px;text-decoration:none;list-style:none;color:#fff;border-bottom:2px solid transparent;opacity:.9;cursor:pointer;box-sizing:border-box}.headings ::slotted(.active),.headings ::slotted(:hover){opacity:1}.headings .underline{position:absolute;bottom:0;left:0;height:3px;background:#fff}.arrow{z-index:5;top:0;bottom:0}.arrow,.arrow>*{position:absolute}.arrow>*{width:8px;height:8px;margin:-6px 5px;top:50%;border:solid #fff;border-width:0 3px 3px 0;display:inline-block;padding:3px;filter:drop-shadow(-1px -1px 3px #000)}.arrow.l{left:0;cursor:w-resize}.arrow.l>*{left:0;transform:rotate(135deg)}.arrow.r{right:0;cursor:e-resize}.arrow.r>*{right:0;transform:rotate(-45deg)}.content{width:100%;height:100%;overflow-x:auto;overflow-y:hidden;margin:0;line-height:normal;box-sizing:border-box}.content .tabs{min-height:1px}.content ::slotted([slot=tab]){float:left;max-height:100%;height:100%;overflow-x:hidden;overflow-y:auto;vertical-align:top;padding:8px;box-sizing:border-box}");function n(t,i,s){t instanceof HTMLElement&&(t=t.children);for(let e=0;e<t.length;e++)e!==s&&t[e]!==s?t[e].classList.remove(i):t[e].classList.add(i)}class o extends t.Element{static get template(){return e}static observedAttrs(){return["options"]}onConnect(){this._connected=!0,this.refresh(),this.setWindowResizeEvent(),this.setSlotChangeEvent(),this.setScrollEvent()}onAttributeChange(t,i,s){"options"===t&&(this._attrOptions=JSON.parse(s||"{}"),this._connected&&this.refresh())}refresh(){this.options=Object.assign({menu:this.$(".headings ul"),content:this.$(".content"),tabcontainer:this.$(".tabs"),menus:this.$("slot[name=heading]").assignedNodes(),tabs:this.$("slot[name=tab]").assignedNodes(),la:this.$(".arrow.l"),ra:this.$(".arrow.r"),line:this.$(".underline"),num:1,showArrows:!1,arrowMargin:0,arrowWidth:"20px",showMenu:!0,step:1,tabHeight:"auto",showUnderline:!0,loop:!1,animation:"ease",animationTime:300,scrollBreakpoint:.2,background:"#714cfe"},this._attrOptions),!this.options.tabs||this.options.tabs.length<1||(this.usableWidth=this.clientWidth,this.totalWidth=this.usableWidth/this.options.num*this.options.tabs.length,this.usableWidth-=2*this.options.arrowMargin,this.tabWidth=this.usableWidth/this.options.num,this.setProps(),this.update(),this.active=this.active||0)}setProps(){this.options.showArrows?(this.options.la.style.display="block",this.options.ra.style.display="block",Array.from(this.options.tabs).forEach(t=>t.style.margin="0 ".concat(this.margin,"px"))):(this.options.la.style.display="none",this.options.ra.style.display="none"),this.options.showUnderline||(this.options.line.style.display="none"),this.options.showMenu?(this.headingDisplay="block",this.options.line.style.width=this.options.menus[0].offsetWidth+"px",this.setMenuProps()):this.headingDisplay="none"}setMenuProps(){let t=0;this.options.menuProps=[],Array.from(this.options.menus).forEach((i,s)=>{this.options.menuProps[s]={width:i.offsetWidth,left:t},t+=i.offsetWidth,i._click=()=>this.active=s});const i=this.options.menuProps[this.options.menus.length-1];this.options.menu.style.width=i.left+i.width+5*this.options.menus.length+"px";const s=this.options.menuProps[this.active];this.options.line.style.left=s.left+"px",this.options.line.style.width=s.width+"px"}setScrollEvent(){let t,i,s=this;function e(){i=s.active;const e=s.options.content.scrollLeft/s.tabWidth,n=e%1,o=Math.floor(e);if(s.options.showMenu){const t=s.options.menuProps[o].left*(1-n)+(s.options.menuProps[o+1]||{left:0}).left*n,i=s.options.menuProps[o].width*(1-n)+(s.options.menuProps[o+1]||{width:0}).width*n;s.options.line.style.left=t+"px",s.options.line.style.width=i+"px",s.options.menu.parentElement.scrollLeft=t+(i-s.tabWidth)/2}clearTimeout(t),t=setTimeout(function(){e-i<-s.options.scrollBreakpoint?s.active=o:e-i>+s.options.scrollBreakpoint?s.active=o+1:s.active=i},66)}this.options.content.onscroll=()=>requestAnimationFrame(e)}setWindowResizeEvent(){window.addEventListener("resize",()=>requestAnimationFrame(this.refresh.bind(this)))}setSlotChangeEvent(){const t=this,i=()=>{t.options.menus=t.$$("slot")[0].assignedNodes(),t.options.tabs=t.$$("slot")[1].assignedNodes(),t.refresh()};this.$$("slot")[0].addEventListener("slotchange",i),this.$$("slot")[1].addEventListener("slotchange",i)}get active(){return this.state?this.state.active:0}set active(t){this.state={active:t}}beforeUpdate(){if(!this.options)return;let t=this.state.active;if(t=this.getTabNumber(t),!isNaN(t)&&t!==this.state.active)return this.active=t;i({target:this.options.content,to:{scrollLeft:t*(this.tabWidth+2*this.options.arrowMargin)},time:this.options.animationTime,type:"none"===this.options.animation?()=>1:this.options.animation}),n(this.options.tabs,"active",t),n(this.options.tabs,"prev",this.getTabNumber(t-1)),n(this.options.tabs,"next",this.getTabNumber(t+1)),n(this.options.menus,"active",t),n(this.options.menus,"prev",this.getTabNumber(t-1)),n(this.options.menus,"next",this.getTabNumber(t+1)),this.options.showArrows&&(this.options.la.style.display=this.hasPrev()||this.options.loop?"block":"none",this.options.ra.style.display=this.hasNext()||this.options.loop?"block":"none")}next(){this.active=this.state.active+this.options.step}hasNext(){return this.active!==this.options.tabs.length-this.options.num}prev(){this.active=this.state.active-this.options.step}hasPrev(){return 0!==this.active}getTabNumber(t){const i=this.options.tabs.length,s=this.options.num;return(t=t<0?t+i:t%i)+s-1>=i&&(t=this.options.loop?0:i-s),t}}return o.defaultState={active:0},t.register(o),o});
/*! (c) @aadityataparia */
