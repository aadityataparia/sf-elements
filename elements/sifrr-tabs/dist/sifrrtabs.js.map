{"version":3,"file":"sifrrtabs.js","sources":["../../../node_modules/@sifrr/animate/dist/sifrr.animate.js","../src/sifrrtabs.js"],"sourcesContent":["/*! Sifrr.animate v0.0.1 - sifrr project | MIT licensed | https://github.com/sifrr/sifrr-elements */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, (global.Sifrr = global.Sifrr || {}, global.Sifrr.animate = factory()));\n}(this, function () { 'use strict';\n\n  const beziers = {};\n  class Bezier {\n    constructor(args) {\n      const key = args.join('_');\n      if (!beziers[key]) {\n        this.setProps(...args);\n        beziers[key] = this.final.bind(this);\n      }\n      return beziers[key];\n    }\n    setProps(x1, y1, x2, y2) {\n      let props = {\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        A: (aA1, aA2) => 1.0 - 3.0 * aA2 + 3.0 * aA1,\n        B: (aA1, aA2) => 3.0 * aA2 - 6.0 * aA1,\n        C: aA1 => 3.0 * aA1,\n        CalcBezier: (aT, aA1, aA2) => ((this.A(aA1, aA2) * aT + this.B(aA1, aA2)) * aT + this.C(aA1)) * aT,\n        GetSlope: (aT, aA1, aA2) => 3.0 * this.A(aA1, aA2) * aT * aT + 2.0 * this.B(aA1, aA2) * aT + this.C(aA1)\n      };\n      Object.assign(this, props);\n    }\n    final(x) {\n      if (this.x1 == this.y1 && this.x2 == this.y2) return x;\n      return this.CalcBezier(this.GetTForX(x), this.y1, this.y2);\n    }\n    GetTForX(xx) {\n      let t = xx;\n      for (let i = 0; i < 4; ++i) {\n        let slope = this.GetSlope(t, this.x1, this.x2);\n        if (slope == 0) return t;\n        let x = this.CalcBezier(t, this.x1, this.x2) - xx;\n        t -= x / slope;\n      }\n      return t;\n    }\n  }\n  var bezier = Bezier;\n\n  var types = {\n    linear: [0, 0, 1, 1],\n    ease: [.25, .1, .25, 1],\n    easeIn: [.42, 0, 1, 1],\n    easeOut: [0, 0, .58, 1],\n    easeInOut: [.42, 0, .58, 1]\n  };\n\n  const digitRgx = /(\\d+)/;\n  function animateOne({\n    target,\n    prop,\n    from,\n    to,\n    time = 300,\n    type = 'ease',\n    onUpdate,\n    round = false\n  }) {\n    const toSplit = to.toString().split(digitRgx),\n          l = toSplit.length,\n          raw = [],\n          fromNums = [],\n          diffs = [];\n    const fromSplit = (from || target[prop] || '').toString().split(digitRgx);\n    const onUp = typeof onUpdate === 'function';\n    for (let i = 0; i < l; i++) {\n      const n = Number(toSplit[i]);\n      if (isNaN(n) || !toSplit[i]) raw.push(toSplit[i]);else {\n        fromNums.push(Number(fromSplit[i]) || 0);\n        diffs.push(n - (Number(fromSplit[i]) || 0));\n      }\n    }\n    type = typeof type === 'function' ? type : new bezier(types[type] || type);\n    return new Promise(res => {\n      let startTime;\n      function frame(currentTime) {\n        startTime = startTime || currentTime;\n        const percent = (currentTime - startTime) / time,\n              bper = type(percent >= 1 ? 1 : percent);\n        const next = diffs.map((d, i) => {\n          if (round) return Math.round(bper * d + fromNums[i]);\n          return bper * d + (fromNums[i] || 0);\n        });\n        const val = String.raw({\n          raw\n        }, ...next);\n        target[prop] = Number(val) || val;\n        if (onUp) onUpdate(target, prop, target[prop]);\n        if (percent >= 1) return res();\n        window.requestAnimationFrame(frame);\n      }\n      window.requestAnimationFrame(frame);\n    });\n  }\n  var animateone = animateOne;\n\n  function animate({\n    targets,\n    target,\n    to,\n    time,\n    type,\n    onUpdate,\n    round\n  }) {\n    targets = targets ? Array.from(targets) : [target];\n    function iterate(target, props) {\n      const promises = [];\n      for (let prop in props) {\n        let from, final;\n        if (Array.isArray(props[prop])) [from, final] = props[prop];else final = props[prop];\n        if (typeof props[prop] === 'object' && !Array.isArray(props[prop])) {\n          promises.push(iterate(target[prop], props[prop]));\n        } else {\n          promises.push(animateone({\n            target,\n            prop,\n            to: final,\n            time,\n            type,\n            from,\n            onUpdate,\n            round\n          }));\n        }\n      }\n      return Promise.all(promises);\n    }\n    return Promise.all(targets.map(target => iterate(target, to)));\n  }\n  animate.types = types;\n  animate.wait = (t = 0) => new Promise(res => setTimeout(res, t));\n  animate.animate = animate;\n  var animate_1 = animate;\n\n  return animate_1;\n\n}));\n/*! (c) @aadityataparia */\n//# sourceMappingURL=sifrr.animate.js.map\n","import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\nimport animate from '@sifrr/animate';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n<style>\n  .tabs {\n    height: \\${this.options ? this.options.tabHeight : 'auto'};\n    width: \\${this.totalWidth + 'px'};\n  }\n  .headings {\n    display: \\${this.headingDisplay};\n    background: \\${this.options ? this.options.background : 'transparent'};\n  }\n  .content *::slotted([slot=\"tab\"]) {\n    width: \\${this.tabWidth + 'px'};\n    margin: 0 \\${this.options ? this.options.arrowMargin + 'px' : 0};\n  }\n  .arrow {\n    width: \\${this.options ? this.options.arrowWidth : '20px'};\n  }\n</style>\n<div class=\"headings\">\n  <ul>\n    <slot name=\"heading\">\n    </slot>\n  </ul>\n  <div class=\"underline\"></div>\n</div>\n<div class=\"content\">\n  <div class=\"arrow l\" _click=\\${this.prev}>\n    <span></span>\n  </div>\n  <div class=\"arrow r\" _click=\\${this.next}>\n    <span></span>\n  </div>\n  <div class=\"tabs\">\n    <slot name=\"tab\">\n    </slot>\n  </div>\n</div>`;\n\nfunction removeExceptOne(elements, name, index) {\n  if (elements instanceof HTMLElement) elements = elements.children;\n  for (let j = 0; j < elements.length; j++) {\n    j !== index && elements[j] !== index ? elements[j].classList.remove(name) : elements[j].classList.add(name);\n  }\n}\n\n//Simple tabs\nclass SifrrTabs extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['options'];\n  }\n\n  onConnect() {\n    this._connected = true;\n    this.refresh();\n    this.setWindowResizeEvent();\n    this.setSlotChangeEvent();\n    this.setScrollEvent();\n  }\n\n  onAttributeChange(n, _, v) {\n    if (n === 'options') {\n      this._attrOptions = JSON.parse(v || '{}');\n      if (this._connected) this.refresh();\n    }\n  }\n\n  refresh() {\n    this.options = Object.assign({\n      menu: this.$('.headings ul'),\n      content: this.$('.content'),\n      tabcontainer: this.$('.tabs'),\n      menus: this.$('slot[name=heading]').assignedNodes(),\n      tabs: this.$('slot[name=tab]').assignedNodes(),\n      la: this.$('.arrow.l'),\n      ra: this.$('.arrow.r'),\n      line: this.$('.underline'),\n      num: 1,\n      showArrows: false,\n      arrowMargin: 0,\n      arrowWidth: '20px',\n      showMenu: true,\n      step: 1,\n      tabHeight: 'auto',\n      showUnderline: true,\n      loop: false,\n      animation: 'ease',\n      animationTime: 300,\n      scrollBreakpoint: 0.2,\n      background: '#714cfe'\n    }, this._attrOptions);\n    if (!this.options.tabs || this.options.tabs.length < 1) return;\n    this.usableWidth = this.clientWidth;\n    this.totalWidth = this.usableWidth / this.options.num * this.options.tabs.length;\n    this.usableWidth -= 2 * this.options.arrowMargin;\n    this.tabWidth = this.usableWidth / this.options.num;\n    this.setProps();\n    this.update();\n    this.active = this.active || 0;\n  }\n\n  setProps() {\n    if (!this.options.showArrows) {\n      this.options.la.style.display = 'none';\n      this.options.ra.style.display = 'none';\n    } else {\n      this.options.la.style.display = 'block';\n      this.options.ra.style.display = 'block';\n      Array.from(this.options.tabs).forEach(e => e.style.margin = `0 ${this.margin}px`);\n    }\n    if (!this.options.showUnderline) this.options.line.style.display = 'none';\n    if (this.options.showMenu) {\n      this.headingDisplay = 'block';\n      this.options.line.style.width = this.options.menus[0].offsetWidth + 'px';\n      this.setMenuProps();\n    } else this.headingDisplay = 'none';\n  }\n\n  setMenuProps() {\n    let left = 0;\n    this.options.menuProps = [];\n    Array.from(this.options.menus).forEach((elem, i) => {\n      this.options.menuProps[i] = {\n        width: elem.offsetWidth,\n        left: left\n      };\n      left += elem.offsetWidth;\n      elem._click = () => this.active = i;\n    });\n    const last = this.options.menuProps[this.options.menus.length - 1];\n    this.options.menu.style.width = last.left + last.width + 5 * this.options.menus.length + 'px';\n    const active = this.options.menuProps[this.active];\n    this.options.line.style.left = active.left + 'px';\n    this.options.line.style.width = active.width + 'px';\n  }\n\n  setScrollEvent() {\n    let me = this,\n      isScrolling,\n      scrollPos;\n    this.options.content.onscroll = () => requestAnimationFrame(onScroll);\n\n    function onScroll() {\n      scrollPos = me.active;\n      const total = me.options.content.scrollLeft / me.tabWidth;\n      const per = total % 1;\n      const t = Math.floor(total);\n      if (me.options.showMenu) {\n        const left = me.options.menuProps[t].left * (1 - per) + (me.options.menuProps[t + 1] || {\n          left: 0\n        }).left * per;\n        const width = me.options.menuProps[t].width * (1 - per) + (me.options.menuProps[t + 1] || {\n          width: 0\n        }).width * per;\n        me.options.line.style.left = left + 'px';\n        me.options.line.style.width = width + 'px';\n        me.options.menu.parentElement.scrollLeft = left + (width - me.tabWidth) / 2;\n      }\n      clearTimeout(isScrolling);\n      isScrolling = setTimeout(function() {\n        if (total - scrollPos < -me.options.scrollBreakpoint) {\n          me.active = t;\n        } else if (total - scrollPos > +me.options.scrollBreakpoint) {\n          me.active = t + 1;\n        } else {\n          me.active = scrollPos;\n        }\n      }, 66);\n    }\n  }\n\n  setWindowResizeEvent() {\n    window.addEventListener('resize', () => requestAnimationFrame(this.refresh.bind(this)));\n  }\n\n  setSlotChangeEvent() {\n    const me = this;\n    const fxn = () => {\n      me.options.menus = me.$$('slot')[0].assignedNodes();\n      me.options.tabs = me.$$('slot')[1].assignedNodes();\n      me.refresh();\n    };\n    this.$$('slot')[0].addEventListener('slotchange', fxn);\n    this.$$('slot')[1].addEventListener('slotchange', fxn);\n  }\n\n  get active() {\n    return this.state ? this.state.active : 0;\n  }\n\n  set active(i) {\n    this.state = {\n      active: i\n    };\n  }\n\n  beforeUpdate() {\n    if (!this.options) return;\n    let i = this.state.active;\n    i = this.getTabNumber(i);\n    if (!isNaN(i) && i !== this.state.active) return this.active = i;\n    animate({\n      target: this.options.content,\n      to: {\n        scrollLeft: i * (this.tabWidth + 2 * this.options.arrowMargin)\n      },\n      time: this.options.animationTime,\n      type: this.options.animation === 'none' ? () => 1 : this.options.animation\n    });\n    removeExceptOne(this.options.tabs, 'active', i);\n    removeExceptOne(this.options.tabs, 'prev', this.getTabNumber(i - 1));\n    removeExceptOne(this.options.tabs, 'next', this.getTabNumber(i + 1));\n    removeExceptOne(this.options.menus, 'active', i);\n    removeExceptOne(this.options.menus, 'prev', this.getTabNumber(i - 1));\n    removeExceptOne(this.options.menus, 'next', this.getTabNumber(i + 1));\n    if (this.options.showArrows) {\n      this.options.la.style.display = this.hasPrev() || this.options.loop ? 'block' : 'none';\n      this.options.ra.style.display = this.hasNext() || this.options.loop ? 'block' : 'none';\n    }\n  }\n\n  next() {\n    this.active = this.state.active + this.options.step;\n  }\n\n  hasNext() {\n    if (this.active === this.options.tabs.length - this.options.num) return false;\n    return true;\n  }\n\n  prev() {\n    this.active = this.state.active - this.options.step;\n  }\n\n  hasPrev() {\n    if (this.active === 0) return false;\n    return true;\n  }\n\n  getTabNumber(i) {\n    const l = this.options.tabs.length;\n    const num = this.options.num;\n    i = i < 0 ? i + l : i % l;\n    if (i + num - 1 >= l) {\n      i = this.options.loop ? 0 : l - num;\n    }\n    return i;\n  }\n}\n\nSifrrTabs.defaultState = { active: 0 };\n\nSifrrDom.register(SifrrTabs);\nexport default SifrrTabs;\n"],"names":["A","CalcBezier","slope","template","SifrrDom","style","removeExceptOne","elements","name","index","HTMLElement","children","j","length","classList","remove","add","SifrrTabs","Element","observedAttrs","onConnect","_connected","refresh","setWindowResizeEvent","setSlotChangeEvent","setScrollEvent","onAttributeChange","n","_","v","_attrOptions","JSON","parse","options","Object","assign","menu","$","content","tabcontainer","menus","assignedNodes","tabs","la","ra","line","num","showArrows","arrowMargin","arrowWidth","showMenu","step","tabHeight","showUnderline","loop","animation","animationTime","scrollBreakpoint","background","usableWidth","clientWidth","totalWidth","tabWidth","setProps","update","active","display","Array","from","forEach","e","margin","headingDisplay","width","offsetWidth","setMenuProps","left","menuProps","elem","i","_click","last","me","isScrolling","scrollPos","onscroll","requestAnimationFrame","onScroll","total","scrollLeft","per","t","Math","floor","parentElement","clearTimeout","setTimeout","window","addEventListener","bind","fxn","$$","state","beforeUpdate","getTabNumber","isNaN","animate","target","to","time","type","hasPrev","hasNext","next","prev","l","defaultState","register"],"mappings":"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"}