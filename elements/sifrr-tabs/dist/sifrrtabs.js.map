{"version":3,"file":"sifrrtabs.js","sources":["../src/sifrrtabs.js"],"sourcesContent":["import SifrrDom from '@sifrr/dom'\nimport style from './style.scss'\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n<div class=\"headings\">\n  <ul>\n    <slot name=\"heading\">\n    </slot>\n  </ul>\n  <div class=\"underline\"></div>\n</div>\n<div class=\"content\">\n  <div class=\"arrow l\">\n    <span></span>\n  </div>\n  <div class=\"arrow r\">\n    <span></span>\n  </div>\n  <div class=\"tabs\">\n    <slot name=\"tab\">\n    </slot>\n  </div>\n</div>`;\n\nfunction removeExceptOne(elems, classN, index) {\n  for (let j = 0; j < elems.length; j++) {\n    j !== index && elems[j] !== index ? elems[j].classList.remove(classN) : elems[j].classList.add(classN);\n  }\n}\n\n//Simple tabs\nclass SifrrTabs extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['options'];\n  }\n\n  onConnect() {\n    this._options = {\n      menu: this.$(\".headings ul\"),\n      content: this.$(\".content\"),\n      tabcontainer: this.$(\".tabs\"),\n      menus: this.$('slot[name=heading]').assignedNodes(),\n      tabs: this.$('slot[name=tab]').assignedNodes(),\n      la: this.$(\".arrow.l\"),\n      ra: this.$(\".arrow.r\"),\n      line: this.$(\".underline\"),\n      num: 1,\n      showArrows: false,\n      arrowMargin: 0,\n      showMenu: true,\n      step: 1,\n      tabHeight: 'auto',\n      showUnderline: true,\n      loop: false,\n      animation: 'easeOut',\n      animationTime: 300,\n      scrollBreakpoint: 0.2\n    }\n    this._attrOptions = {};\n    this.animations = this.animations();\n    this.refresh();\n    this.setWindowResizeEvent();\n    this.setClickEvents();\n    this.setSlotChangeEvent();\n    this._connected = true;\n  }\n\n  onAttributeChange(n, _, v) {\n    if (n === 'options') {\n      this._attrOptions = JSON.parse(v || '{}');\n      if (this._connected) this.refresh();\n    }\n  }\n\n  refresh() {\n    this.options = Object.assign({}, this._options, this._attrOptions);\n    if (!this.options.tabs || this.options.tabs.length < 1) return;\n    this.width = this.clientWidth / this.options.num;\n    this.margin = 0;\n    if (this.options.showArrows) {\n      this.width -= 2 * this.options.arrowMargin;\n      this.margin = this.options.arrowMargin;\n    }\n    this.setProps();\n    this.active = this.active || 0;\n  }\n\n  get active() {\n    return this.state ? this.state.active : 0;\n  }\n\n  set active(i) {\n    this.state = {\n      active: i\n    };\n  }\n\n  beforeUpdate() {\n    if (!this.options) return;\n    let i = this.state.active;\n    i = this.getTabNumber(i);\n    if (i + this.options.num - 1 == this.options.tabs.length) {\n      if (this.options.loop) i = 0;\n      else i = this.options.tabs.length - this.options.num;\n    }\n    if (!isNaN(i) && i !== this.state.active) {\n      this.state.active = i;\n      return;\n    }\n    this.animate(this.options.content, 'scrollLeft', i * (this.width + 2 * this.margin), this.options.animationTime, this.options.animation);\n    removeExceptOne(this.options.tabs, 'active', i);\n    removeExceptOne(this.options.tabs, 'prev', this.getTabNumber(i - 1));\n    removeExceptOne(this.options.tabs, 'next', this.getTabNumber(i + 1));\n    removeExceptOne(this.options.menus, 'active', i);\n    removeExceptOne(this.options.menus, 'prev', this.getTabNumber(i - 1));\n    removeExceptOne(this.options.menus, 'next', this.getTabNumber(i + 1));\n    if (this.options.showArrows) {\n      this.options.la.style.display = this.hasPrev() || this.options.loop ? \"block\" : \"none\";\n      this.options.ra.style.display = this.hasNext() || this.options.loop ? \"block\" : \"none\";\n    }\n  }\n\n  next() {\n    this.active = this.state.active + this.options.step;\n  }\n\n  hasNext() {\n    if (this.active === this.options.tabs.length - this.options.num) return false;\n    return true;\n  }\n\n  prev() {\n    this.active = this.state.active - this.options.step;\n  }\n\n  hasPrev() {\n    if (this.active === 0) return false;\n    return true;\n  }\n\n  getTabNumber(i) {\n    const l = this.options.tabs.length;\n    i = i < 0 ? i + l : i % l\n    return i;\n  }\n\n  setProps() {\n    const me = this;\n    if (!this.options.showArrows) {\n      if (this.options.la) this.options.la.style.display = 'none';\n      if (this.options.ra) this.options.ra.style.display = 'none';\n    } else {\n      Array.from(this.options.tabs).forEach(e => e.style.margin = `0 ${this.margin}px`);\n    }\n    if (!this.options.showUnderline) {\n      if (this.options.line) this.options.line.style.display = 'none';\n    }\n    if (this.options.showMenu) {\n      this.setMenuProps();\n      this.options.line.style.width = this.options.menus[0].offsetWidth + 'px';\n    } else {\n      if (this.options.menu) this.options.menu.style.display = 'none';\n    }\n    this.setScrollEvent();\n    this.options.tabcontainer.style.width = this.options.tabs.length * (this.width + 2 * this.margin) + 'px';\n    this.options.tabcontainer.style.height = this.options.tabHeight;\n    Array.from(this.options.tabs).forEach(e => e.style.width = this.width + 'px');\n  }\n\n  setMenuProps() {\n    const me = this;\n    let left = 0;\n    this.options.menuProps = [];\n    Array.from(this.options.menus).forEach((elem, i) => {\n      this.options.menuProps[i] = {\n        width: elem.offsetWidth,\n        left: left\n      }\n      left += elem.offsetWidth;\n      elem._click = () => me.active = i;\n    });\n    const last = this.options.menuProps[this.options.menus.length - 1];\n    this.options.menu.style.width = last.left + last.width + 5 + 'px';\n    const active = this.options.menuProps[this.active];\n    if (active) {\n      me.options.line.style.left = active.left + 'px';\n      me.options.line.style.width = active.width + 'px';\n    }\n  }\n\n  setClickEvents() {\n    let me = this;\n    if (this.options.la) this.options.la._click = () => me.prev();\n    if (this.options.ra) this.options.ra._click = () => me.next();\n  }\n\n  setScrollEvent() {\n    let me = this,\n      isScrolling,\n      scrollPos = -1;\n    me.options.content.onscroll = () => requestAnimationFrame(onScroll);\n\n    function onScroll() {\n      const total = me.options.content.scrollLeft / me.width;\n      const per = total % 1;\n      if (scrollPos < 0) scrollPos = per;\n      const t = Math.floor(total);\n      try {\n        const left = me.options.menuProps[t].left * (1 - per) + (me.options.menuProps[t + 1] || {\n          left: 0\n        }).left * per;\n        const width = me.options.menuProps[t].width * (1 - per) + (me.options.menuProps[t + 1] || {\n          width: 0\n        }).width * per;\n        me.options.line.style.left = left + 'px';\n        me.options.line.style.width = width + 'px';\n        me.options.menu.parentElement.scrollLeft = left - (me.width - width) / 2;\n      } catch (e) {}\n      clearTimeout(isScrolling);\n      isScrolling = setTimeout(function() {\n        if (per - scrollPos < -me.options.scrollBreakpoint) {\n          me.active = t;\n        } else if (per - scrollPos > +me.options.scrollBreakpoint) {\n          me.active = t + 1;\n        } else {\n          me.active = me.active;\n        }\n        scrollPos = -1;\n      }, 66);\n    }\n  }\n\n  setWindowResizeEvent() {\n    const me = this;\n    window.addEventListener(\"resize\", function() {\n      me.refresh();\n    });\n  }\n\n  setSlotChangeEvent() {\n    const me = this;\n    const fxn = () => {\n      me.options.menus = me.$$('slot')[0].assignedNodes();\n      me.options.tabs = me.$$('slot')[1].assignedNodes();\n      me.refresh();\n    }\n    this.$$('slot')[0].addEventListener('slotchange', fxn);\n    this.$$('slot')[1].addEventListener('slotchange', fxn);\n  }\n\n  animate(who, what, to, time, type = 'easeOut') {\n    const from = who[what];\n    const diff = to - from;\n    const step = 1 / Math.round(time / 16) * diff;\n    const me = this;\n    let pos = 0,\n      raf, startTime;\n\n    function frame(currentTime) {\n      startTime = startTime || currentTime;\n      if (currentTime - startTime > time) {\n        who[what] = to;\n        return;\n      }\n      let percent = (currentTime - startTime) / time;\n      who[what] = Math.round(me.animations[type].call(this, percent) * diff + from);\n      window.requestAnimationFrame(frame);\n    }\n    window.requestAnimationFrame(frame);\n  }\n\n  animations() {\n    return {\n      linear: i => i,\n      easeOut: i => (--i) * i * i + 1,\n      easeIn: i => i * i * i,\n      none: i => 1\n    }\n  }\n}\n\nif (window) SifrrDom.register(SifrrTabs);\nexport default SifrrTabs;\n"],"names":["template","SifrrDom","style","removeExceptOne","elems","classN","index","j","length","classList","remove","add","SifrrTabs","Element","observedAttrs","onConnect","_options","menu","$","content","tabcontainer","menus","assignedNodes","tabs","la","ra","line","num","showArrows","arrowMargin","showMenu","step","tabHeight","showUnderline","loop","animation","animationTime","scrollBreakpoint","_attrOptions","animations","refresh","setWindowResizeEvent","setClickEvents","setSlotChangeEvent","_connected","onAttributeChange","n","_","v","JSON","parse","options","Object","assign","width","clientWidth","margin","setProps","active","state","i","beforeUpdate","getTabNumber","isNaN","animate","display","hasPrev","hasNext","next","prev","l","Array","from","forEach","e","setMenuProps","offsetWidth","setScrollEvent","height","me","left","menuProps","elem","_click","last","isScrolling","scrollPos","onscroll","requestAnimationFrame","onScroll","total","scrollLeft","per","t","Math","floor","parentElement","clearTimeout","setTimeout","window","addEventListener","fxn","$$","who","what","to","time","type","diff","startTime","frame","currentTime","percent","round","call","linear","easeOut","easeIn","none","register"],"mappings":"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"}