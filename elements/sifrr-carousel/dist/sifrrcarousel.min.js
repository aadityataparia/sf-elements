/*! SifrrCarousel v0.0.5 - sifrr project | MIT licensed | https://github.com/sifrr/sifrr-elements */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@sifrr/dom")):"function"==typeof define&&define.amd?define(["@sifrr/dom"],e):(t=t||self).SifrrCarousel=e(t.Sifrr.Dom)}(this,function(t){"use strict";function e(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function s(){const t=e(['<style media="screen">\n  ',"\n  slot::slotted(*) {\n    ${this.options ? this.options.style : ''}\n  }\n  :host {\n    padding-bottom: ${this.options && this.options.showUnderline ? '3px' : '0'};\n  }\n</style>\n<slot>\n</slot>\n<div class=\"underline\"></div>"],['<style media="screen">\n  ',"\n  slot::slotted(*) {\n    \\${this.options ? this.options.style : ''}\n  }\n  :host {\n    padding-bottom: \\${this.options && this.options.showUnderline ? '3px' : '0'};\n  }\n</style>\n<slot>\n</slot>\n<div class=\"underline\"></div>"]);return s=function(){return t},t}const i=(t=t&&t.hasOwnProperty("default")?t.default:t).template(s(),":host{width:100%;position:relative;overflow-x:auto;box-sizing:border-box}:host,slot{display:block}slot{min-width:100%}slot::slotted(*){float:left;text-align:center;vertical-align:middle;opacity:.7;cursor:pointer}slot::slotted(.active){opacity:1}slot::slotted(:hover){opacity:.9}.underline{position:absolute;bottom:0;height:3px;background:#fff}");t.register(class extends t.Element{static get template(){return i}static observedAttrs(){return["options"]}onConnect(){this._connected=!0,this.$("slot").addEventListener("slotchange",this.refresh.bind(this,{})),this.refresh()}onAttributeChange(t,e,s){"options"===t&&(this._attrOptions=JSON.parse(s||"{}"),this._connected&&this.refresh())}refresh(t){this._options=Object.assign({content:this,slot:this.$("slot"),showUnderline:!0,line:this.$(".underline"),container:null},this._options,t),this.options=Object.assign({},this._options,this._attrOptions),this.options.menus=this.options.slot.assignedNodes().filter(t=>1===t.nodeType),!this.options.menus||this.options.menus.length<1||(this.setProps(),this.active=this.active||0)}setProps(){if(this.options.showUnderline||(this.options.line.style.display="none"),this.setMenuProps(),this.options.container){const e=this.options.container;e.onScrollPercent=this.setScrollPercent.bind(this),t.Event.addListener("update",e,()=>this.active=e.active)}this.setScrollPercent(0)}setMenuProps(){let t=0;this.options.menuProps=[],Array.from(this.options.menus).forEach((e,s)=>{const i=e.getBoundingClientRect().width;this.options.menuProps[s]={width:i,left:t},t+=i,e._click=()=>{this.options.container?this.options.container.active=s:this.active=s}});const e=this.options.menuProps[this.options.menus.length-1];this.options.totalMenuWidth=e.left+e.width,this.$("slot").style.width=this.options.slot.style.width=this.options.totalMenuWidth+1+"px"}setScrollPercent(t){const e=t%1,s=Math.floor(t),i=this.options.menuProps[s].left*(1-e)+(this.options.menuProps[s+1]||{left:0}).left*e,n=this.options.menuProps[s].width*(1-e)+(this.options.menuProps[s+1]||{width:0}).width*e;this.options.line.style.left=i+"px",this.options.line.style.width=n+"px",this.scrollLeft=i+(n-this.clientWidth)/2,0===e&&(this._active=s,this.update())}get active(){return this._active||0}set active(t){this._active=t,this.setScrollPercent(t),this.update()}onUpdate(){if(this.options)for(let t=0,e=this.options.menus.length;t<e;t++)this.options.menus[t].classList[t===this.active?"add":"remove"]("active")}});"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var n=function(t,e){return t(e={exports:{}},e.exports),e.exports}(function(t,e){
/*! sifrr-animate v0.0.3 - sifrr project | MIT licensed | https://github.com/sifrr/sifrr-animate */
t.exports=function(){const t={};var e=class{constructor(e){const s=e.join("_");return t[s]||(this.setProps(...e),t[s]=this.final.bind(this)),t[s]}setProps(t,e,s,i){let n={x1:t,y1:e,x2:s,y2:i,A:(t,e)=>1-3*e+3*t,B:(t,e)=>3*e-6*t,C:t=>3*t,CalcBezier:(t,e,s)=>((this.A(e,s)*t+this.B(e,s))*t+this.C(e))*t,GetSlope:(t,e,s)=>3*this.A(e,s)*t*t+2*this.B(e,s)*t+this.C(e)};Object.assign(this,n)}final(t){return this.x1==this.y1&&this.x2==this.y2?t:this.CalcBezier(this.GetTForX(t),this.y1,this.y2)}GetTForX(t){let e=t;for(let s=0;s<4;++s){let s=this.GetSlope(e,this.x1,this.x2);if(0==s)return e;let i=this.CalcBezier(e,this.x1,this.x2)-t;e-=i/s}return e}},s={linear:[0,0,1,1],ease:[.25,.1,.25,1],easeIn:[.42,0,1,1],easeOut:[0,0,.58,1],easeInOut:[.42,0,.58,1],spring:[.3642,0,.6358,1]},i=t=>new Promise(e=>setTimeout(e,t));const n=/((?:[+\-*\/]=)?-?\d+\.?\d*)/,o=new Set;window.requestAnimationFrame(function t(e){o.forEach(t=>t(e)),window.requestAnimationFrame(t)});var r=function({target:t,prop:r,from:a,to:h,time:l=300,type:c="spring",onUpdate:d,round:p=!1,delay:u=0}){const f=h.toString().split(n),m=f.length,b=[],v=[],g=[],y=(a||t[r]||"").toString().split(n),w="function"==typeof d;for(let t=0;t<m;t++){const e=Number(y[t])||0;let s=Number(f[t]);if("="===f[t][1])switch(s=Number(f[t].slice(2)),f[t][0]){case"+":s=e+s;break;case"-":s=e-s;break;case"*":s*=e;break;case"/":s=e/s}isNaN(s)||!f[t]?b.push(f[t]):(v.push(e),g.push(s-e))}const x={raw:b};return i(u).then(()=>new Promise((i,n)=>{if(s[c]&&(c=s[c]),Array.isArray(c))c=new e(c);else if("function"!=typeof c)return n(Error("type should be one of "+Object.keys(s).toString()+" or Bezier Array or Function, given "+c));let a;const h=function(e){const s=(e-(a=a||e-17))/l,u=c(s>=1?1:s),f=g.map((t,e)=>{const s=u*t+v[e];return p?Math.round(s):s}),m=String.raw(x,...f);try{t[r]=Number(m)||m,w&&d(t,r,t[r]),s>=1&&i(o.delete(h))}catch(t){o.delete(h),n(t)}};o.add(h)}))};function a({targets:t,target:e,to:s,time:i,type:n,onUpdate:o,round:a,delay:h}){t=t?Array.from(t):[e];let l=s,c=h,d=i;return Promise.all(t.map((t,e)=>("function"==typeof s&&(l=s.call(t,e)),"function"==typeof h&&(c=h.call(t,e)),"function"==typeof i&&(d=i.call(t,e)),function t(e,s,i,h){const l=[];for(let c in s){let d,p;Array.isArray(s[c])?[d,p]=s[c]:p=s[c],"object"!=typeof s[c]||Array.isArray(s[c])?l.push(r({target:e,prop:c,to:p,time:h,type:n,from:d,onUpdate:o,round:a,delay:i})):l.push(t(e[c],s[c],i,h))}return Promise.all(l)}(t,l,c,d))))}return a.types=s,a.wait=i,a.animate=a,a.keyframes=t=>{let e=Promise.resolve(!0);return t.forEach(t=>{Array.isArray(t)&&(e=e.then(()=>Promise.all(t.map(a)))),e=e.then(()=>a(t))}),e},a.loop=t=>t().then(()=>a.loop(t)),a}();
/*! (c) @aadityataparia */});function o(){const t=e(['<style media="screen">\n  ','\n</style>\n<style media="screen">\n  .tabs {\n    width: ${this.totalWidth};\n  }\n  .tabs::slotted(*) {\n    width: ${this.tabWidth};\n  }\n</style>\n<slot class="tabs">\n</slot>'],['<style media="screen">\n  ','\n</style>\n<style media="screen">\n  .tabs {\n    width: \\${this.totalWidth};\n  }\n  .tabs::slotted(*) {\n    width: \\${this.tabWidth};\n  }\n</style>\n<slot class="tabs">\n</slot>']);return o=function(){return t},t}const r=t.template(o(),":host{box-sizing:border-box;width:100%;position:relative;overflow-x:auto;margin:0}.tabs,:host{display:block}.tabs{min-height:1px}.tabs::slotted(*){float:left;max-height:100%;height:100%;overflow-x:hidden;overflow-y:auto;vertical-align:middle;box-sizing:border-box}");function a(){const t=e(['<style media="screen">\n  ','\n</style>\n<style media="screen">\n  ${this.state.style || \'\'}\n</style>\n<div id="bg">\n  <div id="cross">X</div>\n</div>\n<div id="content">\n  <sifrr-tab-container>\n    <slot name="content"></slot>\n  </sifrr-tab-container>\n  <span id="count"></span>\n</div>\n<div id="preview">\n  <div class="arrow l">\n    <span></span>\n  </div>\n  <div class="arrow r">\n    <span></span>\n  </div>\n  <sifrr-tab-header options=\'{ "showUnderline": false }\'>\n    <slot name="preview"></slot>\n  </sifrr-tab-header>\n</div>'],['<style media="screen">\n  ','\n</style>\n<style media="screen">\n  \\${this.state.style || \'\'}\n</style>\n<div id="bg">\n  <div id="cross">X</div>\n</div>\n<div id="content">\n  <sifrr-tab-container>\n    <slot name="content"></slot>\n  </sifrr-tab-container>\n  <span id="count"></span>\n</div>\n<div id="preview">\n  <div class="arrow l">\n    <span></span>\n  </div>\n  <div class="arrow r">\n    <span></span>\n  </div>\n  <sifrr-tab-header options=\'{ "showUnderline": false }\'>\n    <slot name="preview"></slot>\n  </sifrr-tab-header>\n</div>']);return a=function(){return t},t}t.register(class extends t.Element{static get template(){return r}static observedAttrs(){return["options"]}onConnect(){this._connected=!0,this.refresh(),window.addEventListener("resize",()=>requestAnimationFrame(this.refresh.bind(this))),this.options.slot.addEventListener("slotchange",this.refresh.bind(this,{})),this.setScrollEvent()}onAttributeChange(t,e,s){"options"===t&&(this._attrOptions=JSON.parse(s||"{}"),this._connected&&this.refresh())}refresh(t){this._options=Object.assign({content:this,slot:this.$("slot"),num:1,animation:"spring",animationTime:300,scrollBreakpoint:.3,loop:!1},this._options,t),this.options=Object.assign({},this._options,this._attrOptions),this.options.tabs=this.options.slot.assignedNodes().filter(t=>1===t.nodeType),this.total=this.options.tabs.length,!this.options.tabs||this.options.tabs.length<1||("auto"===this.options.num?(this.tabWidth="auto",this._totalWidth=this.options.tabs.reduce((t,e)=>t+e.getBoundingClientRect().width,0),this.totalWidth=this._totalWidth+"px"):(this._tabWidth=this.getBoundingClientRect().width/this.options.num,this.tabWidth=this._tabWidth+"px",this._totalWidth=this._tabWidth*this.options.tabs.length,this.totalWidth=this._totalWidth+"px",this.active="number"==typeof this._active?this._active:0))}setScrollEvent(){let t,e,s=this;"auto"!==this.options.num&&this.options.content.addEventListener("scroll",function(){e=s.active;const i=s.options.content.scrollLeft/s._tabWidth,n=Math.round(i);s.onScrollPercent(i),clearTimeout(t),t=setTimeout(function(){i-e<-s.options.scrollBreakpoint?s.active=Math.min(n,e-1):i-e>+s.options.scrollBreakpoint?s.active=Math.max(n,e+1):s.active=e},50)})}onScrollPercent(){}get active(){return this._active}set active(t){this._active=this.getTabNumber(t),this.update()}onUpdate(){if(!this.options||"auto"===this.options.num)return;const t=this._active;n({target:this.options.content,to:{scrollLeft:t*this._tabWidth},time:this.options.animationTime,type:"none"===this.options.animation?()=>1:this.options.animation});for(let e=0,s=this.options.tabs.length;e<s;e++){const s=this.options.tabs[e];e===t?(s.onActive&&!s.classList.contains("active")&&s.onActive(),s.classList.add("active")):(s.onInactive&&s.classList.contains("active")&&s.onInactive(),s.classList.remove("active"))}}next(){"auto"===this.options.num?this.options.content.scrollLeft+=this._totalWidth/2:this.active+=1}hasNext(){return this.active!==this.options.tabs.length-this.options.num}prev(){"auto"===this.options.num?this.options.content.scrollLeft-=this._totalWidth/2:this.active-=1}hasPrev(){return 0!==this.active}getTabNumber(t){const e=this.options.tabs.length;if(e<1)return 0;const s=this.options.num;return(t=t<0?t+e:t%e)+s-1>=e&&(t=this.options.loop?t%e:e-s),t}});const h=t.template(a(),":host{display:block;width:100%}#content,#preview{position:relative}#preview{padding:0 24px}#count{position:absolute;bottom:6px;left:6px;background:hsla(0,0%,100%,.7);border-radius:10px;font-size:14px;padding:4px 6px}#bg{background:hsla(0,0%,100%,.9);display:none;height:100%;width:100%}#bg #cross{position:absolute;top:6px;right:6px;width:32px;height:32px;font-family:Helvetica,Arial,sans-serif;font-size:32px}.arrow{position:absolute;z-index:5;top:0;bottom:0}.arrow>*{position:absolute;width:8px;height:8px;margin:-6px 5px;top:50%;border:solid #fff;border-width:0 3px 3px 0;display:inline-block;padding:3px}.arrow.l{left:0;cursor:w-resize}.arrow.l>*{left:0;transform:rotate(135deg)}.arrow.r{right:0;cursor:e-resize}.arrow.r>*{right:0;transform:rotate(-45deg)}#cross,.arrow>*{filter:drop-shadow(-1px -1px 3px #000);-webkit-user-select:none;-moz-user-select:none;user-select:none;color:#fff;z-index:3}slot[name=preview]::slotted(*){height:64px;opacity:.5}slot[name=preview]::slotted(.active){border:1px solid #fff;opacity:1}sifrr-tab-header{height:64px}:host(.fullscreen){position:fixed;width:100%;height:100%;left:0;top:0;z-index:9999}:host(.fullscreen) #bg{display:block;z-index:1}:host(.fullscreen) #content,:host(.fullscreen) #preview{position:absolute;left:0;right:0;margin:auto}:host(.fullscreen) #preview{bottom:30px;max-width:90%;z-index:2}:host(.fullscreen) #content{z-index:2;max-width:90%;max-height:calc(100% - 150px);top:calc(50% - 55px);transform:translateY(-50%);overflow:hidden}");class l extends t.Element{static get template(){return h}onConnect(){this.container=this.$("sifrr-tab-container"),this.header=this.$("sifrr-tab-header"),this.container.refresh({slot:this.$("slot[name=content]")}),this.header.refresh({slot:this.$("slot[name=preview]"),container:this.container}),this._rel=this._rel||this.refresh.bind(this),Array.from(this.$$("img",!1)).forEach(t=>t.addEventListener("load",this._rel)),t.Event.addListener("click",this,(t,e)=>{!e.matches("[slot=content]")&&!e.matches("[slot=content] *")||e.matches(".fullscreen *")?e.matches("#bg")||e.matches("#bg *")?this.fullScreen(!1):e.matches(".arrow.l")||e.matches(".arrow.l span")?this.container.prev():(e.matches(".arrow.r")||e.matches(".arrow.r span"))&&this.container.next():this.fullScreen(!0)}),this.container._update=()=>{this.$("#count").textContent="".concat(this.container.active+1,"/").concat(this.container.total)}}fullScreen(t=!0){t?this.classList.add("fullscreen"):this.classList.remove("fullscreen"),this.refresh()}refresh(){this.container.refresh(),this.header.refresh()}}return l.defaultState={style:""},t.register(l),l});
/*! (c) @aadityataparia */
