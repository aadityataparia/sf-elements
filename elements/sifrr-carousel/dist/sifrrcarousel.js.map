{"version":3,"file":"sifrrcarousel.js","sources":["../../sifrr-tab-header/src/sifrrtabheader.js","../../../node_modules/@sifrr/animate/dist/sifrr.animate.js","../../sifrr-tab-container/src/sifrrtabcontainer.js","../src/sifrrcarousel.js"],"sourcesContent":["import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n  slot::slotted(*) {\n    \\${this.options ? this.options.style : ''}\n  }\n  :host {\n    padding-bottom: \\${this.options.showUnderline ? '3px' : '0'};\n  }\n</style>\n<slot>\n</slot>\n<div class=\"underline\"></div>`;\n\nclass SifrrTabHeader extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['options'];\n  }\n\n  onConnect() {\n    this._connected = true;\n    this.$('slot').addEventListener('slotchange', this.refresh.bind(this, {}));\n    this.refresh();\n  }\n\n  onAttributeChange(n, _, v) {\n    if (n === 'options') {\n      this._attrOptions = JSON.parse(v || '{}');\n      if (this._connected) this.refresh();\n    }\n  }\n\n  refresh(options) {\n    this._options = Object.assign({\n      content: this,\n      slot: this.$('slot'),\n      showUnderline: true,\n      line: this.$('.underline'),\n      container: null\n    }, this._options, options);\n    this.options = Object.assign({}, this._options, this._attrOptions);\n    this.options.menus = this.options.slot.assignedNodes().filter(n => n.nodeType === 1);\n    if (!this.options.menus || this.options.menus.length < 1) return;\n    this.setProps();\n    this.active = this.active || 0;\n  }\n\n  setProps() {\n    if (!this.options.showUnderline) this.options.line.style.display = 'none';\n    this.setMenuProps();\n    if (this.options.container) {\n      const c = this.options.container;\n      c.onScrollPercent = this.setScrollPercent.bind(this);\n      SifrrDom.Event.addListener('update', c, () => this.active = c.active);\n    }\n    this.setScrollPercent(0);\n  }\n\n  setMenuProps() {\n    let left = 0;\n    this._smt = this._smt || this.setMenuProps.bind(this);\n    this.options.menuProps = [];\n    Array.from(this.options.menus).forEach((elem, i) => {\n      const width = elem.getBoundingClientRect().width;\n      this.options.menuProps[i] = {\n        width,\n        left: left\n      };\n      left += width;\n      elem.addEventListener('load', this._smt);\n      elem._click = () => {\n        if (this.options.container) this.options.container.active = i;\n        else this.active = i;\n      };\n    });\n    const last = this.options.menuProps[this.options.menus.length - 1];\n    this.options.totalMenuWidth = last.left + last.width;\n    this.$('slot').style.width = this.options.slot.style.width = this.options.totalMenuWidth + 'px';\n  }\n\n  setScrollPercent(total) {\n    const per = total % 1, t = Math.floor(total);\n    const left = this.options.menuProps[t].left * (1 - per) + (this.options.menuProps[t + 1] || {\n      left: 0\n    }).left * per;\n    const width = this.options.menuProps[t].width * (1 - per) + (this.options.menuProps[t + 1] || {\n      width: 0\n    }).width * per;\n    this.options.line.style.left = left + 'px';\n    this.options.line.style.width = width + 'px';\n    this.scrollLeft = left + (width - this.clientWidth) / 2;\n    if (per === 0) {\n      this._active = t;\n      this.update();\n    }\n  }\n\n  get active() {\n    return this._active || 0;\n  }\n\n  set active(i) {\n    this._active = i;\n    this.setScrollPercent(i);\n    this.update();\n  }\n\n  onUpdate() {\n    if (!this.options) return;\n    for (let j = 0, l = this.options.menus.length; j < l; j++) {\n      this.options.menus[j].classList[j === this.active ? 'add' : 'remove']('active');\n    }\n  }\n}\n\nSifrrDom.register(SifrrTabHeader);\nexport default SifrrTabHeader;\n","/*! sifrr-animate v0.0.3 - sifrr project | MIT licensed | https://github.com/sifrr/sifrr-animate */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, (global.Sifrr = global.Sifrr || {}, global.Sifrr.animate = factory()));\n}(this, function () { 'use strict';\n\n  const beziers = {};\n  class Bezier {\n    constructor(args) {\n      const key = args.join('_');\n      if (!beziers[key]) {\n        this.setProps(...args);\n        beziers[key] = this.final.bind(this);\n      }\n      return beziers[key];\n    }\n    setProps(x1, y1, x2, y2) {\n      let props = {\n        x1,\n        y1,\n        x2,\n        y2,\n        A: (x1, x2) => 1.0 - 3.0 * x2 + 3.0 * x1,\n        B: (x1, x2) => 3.0 * x2 - 6.0 * x1,\n        C: x1 => 3.0 * x1,\n        CalcBezier: (t, x1, x2) => ((this.A(x1, x2) * t + this.B(x1, x2)) * t + this.C(x1)) * t,\n        GetSlope: (t, x1, x2) => 3.0 * this.A(x1, x2) * t * t + 2.0 * this.B(x1, x2) * t + this.C(x1)\n      };\n      Object.assign(this, props);\n    }\n    final(x) {\n      if (this.x1 == this.y1 && this.x2 == this.y2) return x;\n      return this.CalcBezier(this.GetTForX(x), this.y1, this.y2);\n    }\n    GetTForX(xx) {\n      let t = xx;\n      for (let i = 0; i < 4; ++i) {\n        let slope = this.GetSlope(t, this.x1, this.x2);\n        if (slope == 0) return t;\n        let x = this.CalcBezier(t, this.x1, this.x2) - xx;\n        t -= x / slope;\n      }\n      return t;\n    }\n  }\n  var bezier = Bezier;\n\n  var types = {\n    linear: [0, 0, 1, 1],\n    ease: [.25, .1, .25, 1],\n    easeIn: [.42, 0, 1, 1],\n    easeOut: [0, 0, .58, 1],\n    easeInOut: [.42, 0, .58, 1],\n    spring: [.3642, 0, .6358, 1]\n  };\n\n  var wait = t => new Promise(res => setTimeout(res, t));\n\n  const digitRgx = /((?:[+\\-*/]=)?-?\\d+\\.?\\d*)/;\n  const frames = new Set();\n  function runFrames(currentTime) {\n    frames.forEach(f => f(currentTime));\n    window.requestAnimationFrame(runFrames);\n  }\n  window.requestAnimationFrame(runFrames);\n  function animateOne({\n    target,\n    prop,\n    from,\n    to,\n    time = 300,\n    type = 'spring',\n    onUpdate,\n    round = false,\n    delay = 0\n  }) {\n    const toSplit = to.toString().split(digitRgx),\n          l = toSplit.length,\n          raw = [],\n          fromNums = [],\n          diffs = [];\n    const fromSplit = (from || target[prop] || '').toString().split(digitRgx);\n    const onUp = typeof onUpdate === 'function';\n    for (let i = 0; i < l; i++) {\n      const fn = Number(fromSplit[i]) || 0;\n      let tn = Number(toSplit[i]);\n      if (toSplit[i][1] === '=') {\n        tn = Number(toSplit[i].slice(2));\n        switch (toSplit[i][0]) {\n          case '+':\n            tn = fn + tn;\n            break;\n          case '-':\n            tn = fn - tn;\n            break;\n          case '*':\n            tn = fn * tn;\n            break;\n          case '/':\n            tn = fn / tn;\n            break;\n        }\n      }\n      if (isNaN(tn) || !toSplit[i]) raw.push(toSplit[i]);else {\n        fromNums.push(fn);\n        diffs.push(tn - fn);\n      }\n    }\n    const rawObj = {\n      raw\n    };\n    return wait(delay).then(() => new Promise((resolve, reject) => {\n      if (types[type]) type = types[type];\n      if (Array.isArray(type)) type = new bezier(type);else if (typeof type !== 'function') return reject(Error('type should be one of ' + Object.keys(types).toString() + ' or Bezier Array or Function, given ' + type));\n      let startTime;\n      const frame = function (currentTime) {\n        startTime = startTime || currentTime - 17;\n        const percent = (currentTime - startTime) / time,\n              bper = type(percent >= 1 ? 1 : percent);\n        const next = diffs.map((d, i) => {\n          const n = bper * d + fromNums[i];\n          return round ? Math.round(n) : n;\n        });\n        const val = String.raw(rawObj, ...next);\n        try {\n          target[prop] = Number(val) || val;\n          if (onUp) onUpdate(target, prop, target[prop]);\n          if (percent >= 1) resolve(frames.delete(frame));\n        } catch (e) {\n          frames.delete(frame);\n          reject(e);\n        }\n      };\n      frames.add(frame);\n    }));\n  }\n  var animateone = animateOne;\n\n  function animate({\n    targets,\n    target,\n    to,\n    time,\n    type,\n    onUpdate,\n    round,\n    delay\n  }) {\n    targets = targets ? Array.from(targets) : [target];\n    function iterate(tg, props, d, ntime) {\n      const promises = [];\n      for (let prop in props) {\n        let from, final;\n        if (Array.isArray(props[prop])) [from, final] = props[prop];else final = props[prop];\n        if (typeof props[prop] === 'object' && !Array.isArray(props[prop])) {\n          promises.push(iterate(tg[prop], props[prop], d, ntime));\n        } else {\n          promises.push(animateone({\n            target: tg,\n            prop,\n            to: final,\n            time: ntime,\n            type,\n            from,\n            onUpdate,\n            round,\n            delay: d\n          }));\n        }\n      }\n      return Promise.all(promises);\n    }\n    let numTo = to,\n        numDelay = delay,\n        numTime = time;\n    return Promise.all(targets.map((target, i) => {\n      if (typeof to === 'function') numTo = to.call(target, i);\n      if (typeof delay === 'function') numDelay = delay.call(target, i);\n      if (typeof time === 'function') numTime = time.call(target, i);\n      return iterate(target, numTo, numDelay, numTime);\n    }));\n  }\n  animate.types = types;\n  animate.wait = wait;\n  animate.animate = animate;\n  animate.keyframes = arrOpts => {\n    let promise = Promise.resolve(true);\n    arrOpts.forEach(opts => {\n      if (Array.isArray(opts)) promise = promise.then(() => Promise.all(opts.map(animate)));\n      promise = promise.then(() => animate(opts));\n    });\n    return promise;\n  };\n  animate.loop = fxn => fxn().then(() => animate.loop(fxn));\n  var animate_1 = animate;\n\n  return animate_1;\n\n}));\n/*! (c) @aadityataparia */\n//# sourceMappingURL=sifrr.animate.js.map\n","import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\nimport animate from '@sifrr/animate';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n<style media=\"screen\">\n  .tabs {\n    width: \\${this.totalWidth};\n  }\n  .tabs::slotted(*) {\n    width: \\${this.tabWidth};\n  }\n</style>\n<slot class=\"tabs\">\n</slot>`;\n\nclass SifrrTabContainer extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['options'];\n  }\n\n  onConnect() {\n    this._connected = true;\n    this.refresh();\n    window.addEventListener('resize', () => requestAnimationFrame(this.refresh.bind(this)));\n    this.options.slot.addEventListener('slotchange', this.refresh.bind(this, {}));\n    this.setScrollEvent();\n  }\n\n  onAttributeChange(n, _, v) {\n    if (n === 'options') {\n      this._attrOptions = JSON.parse(v || '{}');\n      if (this._connected) this.refresh();\n    }\n  }\n\n  refresh(options) {\n    this._options = Object.assign({\n      content: this,\n      slot: this.$('slot'),\n      num: 1,\n      animation: 'spring',\n      animationTime: 300,\n      scrollBreakpoint: 0.3,\n      loop: false\n    }, this._options, options);\n    this.options = Object.assign({}, this._options, this._attrOptions);\n    this.options.tabs = this.options.slot.assignedNodes().filter(n => n.nodeType === 1);\n    this.total = this.options.tabs.length;\n    if (!this.options.tabs || this.options.tabs.length < 1) return;\n    if (this.options.num === 'auto') {\n      this.tabWidth = 'auto';\n      this._totalWidth = this.options.tabs.reduce((a, b) => a + b.offsetWidth, 0);\n      this.totalWidth = this._totalWidth + 'px';\n    } else {\n      this._tabWidth = this.clientWidth / this.options.num;\n      this.tabWidth = this._tabWidth + 'px';\n      this._totalWidth = this._tabWidth * this.options.tabs.length;\n      this.totalWidth = this._totalWidth + 'px';\n      this.active = typeof this._active === 'number' ? this._active : 0;\n    }\n  }\n\n  setScrollEvent() {\n    let me = this,\n      isScrolling,\n      scrollPos;\n    if (this.options.num !== 'auto') this.options.content.addEventListener('scroll', onScroll);\n\n    function onScroll() {\n      scrollPos = me.active;\n      const total = me.options.content.scrollLeft / me._tabWidth;\n      const t = Math.round(total);\n      me.onScrollPercent(total);\n      clearTimeout(isScrolling);\n      isScrolling = setTimeout(function() {\n        if (total - scrollPos < -me.options.scrollBreakpoint) {\n          me.active = Math.min(t, scrollPos - 1);\n        } else if (total - scrollPos > +me.options.scrollBreakpoint) {\n          me.active = Math.max(t, scrollPos + 1);\n        } else {\n          me.active = scrollPos;\n        }\n      }, 50);\n    }\n  }\n\n  onScrollPercent() {}\n\n  get active() {\n    return this._active;\n  }\n\n  set active(i) {\n    this._active = this.getTabNumber(i);\n    this.update();\n  }\n\n  onUpdate() {\n    if (!this.options || this.options.num === 'auto') return;\n    const i = this._active;\n    animate({\n      target: this.options.content,\n      to: {\n        scrollLeft: i * this._tabWidth\n      },\n      time: this.options.animationTime,\n      type: this.options.animation === 'none' ? () => 1 : this.options.animation\n    });\n    for (let j = 0, l = this.options.tabs.length; j < l; j++) {\n      const el = this.options.tabs[j];\n      if (j === i) {\n        if (el.onActive && !el.classList.contains('active')) el.onActive();\n        el.classList.add('active');\n      } else {\n        if (el.onInactive && el.classList.contains('active')) el.onInactive();\n        el.classList.remove('active');\n      }\n    }\n  }\n\n  next() {\n    this.options.num === 'auto' ? (this.options.content.scrollLeft += this._totalWidth / 2) : (this.active += 1);\n  }\n\n  hasNext() {\n    if (this.active === this.options.tabs.length - this.options.num) return false;\n    return true;\n  }\n\n  prev() {\n    this.options.num === 'auto' ? (this.options.content.scrollLeft -= this._totalWidth / 2) : (this.active -= 1);\n  }\n\n  hasPrev() {\n    return this.active === 0 ? false : true;\n  }\n\n  getTabNumber(i) {\n    const l = this.options.tabs.length;\n    if (l < 1) return 0;\n    const num = this.options.num;\n    i = i < 0 ? i + l : i % l;\n    if (i + num - 1 >= l) {\n      i = this.options.loop ? i % l : l - num;\n    }\n    return i;\n  }\n}\n\nSifrrDom.register(SifrrTabContainer);\nexport default SifrrTabContainer;\n","import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\nimport '../../sifrr-tab-header/src/sifrrtabheader';\nimport '../../sifrr-tab-container/src/sifrrtabcontainer';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n<style media=\"screen\">\n  \\${this.state.style || ''}\n</style>\n<div id=\"container\">\n  <sifrr-tab-container>\n    <slot name=\"content\"></slot>\n  </sifrr-tab-container>\n  <span id=\"count\"></span>\n</div>\n<div id=\"header\">\n  <div class=\"arrow l\">\n    <span></span>\n  </div>\n  <div class=\"arrow r\">\n    <span></span>\n  </div>\n  <sifrr-tab-header options='{ \"showUnderline\": false }'>\n    <slot name=\"preview\"></slot>\n  </sifrr-tab-header>\n</div>`;\n\nclass SifrrCarousel extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  onConnect() {\n    this.container = this.$('sifrr-tab-container');\n    this.header = this.$('sifrr-tab-header');\n    this.container.refresh({\n      slot: this.$('slot[name=content]')\n    });\n    this.header.refresh({\n      slot: this.$('slot[name=preview]'),\n      container: this.container\n    });\n\n    SifrrDom.Event.addListener('click', this, (e, t) => {\n      if (t.matches('.arrow.l') || t.matches('.arrow.l span')) this.container.prev();\n      if (t.matches('.arrow.r') || t.matches('.arrow.r span')) this.container.next();\n    });\n    this.container._update = () => {\n      this.$('#count').textContent = `${this.container.active + 1}/${this.container.total}`;\n    };\n  }\n}\n\nSifrrCarousel.defaultState = { style: '' };\nSifrrDom.register(SifrrCarousel);\n\nexport default SifrrCarousel;\n"],"names":["template","SifrrDom","style","SifrrTabHeader","Element","observedAttrs","onConnect","_connected","$","addEventListener","refresh","bind","onAttributeChange","n","_","v","_attrOptions","JSON","parse","options","_options","Object","assign","content","slot","showUnderline","line","container","menus","assignedNodes","filter","nodeType","length","setProps","active","display","setMenuProps","c","onScrollPercent","setScrollPercent","Event","addListener","left","_smt","menuProps","Array","from","forEach","elem","i","width","getBoundingClientRect","_click","last","totalMenuWidth","total","per","t","Math","floor","scrollLeft","clientWidth","_active","update","onUpdate","j","l","classList","register","this","SifrrTabContainer","window","requestAnimationFrame","setScrollEvent","num","animation","animationTime","scrollBreakpoint","loop","tabs","tabWidth","_totalWidth","reduce","a","b","offsetWidth","totalWidth","_tabWidth","me","isScrolling","scrollPos","onScroll","round","clearTimeout","setTimeout","min","max","getTabNumber","animate","target","to","time","type","el","onActive","contains","add","onInactive","remove","next","hasNext","prev","hasPrev","SifrrCarousel","header","e","matches","_update","textContent","defaultState"],"mappings":"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"}