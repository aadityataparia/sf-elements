{"version":3,"file":"sifrrshimmer.js","sources":["../src/sifrrshimmer.js"],"sourcesContent":["import SifrrDom from '@sifrr/dom';\n\nimport style from './style.css';\n\nconst properStyle = style.replace(/\"(\\${[^\"]*})\"/g, '$1');\n\nfunction rgbToHsl(r = 0, g = 0, b = 0) {\n  (r /= 255), (g /= 255), (b /= 255);\n  let max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  let h,\n    s,\n    l = (max + min) / 2;\n\n  if (max == min) {\n    h = s = 0; // achromatic\n  } else {\n    let d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n    h /= 6;\n  }\n\n  return [h, s, l];\n}\n\nclass SifrrShimmer extends SifrrDom.Element {\n  static syncedAttrs() {\n    return ['color', 'bg-color', 'fg-color'];\n  }\n\n  static get template() {\n    return SifrrDom.template(`<style>${properStyle}</style>`);\n  }\n\n  get bgColor() {\n    return this['bg-color'] || this.colora(0.15);\n  }\n\n  get fgColor() {\n    return this['fg-color'] || this.colora(0);\n  }\n\n  colora(point) {\n    const hsl = rgbToHsl(\n      ...(this.color || '170, 170, 170')\n        .replace(/ /g, '')\n        .split(',')\n        .map(Number)\n    );\n    const l = Math.min(hsl[2] + (this.isLight() ? point : -1 * point), 1);\n    return `hsl(${hsl[0] * 359}, ${hsl[1] * 100}%, ${l * 100}%)`;\n  }\n\n  isLight() {\n    return this.hasAttribute('light');\n  }\n}\n\nSifrrDom.register(SifrrShimmer);\n\nexport default SifrrShimmer;\n"],"names":["properStyle","style","replace","rgbToHsl","r","g","b","max","Math","min","h","s","l","d","SifrrShimmer","SifrrDom","Element","syncedAttrs","template","bgColor","colora","fgColor","point","hsl","color","split","map","Number","isLight","hasAttribute","register"],"mappings":"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"}