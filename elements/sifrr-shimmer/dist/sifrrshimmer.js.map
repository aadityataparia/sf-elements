{"version":3,"file":"sifrrshimmer.js","sources":["../src/sifrrshimmer.js"],"sourcesContent":["import SifrrDom from '@sifrr/dom';\n\nimport style from './style.css';\n\nconst properStyle = style.replace(/\"(\\${[^\"]*})\"/g, '$1');\n\nfunction rgbToHsl(r = 0, g = 0, b = 0) {\n  r /= 255, g /= 255, b /= 255;\n  let max = Math.max(r, g, b), min = Math.min(r, g, b);\n  let h, s, l = (max + min) / 2;\n\n  if (max == min) {\n    h = s = 0; // achromatic\n  } else {\n    let d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    switch(max) {\n    case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n    case g: h = (b - r) / d + 2; break;\n    case b: h = (r - g) / d + 4; break;\n    }\n    h /= 6;\n  }\n\n  return [h, s, l];\n}\n\nclass SifrrShimmer extends SifrrDom.Element {\n  static syncedAttrs() {\n    return ['color', 'bg-color', 'fg-color'];\n  }\n\n  static get template() {\n    return SifrrDom.template(`<style>${properStyle}</style>`);\n  }\n\n  get bgColor() {\n    return this['bg-color'] || this.colora(0.15);\n  }\n\n  get fgColor() {\n    return this['fg-color'] || this.colora(0);\n  }\n\n  colora(point) {\n    const hsl = rgbToHsl(...(this.color || '170, 170, 170').replace(/ /g, '').split(',').map(Number));\n    const l = Math.min(hsl[2] + (this.isLight() ? point : -1 * point), 1);\n    return `hsl(${hsl[0] * 359}, ${hsl[1] * 100}%, ${l * 100}%)`;\n  }\n\n  isLight() {\n    return this.hasAttribute('light');\n  }\n}\n\nSifrrDom.register(SifrrShimmer);\n\nexport default SifrrShimmer;\n"],"names":["properStyle","style","replace","rgbToHsl","r","g","b","max","Math","min","h","s","l","d","SifrrShimmer","SifrrDom","Element","syncedAttrs","template","bgColor","colora","fgColor","point","hsl","color","split","map","Number","isLight","hasAttribute","register"],"mappings":";;;;;;;;;;;EAIA,MAAMA,WAAW,GAAGC,GAAK,CAACC,OAAN,CAAc,gBAAd,EAAgC,IAAhC,CAApB;EAEA,SAASC,QAAT,CAAkBC,CAAC,GAAG,CAAtB,EAAyBC,CAAC,GAAG,CAA7B,EAAgCC,CAAC,GAAG,CAApC,EAAuC;EACrCF,EAAAA,CAAC,IAAI,GAAL,EAAUC,CAAC,IAAI,GAAf,EAAoBC,CAAC,IAAI,GAAzB;EACA,MAAIC,GAAG,GAAGC,IAAI,CAACD,GAAL,CAASH,CAAT,EAAYC,CAAZ,EAAeC,CAAf,CAAV;EAAA,MAA6BG,GAAG,GAAGD,IAAI,CAACC,GAAL,CAASL,CAAT,EAAYC,CAAZ,EAAeC,CAAf,CAAnC;EACA,MAAII,CAAJ;EAAA,MAAOC,CAAP;EAAA,MAAUC,CAAC,GAAG,CAACL,GAAG,GAAGE,GAAP,IAAc,CAA5B;EAEA,MAAIF,GAAG,IAAIE,GAAX,EAAgB;EACdC,IAAAA,CAAC,GAAGC,CAAC,GAAG,CAAR,CADc;EAEf,GAFD,MAEO;EACL,QAAIE,CAAC,GAAGN,GAAG,GAAGE,GAAd;EACAE,IAAAA,CAAC,GAAGC,CAAC,GAAG,GAAJ,GAAUC,CAAC,IAAI,IAAIN,GAAJ,GAAUE,GAAd,CAAX,GAAgCI,CAAC,IAAIN,GAAG,GAAGE,GAAV,CAArC;EACA,YAAOF,GAAP;EACA,WAAKH,CAAL;EAAQM,QAAAA,CAAC,GAAG,CAACL,CAAC,GAAGC,CAAL,IAAUO,CAAV,IAAeR,CAAC,GAAGC,CAAJ,GAAQ,CAAR,GAAY,CAA3B,CAAJ;EAAmC;EAC3C,WAAKD,CAAL;EAAQK,QAAAA,CAAC,GAAG,CAACJ,CAAC,GAAGF,CAAL,IAAUS,CAAV,GAAc,CAAlB;EAAqB;EAC7B,WAAKP,CAAL;EAAQI,QAAAA,CAAC,GAAG,CAACN,CAAC,GAAGC,CAAL,IAAUQ,CAAV,GAAc,CAAlB;EAAqB;EAH7B;EAKAH,IAAAA,CAAC,IAAI,CAAL;EACD;EAED,SAAO,CAACA,CAAD,EAAIC,CAAJ,EAAOC,CAAP,CAAP;EACD;EAED,MAAME,YAAN,SAA2BC,QAAQ,CAACC,OAApC,CAA4C;EAC1C,SAAOC,WAAP,GAAqB;EACnB,WAAO,CAAC,OAAD,EAAU,UAAV,EAAsB,UAAtB,CAAP;EACD;EAED,aAAWC,QAAX,GAAsB;EACpB,WAAOH,QAAQ,CAACG,QAAT,kBAA4BlB,WAA5B,cAAP;EACD;EAED,MAAImB,OAAJ,GAAc;EACZ,WAAO,KAAK,UAAL,KAAoB,KAAKC,MAAL,CAAY,IAAZ,CAA3B;EACD;EAED,MAAIC,OAAJ,GAAc;EACZ,WAAO,KAAK,UAAL,KAAoB,KAAKD,MAAL,CAAY,CAAZ,CAA3B;EACD;EAEDA,EAAAA,MAAM,CAACE,KAAD,EAAQ;EACZ,UAAMC,GAAG,GAAGpB,QAAQ,CAAC,GAAG,CAAC,KAAKqB,KAAL,IAAc,eAAf,EAAgCtB,OAAhC,CAAwC,IAAxC,EAA8C,EAA9C,EAAkDuB,KAAlD,CAAwD,GAAxD,EAA6DC,GAA7D,CAAiEC,MAAjE,CAAJ,CAApB;EACA,UAAMf,CAAC,GAAGJ,IAAI,CAACC,GAAL,CAASc,GAAG,CAAC,CAAD,CAAH,IAAU,KAAKK,OAAL,KAAiBN,KAAjB,GAAyB,CAAC,CAAD,GAAKA,KAAxC,CAAT,EAAyD,CAAzD,CAAV;EACA,yBAAcC,GAAG,CAAC,CAAD,CAAH,GAAS,GAAvB,eAA+BA,GAAG,CAAC,CAAD,CAAH,GAAS,GAAxC,gBAAiDX,CAAC,GAAG,GAArD;EACD;EAEDgB,EAAAA,OAAO,GAAG;EACR,WAAO,KAAKC,YAAL,CAAkB,OAAlB,CAAP;EACD;EAzByC;EA4B5Cd,QAAQ,CAACe,QAAT,CAAkBhB,YAAlB;;;;;;;;;;;"}