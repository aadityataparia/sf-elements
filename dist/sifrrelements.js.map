{"version":3,"file":"sifrrelements.js","sources":["../elements/sifrr-lazy-picture/src/sifrrlazypicture.js","../elements/sifrr-tabs/src/sifrrtabs.js","../elements/sifrr-stater/src/sifrrstater.js","../elements/sifrr-code-editor/src/sifrrcodeeditor.js","../elements/sifrr-showcase/src/singleshowcase.js","../elements/sifrr-showcase/src/sifrrshowcase.js"],"sourcesContent":["import SifrrDom from '@sifrr/dom';\n\nfunction moveAttr(el, attr) {\n  if (!el.dataset[attr]) return;\n  el.setAttribute(attr, el.dataset[attr]);\n  el.removeAttribute(`data-${attr}`);\n}\n\nfunction loadPicture(pic) {\n  if (pic.sifrrLazyLoaded) return false;\n  pic.sifrrLazyLoaded = true;\n  pic.$$('source', false).forEach((s) => {\n    moveAttr(s, 'srcset');\n  });\n  const img = pic.$('img', false);\n  moveAttr(img, 'src');\n  moveAttr(img, 'srcset');\n  return true;\n}\n\n//Sifrr Lazy Loading Picture\nclass SifrrLazyPicture extends Sifrr.Dom.Element.extends(HTMLPictureElement) {\n  static useShadowRoot() {\n    return true;\n  }\n\n  static get observer() {\n    this._observer = this._observer || new IntersectionObserver(this.onVisible, {\n      rootMargin: this.rootMargin\n    });\n    return this._observer;\n  }\n\n  static onVisible(entries) {\n    entries.forEach(entry => {\n      if (entry.isIntersecting) {\n        loadPicture(entry.target);\n        this.unobserve(entry.target);\n      }\n    });\n  }\n\n  onConnect() {\n    this.sifrrLazyLoaded = false;\n    this.constructor.observer.observe(this);\n  }\n\n  onDisconnect() {\n    this.constructor.observer.unobserve(this);\n  }\n}\n\nSifrrLazyPicture.rootMargin = '0px 0px 200px 0px';\n\nSifrrDom.register(SifrrLazyPicture, { extends: 'picture' });\n\nexport default SifrrLazyPicture;\n","import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n<div class=\"headings\">\n  <ul>\n    <slot name=\"heading\">\n    </slot>\n  </ul>\n  <div class=\"underline\"></div>\n</div>\n<div class=\"content\">\n  <div class=\"arrow l\" _click=\\${this.prev}>\n    <span></span>\n  </div>\n  <div class=\"arrow r\" _click=\\${this.next}>\n    <span></span>\n  </div>\n  <div class=\"tabs\">\n    <slot name=\"tab\">\n    </slot>\n  </div>\n</div>`;\n\nfunction removeExceptOne(elements, name, index) {\n  if (elements instanceof HTMLElement) elements = elements.children;\n  for (let j = 0; j < elements.length; j++) {\n    j !== index && elements[j] !== index ? elements[j].classList.remove(name) : elements[j].classList.add(name);\n  }\n}\n\n//Simple tabs\nclass SifrrTabs extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['options'];\n  }\n\n  onConnect() {\n    this._connected = true;\n    this.refresh();\n    this.setWindowResizeEvent();\n    this.setSlotChangeEvent();\n    this.setScrollEvent();\n  }\n\n  onAttributeChange(n, _, v) {\n    if (n === 'options') {\n      this._attrOptions = JSON.parse(v || '{}');\n      if (this._connected) this.refresh();\n    }\n  }\n\n  refresh() {\n    this.options = Object.assign({\n      menu: this.$('.headings ul'),\n      content: this.$('.content'),\n      tabcontainer: this.$('.tabs'),\n      menus: this.$('slot[name=heading]').assignedNodes(),\n      tabs: this.$('slot[name=tab]').assignedNodes(),\n      la: this.$('.arrow.l'),\n      ra: this.$('.arrow.r'),\n      line: this.$('.underline'),\n      num: 1,\n      showArrows: false,\n      arrowMargin: 0,\n      showMenu: true,\n      step: 1,\n      tabHeight: 'auto',\n      showUnderline: true,\n      loop: false,\n      animation: 'easeOut',\n      animationTime: 300,\n      scrollBreakpoint: 0.2\n    }, this._attrOptions);\n    if (!this.options.tabs || this.options.tabs.length < 1) return;\n    this.usableWidth = this.clientWidth;\n    this.margin = 0;\n    this.totalWidth = this.usableWidth / this.options.num * this.options.tabs.length;\n    if (this.options.showArrows) {\n      this.usableWidth -= 2 * this.options.arrowMargin;\n      this.margin = this.options.arrowMargin;\n    }\n    this.tabWidth = this.usableWidth / this.options.num;\n    this.setProps();\n    this.active = this.active || 0;\n  }\n\n  setProps() {\n    if (!this.options.showArrows) {\n      this.options.la.style.display = 'none';\n      this.options.ra.style.display = 'none';\n    } else {\n      this.options.la.style.display = 'block';\n      this.options.ra.style.display = 'block';\n      Array.from(this.options.tabs).forEach(e => e.style.margin = `0 ${this.margin}px`);\n    }\n    if (!this.options.showUnderline) this.options.line.style.display = 'none';\n    if (this.options.showMenu) {\n      this.options.menu.style.display = 'block';\n      this.setMenuProps();\n      this.options.line.style.width = this.options.menus[0].offsetWidth + 'px';\n    } else this.options.menu.style.display = 'none';\n    this.options.tabcontainer.style.width = this.totalWidth + 'px';\n    this.options.tabcontainer.style.height = this.options.tabHeight;\n    Array.from(this.options.tabs).forEach(e => e.style.width = this.tabWidth + 'px');\n  }\n\n  setMenuProps() {\n    let left = 0;\n    this.options.menuProps = [];\n    Array.from(this.options.menus).forEach((elem, i) => {\n      this.options.menuProps[i] = {\n        width: elem.offsetWidth,\n        left: left\n      };\n      left += elem.offsetWidth;\n      elem._click = () => this.active = i;\n    });\n    const last = this.options.menuProps[this.options.menus.length - 1];\n    this.options.menu.style.width = last.left + last.width + 5 * this.options.menus.length + 'px';\n    const active = this.options.menuProps[this.active];\n    this.options.line.style.left = active.left + 'px';\n    this.options.line.style.width = active.width + 'px';\n  }\n\n  setScrollEvent() {\n    let me = this,\n      isScrolling,\n      scrollPos;\n    me.options.content.onscroll = () => requestAnimationFrame(onScroll);\n\n    function onScroll() {\n      if (!me.options.showMenu) return;\n      scrollPos = me.active;\n      const total = me.options.content.scrollLeft / me.clientWidth;\n      const per = total % 1;\n      const t = Math.floor(total);\n      const left = me.options.menuProps[t].left * (1 - per) + (me.options.menuProps[t + 1] || {\n        left: 0\n      }).left * per;\n      const width = me.options.menuProps[t].width * (1 - per) + (me.options.menuProps[t + 1] || {\n        width: 0\n      }).width * per;\n      me.options.line.style.left = left + 'px';\n      me.options.line.style.width = width + 'px';\n      me.options.menu.parentElement.scrollLeft = left - (me.width - width) / 2;\n      clearTimeout(isScrolling);\n      isScrolling = setTimeout(function() {\n        if (total - scrollPos < -me.options.scrollBreakpoint) {\n          me.active = t;\n        } else if (total - scrollPos > +me.options.scrollBreakpoint) {\n          me.active = t + 1;\n        } else {\n          me.active = scrollPos;\n        }\n      }, 66);\n    }\n  }\n\n  setWindowResizeEvent() {\n    window.addEventListener('resize', () => {\n      if (this._resizing) {\n        clearTimeout(this._resizing);\n      }\n      this._resizing = setTimeout(() => {\n        this._resizing = null;\n        this.refresh();\n      }, 66);\n    });\n  }\n\n  setSlotChangeEvent() {\n    const me = this;\n    const fxn = () => {\n      me.options.menus = me.$$('slot')[0].assignedNodes();\n      me.options.tabs = me.$$('slot')[1].assignedNodes();\n      me.refresh();\n    };\n    this.$$('slot')[0].addEventListener('slotchange', fxn);\n    this.$$('slot')[1].addEventListener('slotchange', fxn);\n  }\n\n  get active() {\n    return this.state ? this.state.active : 0;\n  }\n\n  set active(i) {\n    this.state = {\n      active: i\n    };\n  }\n\n  beforeUpdate() {\n    if (!this.options) return;\n    let i = this.state.active;\n    i = this.getTabNumber(i);\n    if (!isNaN(i) && i !== this.state.active) return this.active = i;\n    this.animate(this.options.content, 'scrollLeft', i * (this.tabWidth + 2 * this.margin), this.options.animationTime, this.options.animation);\n    removeExceptOne(this.options.tabs, 'active', i);\n    removeExceptOne(this.options.tabs, 'prev', this.getTabNumber(i - 1));\n    removeExceptOne(this.options.tabs, 'next', this.getTabNumber(i + 1));\n    removeExceptOne(this.options.menus, 'active', i);\n    removeExceptOne(this.options.menus, 'prev', this.getTabNumber(i - 1));\n    removeExceptOne(this.options.menus, 'next', this.getTabNumber(i + 1));\n    if (this.options.showArrows) {\n      this.options.la.style.display = this.hasPrev() || this.options.loop ? 'block' : 'none';\n      this.options.ra.style.display = this.hasNext() || this.options.loop ? 'block' : 'none';\n    }\n  }\n\n  next() {\n    this.active = this.state.active + this.options.step;\n  }\n\n  hasNext() {\n    if (this.active === this.options.tabs.length - this.options.num) return false;\n    return true;\n  }\n\n  prev() {\n    this.active = this.state.active - this.options.step;\n  }\n\n  hasPrev() {\n    if (this.active === 0) return false;\n    return true;\n  }\n\n  getTabNumber(i) {\n    const l = this.options.tabs.length;\n    const num = this.options.num;\n    i = i < 0 ? i + l : i % l;\n    if (i + num - 1 >= l) {\n      i = this.options.loop ? 0 : l - num;\n    }\n    return i;\n  }\n\n  animate(who, what, to, time, type = 'easeOut') {\n    const from = who[what];\n    const diff = to - from;\n    const me = this;\n    let startTime;\n\n    function frame(currentTime) {\n      startTime = startTime || currentTime;\n      if (currentTime - startTime > time) {\n        who[what] = to;\n        return;\n      }\n      let percent = (currentTime - startTime) / time;\n      who[what] = Math.round(me.animations[type].call(this, percent) * diff + from);\n      window.requestAnimationFrame(frame);\n    }\n    window.requestAnimationFrame(frame);\n  }\n\n  get animations() {\n    return {\n      linear: i => i,\n      easeOut: i => (--i) * i * i + 1,\n      easeIn: i => i * i * i,\n      none: () => 1\n    };\n  }\n}\n\nSifrrTabs.defaultState = { active: 0 };\n\nSifrrDom.register(SifrrTabs);\nexport default SifrrTabs;\n","import SifrrDom from '@sifrr/dom';\nimport SifrrStorage from '@sifrr/storage';\nimport '../../sifrr-tabs/src/sifrrtabs';\nimport style from './style.scss';\n\nconst template = SifrrDom.template`<style>\n  ${style}\n</style>\n<div id=\"showHide\" _click=\\${this.showHide}></div>\n<sifrr-tabs options='{\"tabHeight\": \"calc(100vh - 132px)\"}' data-sifrr-html=\"true\">\n  \\${ this.headingHtml() }\n  \\${ this.stateHtml() }\n</sifrr-tabs>\n<footer>\n  <input _keyup=\\${this.addTargetOnEnter} id=\"addTargetInput\" type=\"text\" name=\"addTargetInput\" value=\"\" placeholder=\"Enter css selector query of target\">\n  <button _click=\\${this.addTarget} class=\"btn3\" type=\"button\" name=\"addTargetButton\">Add Taget</button>\n  <button _click=\\${this.commitAll} class=\"btn3\" type=\"button\" name=\"commitAll\">Commit All</button>\n  <button _click=\\${this.resetAllToFirstState} class=\"btn3\" type=\"button\" name=\"resetAll\">Reset All</button>\n  <button _click=\\${this.saveData} class=\"btn3\" type=\"button\" name=\"saveData\">Save Data</button>\n  <button _click=\\${this.loadData} class=\"btn3\" type=\"button\" name=\"loadData\">Load Data</button>\n  <button _click=\\${this.clearAll} class=\"btn3\" type=\"button\" name=\"clearAll\">Remove All</button>\n</footer>`;\n\nSifrrDom.Event.add('click');\nSifrrDom.Event.add('keyup');\nclass SifrrStater extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  onConnect() {\n    let me = this;\n    this.storage = new SifrrStorage({\n      name: 'sifrr-stater' + window.location.href\n    });\n    SifrrDom.Event.addListener('click', '.state', function(e, el) {\n      el.classList.contains('open') ? el.classList.remove('open') : el.classList.add('open');\n    });\n    SifrrDom.Event.addListener('click', '.dotC', function(e, target, el) {\n      me.toState(parseInt(el.dataset.target), parseInt(el.dataset.stateIndex));\n    });\n    SifrrDom.Event.addListener('click', '.delete', function(e, el) {\n      me.deleteState(parseInt(el.dataset.target), parseInt(el.dataset.stateIndex));\n    });\n    SifrrDom.Event.addListener('click', '.commit', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.commit(i);\n    });\n    SifrrDom.Event.addListener('click', '.reset', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.resetToFirstState(i);\n    });\n    SifrrDom.Event.addListener('click', '.remove', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.removeTarget(i);\n    });\n  }\n\n  showHide() {\n    this.classList.contains('show') ? this.classList.remove('show') : this.classList.add('show');\n  }\n\n  addTargetOnEnter(event) {\n    if (event.key === 'Enter') {\n      this.addTarget();\n    }\n  }\n\n  headingHtml() {\n    return this.state.queries.map((q) => `<li slot=\"heading\">${q}</li>`).join('');\n  }\n\n  stateHtml() {\n    let me = this;\n    return this.state.states.map((s, i) =>\n      `<div data-target=\"${i}\" slot=\"tab\">\n      <button class=\"btn3 commit\" type=\"button\" name=\"commit\">Commit</button>\n      <button class=\"btn3 reset\" type=\"button\" name=\"reset\">Reset</button>\n      <button class=\"btn3 remove\" type=\"button\" name=\"remove\">Remove</button>\n      ${s.map((jsn, j) => `<div class=\"stateContainer ${j <= me.state.activeStates[i] ? 'on' : 'off'}\">\n                           <div class=\"dotC\" data-target=\"${i}\" data-state-index=\"${j}\"><div class=\"dot\"></div></div>\n                           <div class=\"state\">${SifrrStater.prettyJSON(jsn)}</div>\n                           <div class=\"delete\" data-target=\"${i}\" data-state-index=\"${j}\">X</div>\n                           </div>`).join('')}</div>`\n    ).join('');\n  }\n\n  addTarget(query) {\n    if (typeof query !== 'string') query = this.$('#addTargetInput').value;\n    const target = window.document.querySelector(query);\n    if (!target.isSifrr) {\n      window.console.log('Invalid Sifrr Element.', target);\n      return false;\n    }\n    if (!target.state) {\n      window.console.log('Sifrr Element has no state.', target);\n      return false;\n    }\n    const old = target.onStateChange, me = this;\n    target.onStateChange = function() {\n      me.addState(this, this.state);\n      old();\n    };\n    let index = this.state.targets.indexOf(target);\n    if (index > -1) return;\n    this.state.targets.push(target);\n    this.state.queries.push(query);\n    index = this.state.targets.indexOf(target);\n    this.state.states[index] = [JSON.parse(JSON.stringify(target.state))];\n    this.state.activeStates[index] = 0;\n    this.update();\n  }\n\n  removeTarget(el) {\n    const {\n      index\n    } = this.getTarget(el);\n    if (index > -1) {\n      this.state.targets.splice(index, 1);\n      this.state.queries.splice(index, 1);\n      this.state.states.splice(index, 1);\n      this.state.activeStates.splice(index, 1);\n      this.update();\n    }\n  }\n\n  addState(el, state) {\n    const {\n      index\n    } = this.getTarget(el);\n    if (index > -1) {\n      const active = this.state.activeStates[index];\n      const newState = JSON.stringify(state);\n      if (newState !== JSON.stringify(this.state.states[index][active])) {\n        this.state.states[index].splice(active + 1, 0, JSON.parse(newState));\n        this.state.activeStates[index] = active + 1;\n        this.update();\n      }\n    }\n  }\n  deleteState(el, stateN) {\n    const {\n      index\n    } = this.getTarget(el);\n    this.state.states[index].splice(stateN, 1);\n    if (stateN < this.state.activeStates[index]) {\n      this.state.activeStates[index] -= 1;\n    } else if (stateN == this.state.activeStates[index]) {\n      this.state.activeStates[index] -= 1;\n      this.toState(index, this.state.activeStates[index]);\n    }\n    this.update();\n  }\n\n  commit(el) {\n    const {\n      index\n    } = this.getTarget(el);\n    const last_state = this.state.states[index][this.state.states[index].length - 1];\n    this.state.states[index] = [last_state];\n    this.state.activeStates[index] = 0;\n    this.update();\n  }\n\n  commitAll() {\n    const me = this;\n    this.state.targets.forEach(t => me.commit(t));\n    this.update();\n  }\n\n  toState(el, n) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    this.state.activeStates[index] = n;\n    target.state = this.state.states[index][n];\n    this.update();\n  }\n\n  resetToFirstState(el) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    this.toState(target, 0, false);\n    this.state.states[index] = [this.state.states[index][0]];\n    this.update();\n  }\n\n  resetAllToFirstState() {\n    const me = this;\n    this.state.targets.forEach(t => me.resetToFirstState(t));\n    this.update();\n  }\n\n  clear(target) {\n    const {\n      index\n    } = this.getTarget(target);\n    this.state.activeStates[index] = -1;\n    this.state.states[index] = [];\n    this.update();\n  }\n\n  clearAll() {\n    const me = this;\n    this.state.targets.forEach(t => me.clear(t));\n    this.update();\n  }\n\n  saveData() {\n    const me = this;\n    this.storage.clear().then(() => {\n      me.state.queries.forEach((q, i) => {\n        const data = {\n          active: me.state.activeStates[i],\n          states: me.state.states[i]\n        };\n        me.storage.insert(q, data);\n      });\n    });\n  }\n\n  loadData() {\n    const me = this;\n    this.storage.all().then((data) => {\n      let i = 0;\n      for (let q in data) {\n        me.addTarget(q);\n        me.clear(i);\n        data[q].states.forEach(s => me.addState(i, s));\n        me.toState(i, data[q].active);\n        i++;\n      }\n    });\n  }\n\n  getTarget(target) {\n    let index;\n    if (Number.isInteger(target)) {\n      index = target;\n      target = this.state.targets[index];\n    } else {\n      index = this.state.targets.indexOf(target);\n    }\n    return {\n      index: index,\n      target: target\n    };\n  }\n\n  static prettyJSON(json) {\n    json = JSON.stringify(json, null, 4);\n    json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/g, function(match) {\n      let cls = 'number';\n      if (/:$/.test(match)) {\n        cls = 'key';\n        return '<span class=\"' + cls + '\">' + match + '</span>';\n      } else if (/^\"/.test(match)) {\n        cls = 'string';\n      } else if (/true|false/.test(match)) {\n        cls = 'boolean';\n      } else if (/null/.test(match)) {\n        cls = 'null';\n      }\n      return '<span class=\"' + cls + '\">' + match + '</span>';\n    });\n  }\n}\n\nSifrrStater.defaultState = {\n  targets: [],\n  states: [],\n  queries: [],\n  activeStates: []\n};\n\nSifrrDom.register(SifrrStater);\n\nexport default SifrrStater;\n","import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\n\nconst template = SifrrDom.template`\n<style media=\"screen\">\n  ${style}\n</style>\n<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/\\${this.theme}.min.css\">\n<pre class='hljs'>\n  <code id=\"highlight\" data-sifrr-html=\"true\">\n    \\${this.htmlValue}\n  </code>\n</pre>\n<textarea class='hljs' _input=\"\\${this.input}\" _scroll=\"console.log(this)\"></textarea>`;\n\nclass SifrrCodeEditor extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['value', 'theme'];\n  }\n\n  static hljs() {\n    this._hljs = this._hljs || fetch('https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js')\n      .then(resp => resp.text())\n      .then(text => new Function(text)());\n    return this._hljs;\n  }\n\n  onAttributeChange() {\n    this.update();\n  }\n\n  onConnect() {\n    this.constructor.hljs().then(() => this.hljsLoaded());\n\n    const txtarea = this.$('textarea');\n    txtarea.addEventListener('keydown', (e) => {\n      let keyCode = e.keyCode || e.which;\n      this.$('#highlight').style.height = this.$('textarea').height;\n      if (keyCode == 9) {\n        e.preventDefault();\n        const start = txtarea.selectionStart;\n        const end = txtarea.selectionEnd;\n\n        const tabCharacter = '  ';\n        const tabOffset = 2;\n\n        // set textarea value to: text before caret + tab + text after caret\n        txtarea.value = txtarea.value.substring(0, start) + tabCharacter + txtarea.value.substring(end);\n\n        // put caret at right position again\n        txtarea.selectionStart = txtarea.selectionEnd = start + tabOffset;\n      }\n    });\n    txtarea.onscroll = () => {\n      this.$('pre.hljs').scrollTop = txtarea.scrollTop;\n    };\n  }\n\n  input() {\n    SifrrDom.Event.trigger(this, 'input');\n    this.update();\n  }\n\n  hljsLoaded() {\n    this.$('textarea').classList.add('loaded');\n    this.update();\n  }\n\n  get htmlValue() {\n    if (window.hljs) return window.hljs.highlight(this.lang, this.value).value;\n    else return this.value.replace(/</g, '&lt;');\n  }\n\n  get theme() {\n    return this.getAttribute('theme') || 'atom-one-dark';\n  }\n\n  set theme(v) {\n    this.setAttribute('theme', v);\n    this.update();\n  }\n\n  get value() {\n    return this.$('textarea').value;\n  }\n\n  set value(v) {\n    this.$('textarea').value = v;\n    this.update();\n  }\n\n  get lang() {\n    return this.getAttribute('lang') || 'html';\n  }\n}\n\nSifrrDom.register(SifrrCodeEditor);\n\nexport default SifrrCodeEditor;\n","import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\nimport html from './template.html';\nimport '../../sifrr-code-editor/src/sifrrcodeeditor';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n${html}`;\n\nSifrrDom.Event.add('click');\n\nconst defaultShowcase = {\n  id: 1,\n  name: 'Placeholder Element',\n  element: 'sifrr-placeholder',\n  elementUrl: '',\n  isjs: true,\n  variantName: '',\n  variants: [\n    {\n      variantId: 1,\n      variantName: 'variant',\n      style: `#element > * {\n  display: block;\n  background-color: white;\n  margin: auto;\n}`,\n      code: '<sifrr-placeholder>\\n</sifrr-placeholder>',\n      elState: 'return {\\n\\n}'\n    }\n  ]\n};\n\nclass SifrrSingleShowcase extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['url'];\n  }\n\n  onConnect() {\n    this.switchVariant();\n    Sifrr.Dom.Event.addListener('click', '.variant', (e, el) => {\n      if (el.matches('.variant')) this.switchVariant(el.dataset.variantId);\n      if (el.matches('.variant span')) this.deleteVariant(el.parentNode.dataset.variantId);\n    });\n  }\n\n  beforeUpdate() {\n    this.saveVariant();\n    if (this._element !== this.state.element || this._js !== this.state.isjs || this._url !== this.state.elementUrl) {\n      SifrrDom.load(this.state.element, {\n        js: this.state.isjs == 'true',\n        url: this.state.elementUrl ? this.state.elementUrl : undefined\n      }).then(() => this.$('#error').innerText = '').catch(e => this.$('#error').innerText = e.message);\n      this._js = this.state.isjs;\n      this._element = this.state.element;\n      this._url = this.state.elementUrl;\n    }\n    let state;\n    try {\n      state = new Function(this.$('#elState').value).call(this.element());\n    } catch (e) {/**/}\n    if (state && this.element() && this.element().isSifrr && this.element().state !== state) {\n      this.element().state = state;\n    }\n  }\n\n  onAttributeChange(name, _, value) {\n    if (name === 'url') this.url = value;\n  }\n\n  createNewVariant() {\n    const id = Math.max(...this.state.variants.map(s => s.variantId), 0) + 1;\n    const cid = this.state.variants.findIndex(v => v.variantId == this.state.variantId) + 1 || 1;\n    this.state.variants.splice(cid, 0, Object.assign({}, {\n      variantId: id,\n      variantName: this.state.variantName,\n      style: this.state.style,\n      code: this.state.code,\n      elState: this.state.elState\n    }));\n    this.switchVariant(id);\n  }\n\n  deleteVariant(id) {\n    this.state.variants.forEach((s, i) => {\n      if (s.variantId == id) {\n        this.state.variants.splice(i, 1);\n        if (this.state.variantId == id) this.switchVariant((this.state.variants[i] || {}).variantId);\n        else this.update();\n      }\n    });\n  }\n\n  saveVariant() {\n    const id = this.state.variantId;\n    this.state.variants.forEach(s => {\n      if (s.variantId == id) {\n        Object.assign(s, {\n          variantName: this.state.variantName,\n          style: this.state.style,\n          code: this.state.code,\n          elState: this.state.elState\n        });\n      }\n    });\n  }\n\n  switchVariant(id) {\n    Object.assign(this.state, this.variant(id));\n    this.update();\n  }\n\n  updateHtml(e, el) {\n    const html = `<${el.value}></${el.value}>`;\n    this.state = { code: html, element: el.value };\n  }\n\n  element() {\n    return this.$('#element').firstElementChild;\n  }\n\n  variant(id) {\n    return this.state.variants.find(s => s.variantId == id) || this.state.variants[this.state.variants.length - 1];\n  }\n}\n\nSifrrSingleShowcase.defaultState = defaultShowcase;\n\nSifrrDom.register(SifrrSingleShowcase);\n\nexport default SifrrSingleShowcase;\n","import SifrrDom from '@sifrr/dom';\nimport SifrrStorage from '@sifrr/storage';\nimport style from './style.scss';\nimport './singleshowcase';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n<div class=\"container\">\n  <div class=\"flex-column\" id=\"sidemenu\">\n    <div class=\"box\">\n      <h1>Sifrr Showcase</h1>\n      <p id=\"loader\"></p>\n      <input id=\"url\" type=\"text\" placeholder=\"Enter url here...\" name=\"url\" />\n      <button type=\"button\" name=\"loadUrl\" _click=\\${this.loadUrl}>Load from url</button>\n      <p id=\"status\"></p>\n      <span class=\"button\">\n        Upload File\n        <input type=\"file\" name=\"file\" accept=\"application/json\" _input=\"\\${this.loadFile}\" />\n      </span>\n      <button type=\"button\" name=\"saveFile\" _click=\"\\${this.saveFile}\">Save to File</button>\n      <h3>Showcases</h3>\n      <input id=\"showcaseName\" type=\"text\" name=\"showcase\" _input=\\${this.changeName} value=\\${this.state.showcases[this.state.current].name}>\n      <button type=\"button\" name=\"createVariant\" _click=\"\\${this.createShowcase}\">Create new showcase</button>\n      <style>\n        .current {\n          background: #5f616d;\n        }\n      </style>\n      <div id=\"showcases\" data-sifrr-repeat=\"\\${this.state.showcases}\">\n        <li class=\"showcase\" data-showcase-id=\"\\${this.state.key}\" draggable=\"true\">\\${this.state.name}<span>X</span></li>\n      </div>\n    </div>\n  </div>\n  <sifrr-single-showcase _update=\\${this.saveShowcase}></sifrr-single-showcase>\n</div>`;\n\nconst storage = new SifrrStorage({ name: 'showcases', version: '1.0' });\n\nclass SifrrShowcase extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['url'];\n  }\n\n  onAttributeChange(n, _, value) {\n    if (n === 'url') this.url = value;\n  }\n\n  onConnect() {\n    Sifrr.Dom.Event.addListener('click', '.showcase', (e, el) => {\n      if (el.matches('.showcase')) this.switchShowcase(this.getChildIndex(el));\n      if (el.matches('.showcase span')) this.deleteShowcase(this.getChildIndex(el));\n    });\n    this.loadUrl();\n    this.switchShowcase(0);\n    if (window.Sortable) {\n      const me = this;\n      new window.Sortable(this.$('#showcases'), {\n        draggable: 'li',\n        onEnd: (e) => {\n          const o = e.oldIndex, n = e.newIndex;\n          const old = me.state.showcases[o];\n          me.state.showcases[o] = me.state.showcases[n];\n          me.state.showcases[n] = old;\n          const current = me.$('#showcases .current');\n          me.switchShowcase(me.getChildIndex(current));\n        }\n      });\n    }\n  }\n\n  getChildIndex(el) {\n    let i = 0;\n    while((el = el.previousSibling) != null) i++;\n    return i;\n  }\n\n  deleteShowcase(i) {\n    this.state.showcases.splice(i, 1);\n    if (i == this.state.current) this.switchShowcase(this.state.current);\n    else this.switchShowcase(this.state.current - 1);\n  }\n\n  createShowcase() {\n    this.state.showcases.splice(this.state.current, 0, { name: this.$('#showcaseName').value, variants: [] });\n    this.switchShowcase(this.state.current + 1);\n  }\n\n  switchShowcase(i) {\n    this.$('#showcases').children[this.state.current].classList.remove('current');\n    if (!this.state.showcases[i]) i = this.state.showcases.length - 1;\n    this.state = { current: i };\n    this.el.state = this.state.showcases[i];\n    this.$('#showcases').children[i].id = 'showcase' + i;\n    this.$('#showcases').children[i].classList.add('current');\n  }\n\n  saveShowcase() {\n    delete this.el.state.name;\n    this.state.showcases[this.state.current] = Object.assign(this.state.showcases[this.state.current] || {}, this.el.state);\n    if (this._loaded) {\n      this.$('#status').textContent = 'saving locally!';\n      if (this._timeout) clearTimeout(this._timeout);\n      this._timeout = setTimeout(() => {\n        storage.set({ showcases: this.state.showcases, current: this.state.current }).then(() => {\n          this.$('#status').textContent = 'saved locally!';\n        });\n      }, 500);\n    }\n  }\n\n  changeName() {\n    this.state.showcases[this.state.current].name = this.$('#showcaseName').value;\n    this.update();\n  }\n\n  get el() {\n    return this.$('sifrr-single-showcase');\n  }\n\n  set url(v) {\n    this._url = v;\n    if (this.getAttribute('url') !== v) this.setAttribute('url', v);\n    if (this.$('#url').value !== v) this.$('#url').value = v;\n    this.loadUrl();\n  }\n\n  get url() {\n    return this._url;\n  }\n\n  loadUrl() {\n    this._url = this.$('#url').value;\n    window.fetch(this._url).then((resp) => resp.json()).then(v => {\n      this.state.showcases = v.showcases;\n      this.switchShowcase(v.current);\n      this.$('#status').textContent = 'loaded from url!';\n    }).catch((e) => {\n      this.$('#status').textContent = e.message;\n      storage.all().then(v => {\n        this.$('#status').textContent = 'failed to load from url, loaded from storage!';\n        this._loaded = true;\n        if (Array.isArray(v.showcases)) {\n          this.state.showcases = v.showcases;\n          this.switchShowcase(v.current);\n        }\n      });\n    });\n  }\n\n  saveFile() {\n    const blob = new Blob([JSON.stringify(this.state, null, 2)], {\n      type: 'application/json'\n    });\n    const a = document.createElement('a');\n    a.href = URL.createObjectURL(blob);\n    a.download = 'showcases';\n    a.click();\n  }\n\n  loadFile(e, el) {\n    const file = el.files[0];\n    const fr = new FileReader();\n    fr.onload = () => {\n      const json = JSON.parse(fr.result);\n      this.state = json;\n      this.$('#status').textContent = 'loaded from file!';\n    };\n    fr.readAsText(file);\n  }\n}\n\nSifrrShowcase.defaultState = {\n  current: 0,\n  showcases: [{\n    name: 'new'\n  }]\n};\n\nSifrrDom.register(SifrrShowcase);\n\nexport default SifrrShowcase;\n"],"names":["moveAttr","el","attr","dataset","setAttribute","removeAttribute","loadPicture","pic","sifrrLazyLoaded","$$","forEach","s","img","$","SifrrLazyPicture","Sifrr","Dom","Element","extends","HTMLPictureElement","useShadowRoot","observer","_observer","IntersectionObserver","onVisible","rootMargin","entries","entry","isIntersecting","target","unobserve","onConnect","constructor","observe","onDisconnect","SifrrDom","register","template","style","removeExceptOne","elements","name","index","HTMLElement","children","j","length","classList","remove","add","SifrrTabs","observedAttrs","_connected","refresh","setWindowResizeEvent","setSlotChangeEvent","setScrollEvent","onAttributeChange","n","_","v","_attrOptions","JSON","parse","options","Object","assign","menu","content","tabcontainer","menus","assignedNodes","tabs","la","ra","line","num","showArrows","arrowMargin","showMenu","step","tabHeight","showUnderline","loop","animation","animationTime","scrollBreakpoint","usableWidth","clientWidth","margin","totalWidth","tabWidth","setProps","active","display","Array","from","e","setMenuProps","width","offsetWidth","height","left","menuProps","elem","i","_click","last","me","isScrolling","scrollPos","onscroll","requestAnimationFrame","onScroll","total","scrollLeft","per","t","Math","floor","parentElement","clearTimeout","setTimeout","window","addEventListener","_resizing","fxn","state","beforeUpdate","getTabNumber","isNaN","animate","hasPrev","hasNext","next","prev","l","who","what","to","time","type","diff","startTime","frame","currentTime","percent","round","animations","call","linear","easeOut","easeIn","none","defaultState","Event","SifrrStater","storage","SifrrStorage","location","href","addListener","contains","toState","parseInt","stateIndex","deleteState","parentNode","commit","resetToFirstState","removeTarget","showHide","addTargetOnEnter","event","key","addTarget","headingHtml","queries","map","q","join","stateHtml","states","jsn","activeStates","prettyJSON","query","value","document","querySelector","isSifrr","console","log","old","onStateChange","addState","targets","indexOf","push","stringify","update","getTarget","splice","newState","stateN","last_state","commitAll","resetAllToFirstState","clear","clearAll","saveData","then","data","insert","loadData","all","Number","isInteger","json","replace","match","cls","test","SifrrCodeEditor","hljs","_hljs","fetch","resp","text","Function","hljsLoaded","txtarea","keyCode","which","preventDefault","start","selectionStart","end","selectionEnd","tabCharacter","tabOffset","substring","scrollTop","input","trigger","htmlValue","highlight","lang","theme","getAttribute","html","defaultShowcase","id","element","elementUrl","isjs","variantName","variants","variantId","code","elState","SifrrSingleShowcase","switchVariant","matches","deleteVariant","saveVariant","_element","_js","_url","load","js","url","undefined","innerText","catch","message","createNewVariant","max","cid","findIndex","variant","updateHtml","firstElementChild","find","version","SifrrShowcase","switchShowcase","getChildIndex","deleteShowcase","loadUrl","Sortable","draggable","onEnd","o","oldIndex","newIndex","showcases","current","previousSibling","createShowcase","saveShowcase","_loaded","textContent","_timeout","set","changeName","isArray","saveFile","blob","Blob","a","createElement","URL","createObjectURL","download","click","loadFile","file","files","fr","FileReader","onload","result","readAsText"],"mappings":"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"}