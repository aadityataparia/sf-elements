{"version":3,"file":"sifrrelements.js","sources":["../elements/sifrr-lazy-picture/src/sifrrlazypicture.js","../elements/sifrr-stater/src/sifrrstater.js","../src/sifrrelements.js"],"sourcesContent":["import SifrrDom from '@sifrr/dom';\n\nfunction moveAttr(el, attr) {\n  if (!el.dataset[attr]) return;\n  el.setAttribute(attr, el.dataset[attr]);\n  el.removeAttribute(`data-${attr}`);\n}\n\nfunction loadPicture(pic) {\n  if (pic.sifrrLazyLoaded) return false;\n  pic.sifrrLazyLoaded = true;\n  pic.$$('source', false).forEach((s) => {\n    moveAttr(s, 'srcset');\n  });\n  const img = pic.$('img', false);\n  moveAttr(img, 'src');\n  return true;\n}\n\n//Sifrr Lazy Loading Picture\nclass SifrrLazyPicture extends Sifrr.Dom.Element.extends(HTMLPictureElement) {\n  static useShadowRoot() {\n    return true;\n  }\n\n  static get observer() {\n    this._observer = this._observer || new IntersectionObserver(this.onVisible, {\n      rootMargin: this.rootMargin\n    });\n    return this._observer;\n  }\n\n  static onVisible(entries) {\n    entries.forEach(entry => {\n      if (entry.isIntersecting) {\n        SifrrLazyPicture.observer.unobserve(entry.target);\n        loadPicture(entry.target);\n      }\n    });\n  }\n\n  onConnect() {\n    this.sifrrLazyLoaded = false;\n    this.constructor.observer.observe(this);\n  }\n\n  onDisconnect() {\n    this.constructor.observer.unobserve(this);\n  }\n}\n\nSifrrLazyPicture.rootMargin = '0px 0px 200px 0px';\n\nif (window) SifrrDom.register(SifrrLazyPicture, { extends: 'picture' });\n\nexport default SifrrLazyPicture;\n","import SifrrDom from '@sifrr/dom'\nimport SifrrTabs from '../../sifrr-tabs/src/sifrrtabs'\nimport style from './style.scss'\n\nconst template = Sifrr.Dom.template`<style>\n  ${style}\n</style>\n<div id=\"showHide\" $click={{this.showHide}}></div>\n<sifrr-tabs options='{\"tabHeight\": \"calc(100vh - 132px)\"}' data-sifrr-html=\"true\">\n  {{ this.headingHtml() }}\n  {{ this.stateHtml() }}\n</sifrr-tabs>\n<footer>\n  <input $keyup={{this.addTargetOnEnter}} id=\"addTargetInput\" type=\"text\" name=\"addTargetInput\" value=\"\" placeholder=\"Enter css selector query of target\">\n  <button $click={{this.addTarget}} class=\"btn3\" type=\"button\" name=\"addTargetButton\">Add Taget</button>\n  <button $click={{this.commitAll}} class=\"btn3\" type=\"button\" name=\"commitAll\">Commit All</button>\n  <button $click={{this.resetAllToFirstState}} class=\"btn3\" type=\"button\" name=\"resetAll\">Reset All</button>\n  <button $click={{this.saveData}} class=\"btn3\" type=\"button\" name=\"saveData\">Save Data</button>\n  <button $click={{this.loadData}} class=\"btn3\" type=\"button\" name=\"loadData\">Load Data</button>\n  <button $click={{this.clearAll}} class=\"btn3\" type=\"button\" name=\"clearAll\">Remove All</button>\n</footer>`;\n\nSifrr.Dom.Event.add('click');\nSifrr.Dom.Event.add('keyup');\nclass SifrrStater extends Sifrr.Dom.Element {\n  static get template() {\n    return template;\n  }\n\n  onConnect() {\n    let me = this;\n    this.storage = new Sifrr.Storage({\n      name: window.location.href\n    });\n    Sifrr.Dom.Event.addListener('click', '.state', function(e, el) {\n      el.classList.contains('open') ? el.classList.remove('open') : el.classList.add('open');\n    });\n    Sifrr.Dom.Event.addListener('click', '.dotC', function(e, target, el) {\n      me.toState(parseInt(el.dataset.target), parseInt(el.dataset.stateIndex));\n    });\n    Sifrr.Dom.Event.addListener('click', '.delete', function(e, el) {\n      me.deleteState(parseInt(el.dataset.target), parseInt(el.dataset.stateIndex));\n    });\n    Sifrr.Dom.Event.addListener('click', '.commit', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.commit(i);\n    });\n    Sifrr.Dom.Event.addListener('click', '.reset', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.resetToFirstState(i);\n    });\n    Sifrr.Dom.Event.addListener('click', '.remove', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.removeTarget(i);\n    });\n    Sifrr.Dom.Element.onStateChange = function(target) {\n      me.addState(target, target.state);\n    }\n  }\n\n  showHide() {\n    this.classList.contains('show') ? this.classList.remove('show') : this.classList.add('show');\n  }\n\n  addTargetOnEnter(event) {\n    if (event.key === 'Enter') {\n      this.addTarget();\n    }\n  }\n\n  headingHtml() {\n    return this.state.queries.map((q) => `<li slot=\"heading\">${q}</li>`).join('');\n  }\n\n  stateHtml() {\n    let me = this;\n    return this.state.states.map((s, i) =>\n      `<div data-target=\"${i}\" slot=\"tab\">\n      <button class=\"btn3 commit\" type=\"button\" name=\"commit\">Commit</button>\n      <button class=\"btn3 reset\" type=\"button\" name=\"reset\">Reset</button>\n      <button class=\"btn3 remove\" type=\"button\" name=\"remove\">Remove</button>\n      ${s.map((jsn, j) => `<div class=\"stateContainer ${j <= me.state.activeStates[i] ? 'on' : 'off'}\">\n                           <div class=\"dotC\" data-target=\"${i}\" data-state-index=\"${j}\"><div class=\"dot\"></div></div>\n                           <div class=\"state\">${SifrrStater.prettyJSON(jsn)}</div>\n                           <div class=\"delete\" data-target=\"${i}\" data-state-index=\"${j}\">X</div>\n                           </div>`).join('')}</div>`\n    ).join('');\n  }\n\n  addTarget(query) {\n    if (typeof query !== 'string') query = this.$('#addTargetInput').value;\n    const target = window.document.querySelector(query);\n    if (!target.isSifrr) {\n      console.log(\"Invalid Sifrr Element.\", target);\n      return false;\n    }\n    if (!target.state) {\n      console.log(\"Sifrr Element has no state.\", target);\n      return false;\n    }\n    let index = this.state.targets.indexOf(target);\n    if (index > -1) return;\n    this.state.targets.push(target);\n    this.state.queries.push(query);\n    index = this.state.targets.indexOf(target);\n    this.state.states[index] = [JSON.parse(JSON.stringify(target.state))];\n    this.state.activeStates[index] = 0;\n    this.update();\n  }\n\n  removeTarget(el) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    if (index > -1) {\n      this.state.targets.splice(index, 1);\n      this.state.queries.splice(index, 1);\n      this.state.states.splice(index, 1);\n      this.state.activeStates.splice(index, 1);\n      this.update();\n    }\n  }\n\n  addState(el, state) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    if (index > -1) {\n      const active = this.state.activeStates[index];\n      const newState = JSON.stringify(state);\n      if (newState !== JSON.stringify(this.state.states[index][active])) {\n        this.state.states[index].splice(active + 1, 0, JSON.parse(newState));\n        this.state.activeStates[index] = active + 1;\n        this.update();\n      }\n    }\n  }\n  deleteState(el, stateN) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    this.state.states[index].splice(stateN, 1);\n    if (stateN < this.state.activeStates[index]) {\n      this.state.activeStates[index] -= 1;\n    } else if (stateN == this.state.activeStates[index]) {\n      this.state.activeStates[index] -= 1;\n      this.toState(index, this.state.activeStates[index]);\n    }\n    this.update();\n  }\n\n  commit(el) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    const last_state = this.state.states[index][this.state.states[index].length - 1];\n    this.state.states[index] = [last_state];\n    this.state.activeStates[index] = 0;\n    this.update();\n  }\n\n  commitAll() {\n    const me = this;\n    this.state.targets.forEach(t => me.commit(t));\n    this.update();\n  }\n\n  toState(el, n) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    const active = this.state.activeStates[index];\n    this.state.activeStates[index] = n;\n    target.state = this.state.states[index][n];\n    this.update();\n  }\n\n  resetToFirstState(el) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    this.toState(target, 0, false);\n    this.state.states[index] = [this.state.states[index][0]];\n    this.update();\n  }\n\n  resetAllToFirstState() {\n    const me = this;\n    this.state.targets.forEach(t => me.resetToFirstState(t));\n    this.update();\n  }\n\n  clear(target) {\n    const {\n      index\n    } = this.getTarget(target);\n    this.state.activeStates[index] = -1;\n    this.state.states[index] = [];\n    this.update();\n  }\n\n  clearAll() {\n    const me = this;\n    this.state.targets.forEach(t => me.clear(t));\n    this.update();\n  }\n\n  saveData() {\n    const me = this;\n    this.storage.clear().then(() => {\n      me.state.queries.forEach((q, i) => {\n        const data = {\n          active: me.state.activeStates[i],\n          states: me.state.states[i]\n        }\n        me.storage.insert(q, data);\n      });\n    });\n  }\n\n  loadData() {\n    const me = this;\n    this.storage.data().then((data) => {\n      let i = 0;\n      for (let q in data) {\n        me.addTarget(q);\n        me.clear(i);\n        data[q].states.forEach(s => me.addState(i, s));\n        me.toState(i, data[q].active);\n        i++;\n      }\n    });\n  }\n\n  getTarget(target) {\n    let index;\n    if (Number.isInteger(target)) {\n      index = target;\n      target = this.state.targets[index]\n    } else {\n      index = this.state.targets.indexOf(target);\n    }\n    return {\n      index: index,\n      target: target\n    };\n  }\n\n  static prettyJSON(json) {\n    json = JSON.stringify(json, null, 4);\n    json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g, function(match) {\n      var cls = 'number';\n      if (/:$/.test(match)) {\n        cls = 'key';\n        return '<span class=\"' + cls + '\">' + match + '</span>';\n      } else if (/^\"/.test(match)) {\n        cls = 'string';\n      } else if (/true|false/.test(match)) {\n        cls = 'boolean';\n      } else if (/null/.test(match)) {\n        cls = 'null';\n      }\n      return '<span class=\"' + cls + '\">' + match + '</span>';\n    });\n  }\n}\n\nSifrrStater.defaultState = {\n  targets: [],\n  states: [],\n  queries: [],\n  activeStates: []\n}\n\nif (window) SifrrDom.register(SifrrStater, { extends: 'picture' });\n\nexport default SifrrStater;\n","module.exports = {\n  SifrrLazyPicture: require('../elements/sifrr-lazy-picture/src/sifrrlazypicture'),\n  SifrrStater: require('../elements/sifrr-stater/src/sifrrstater'),\n  SifrrTabs: require('../elements/sifrr-tabs/src/sifrrtabs')\n};\n"],"names":["moveAttr","el","attr","dataset","setAttribute","removeAttribute","loadPicture","pic","sifrrLazyLoaded","$$","forEach","s","img","$","SifrrLazyPicture","Sifrr","Dom","Element","extends","HTMLPictureElement","useShadowRoot","observer","_observer","IntersectionObserver","onVisible","rootMargin","entries","entry","isIntersecting","unobserve","target","onConnect","constructor","observe","onDisconnect","window","SifrrDom","register","template","style","Event","add","SifrrStater","me","storage","Storage","name","location","href","addListener","e","classList","contains","remove","toState","parseInt","stateIndex","deleteState","i","parentNode","commit","resetToFirstState","removeTarget","onStateChange","addState","state","showHide","addTargetOnEnter","event","key","addTarget","headingHtml","queries","map","q","join","stateHtml","states","jsn","j","activeStates","prettyJSON","query","value","document","querySelector","isSifrr","console","log","index","targets","indexOf","push","JSON","parse","stringify","update","getTarget","splice","active","newState","stateN","last_state","length","commitAll","t","n","resetAllToFirstState","clear","clearAll","saveData","then","data","insert","loadData","Number","isInteger","json","replace","match","cls","test","defaultState","require$$0","require$$1","SifrrTabs","require$$2"],"mappings":"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"}