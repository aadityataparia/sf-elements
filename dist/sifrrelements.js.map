{"version":3,"file":"sifrrelements.js","sources":["../elements/sifrr-lazy-img/src/sifrrlazyimg.js","../elements/sifrr-lazy-picture/src/sifrrlazypicture.js","../helpers/animate.js","../elements/sifrr-tabs/src/sifrrtabs.js","../elements/sifrr-stater/src/sifrrstater.js","../elements/sifrr-code-editor/src/sifrrcodeeditor.js","../elements/sifrr-showcase/src/singleshowcase.js","../elements/sifrr-showcase/src/sifrrshowcase.js","../elements/sifrr-progress-round/src/sifrrprogressround.js","../elements/sifrr-shimmer/src/sifrrshimmer.js","../src/sifrrelements.js"],"sourcesContent":["import SifrrDom from '@sifrr/dom';\n\nfunction moveAttr(el, attr) {\n  if (!el.dataset[attr]) return;\n  el.setAttribute(attr, el.dataset[attr]);\n  el.removeAttribute(`data-${attr}`);\n}\n\nfunction loadPicture(img) {\n  moveAttr(img, 'src');\n  moveAttr(img, 'srcset');\n  return true;\n}\n\nclass SifrrLazyImg extends Sifrr.Dom.Element.extends(HTMLImageElement) {\n  static get observer() {\n    this._observer = this._observer || new IntersectionObserver(this.onVisible, {\n      rootMargin: this.rootMargin\n    });\n    return this._observer;\n  }\n\n  static onVisible(entries) {\n    entries.forEach(entry => {\n      if (entry.isIntersecting && !entry.target._loaded) {\n        entry.target._loaded = true;\n        entry.target.beforeLoad();\n        loadPicture(entry.target);\n        this.unobserve(entry.target);\n        entry.target.afterLoad();\n      }\n    });\n  }\n\n  onConnect() {\n    this.reload();\n  }\n\n  reload() {\n    this._loaded = false;\n    this.constructor.observer.observe(this);\n  }\n\n  beforeLoad() {}\n  afterLoad() {}\n\n  onDisconnect() {\n    this.constructor.observer.unobserve(this);\n  }\n}\n\nSifrrLazyImg.rootMargin = '0px 0px 50px 0px';\n\nSifrrDom.register(SifrrLazyImg, { extends: 'img' });\n\nexport default SifrrLazyImg;\n","import SifrrDom from '@sifrr/dom';\n\nfunction moveAttr(el, attr) {\n  if (!el.dataset[attr]) return;\n  el.setAttribute(attr, el.dataset[attr]);\n  el.removeAttribute(`data-${attr}`);\n}\n\nfunction loadPicture(pic) {\n  pic.$$('source', false).forEach((s) => {\n    moveAttr(s, 'srcset');\n  });\n  const img = pic.$('img', false);\n  moveAttr(img, 'src');\n  moveAttr(img, 'srcset');\n  return true;\n}\n\nclass SifrrLazyPicture extends Sifrr.Dom.Element.extends(HTMLPictureElement) {\n  static get observer() {\n    this._observer = this._observer || new IntersectionObserver(this.onVisible, {\n      rootMargin: this.rootMargin\n    });\n    return this._observer;\n  }\n\n  static onVisible(entries) {\n    entries.forEach(entry => {\n      if (entry.isIntersecting && !entry.target._loaded) {\n        entry.target._loaded = true;\n        entry.target.beforeLoad();\n        loadPicture(entry.target);\n        this.unobserve(entry.target);\n        entry.target.afterLoad();\n      }\n    });\n  }\n\n  onConnect() {\n    this.reload();\n  }\n\n  reload() {\n    this._loaded = false;\n    this.constructor.observer.observe(this);\n  }\n\n  beforeLoad() {}\n  afterLoad() {}\n\n  onDisconnect() {\n    this.constructor.observer.unobserve(this);\n  }\n}\n\nSifrrLazyPicture.rootMargin = '0px 0px 50px 0px';\n\nSifrrDom.register(SifrrLazyPicture, { extends: 'picture' });\n\nexport default SifrrLazyPicture;\n","const types = {\n    linear: [0, 0, 1, 1],\n    ease: [.25, .1, .25, 1],\n    easeIn: [.42, 0, 1, 1],\n    easeOut: [0, 0, .58, 1],\n    easeInOut: [.42, 0, .58, 1]\n  },\n  beziers = {},\n  digitRgx = /(\\d+)/,\n  noop = () => {};\n\nclass Bezier {\n  constructor(args){\n    const key = args.join('_');\n    if (!beziers[key]) {\n      this.setProps(...args);\n      beziers[key] = this.final.bind(this);\n    }\n    return beziers[key];\n  }\n\n  setProps(x1, y1, x2, y2) {\n    let props = {\n      x1: x1,\n      y1: y1,\n      x2: x2,\n      y2: y2,\n      A: (aA1, aA2) => 1.0 - 3.0 * aA2 + 3.0 * aA1,\n      B: (aA1, aA2) => 3.0 * aA2 - 6.0 * aA1,\n      C: (aA1) => 3.0 * aA1,\n      CalcBezier: (aT, aA1, aA2) => ((this.A(aA1, aA2)*aT + this.B(aA1, aA2))*aT + this.C(aA1))*aT,\n      GetSlope: (aT, aA1, aA2) => 3.0 * this.A(aA1, aA2)*aT*aT + 2.0 * this.B(aA1, aA2) * aT + this.C(aA1)\n    };\n    Object.assign(this, props);\n  }\n\n  final(x) {\n    if (this.x1 == this.y1 && this.x2 == this.y2) return x;\n    return this.CalcBezier(this.GetTForX(x), this.y1, this.y2);\n  }\n\n  GetTForX(xx) {\n    let t = xx;\n    for (let i = 0; i < 4; ++i) {\n      let slope = this.GetSlope(t, this.x1, this.x2);\n      if (slope == 0.0) return t;\n      let x = this.CalcBezier(t, this.x1, this.x2) - xx;\n      t -= x / slope;\n    }\n    return t;\n  }\n}\n\nfunction animateOne({\n  target,\n  prop,\n  from,\n  to,\n  time = 300,\n  type = 'ease',\n  onUpdate = noop,\n  round = false\n} = {}) {\n  const toSplit = to.toString().split(digitRgx), l = toSplit.length, raw = [], fromNums = [], diffs = [];\n  const fromSplit = (from || target[prop] || '').toString().split(digitRgx);\n  for (let i = 0; i < l; i++) {\n    const n = Number(toSplit[i]);\n    if (isNaN(n) || !toSplit[i]) raw.push(toSplit[i]);\n    else {\n      fromNums.push(Number(fromSplit[i]));\n      diffs.push(n - (Number(fromSplit[i]) || 0));\n    }\n  }\n  const bezier = new Bezier(types[type] || type);\n\n  return new Promise(res => {\n    let startTime;\n    function frame(currentTime) {\n      startTime = startTime || currentTime;\n      const percent = (currentTime - startTime) / time, bper = bezier(percent);\n      if (percent >= 1) {\n        target[prop] = to;\n        return res();\n      }\n      const next = diffs.map((d, i) => {\n        if (round) return Math.round(bper * d + (fromNums[i] || 0));\n        return bper * d + (fromNums[i] || 0);\n      });\n      const val = String.raw({ raw }, ...next);\n      target[prop] = Number(val) || val;\n      onUpdate(target, prop, val);\n      window.requestAnimationFrame(frame);\n    }\n    window.requestAnimationFrame(frame);\n  });\n}\n\nfunction animate({\n  targets,\n  target,\n  to,\n  time,\n  type,\n  onUpdate,\n  round\n} = {}) {\n  targets = targets ? Array.from(targets) : [target];\n  function iterate(target, props) {\n    const promises = [];\n    for (let prop in props) {\n      let from, final;\n      if (Array.isArray(props[prop])) [from, final] = props[prop];\n      else final = props[prop];\n      promises.push(animateOne({\n        target,\n        prop,\n        to: final,\n        time,\n        type,\n        from,\n        onUpdate,\n        round\n      }));\n    }\n    return Promise.all(promises);\n  }\n  return Promise.all(targets.map(target => iterate(target, to)));\n}\n\nanimate.types = types;\n\nfunction wait(time = 0) {\n  return new Promise(res => setTimeout(res, time));\n}\n\nexport default {\n  animate,\n  types,\n  wait\n};\nexport {\n  animate,\n  types,\n  wait\n};\n","import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\nimport { animate } from '../../../helpers/animate';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n<style>\n  .tabs {\n    height: \\${this.options ? this.options.tabHeight : 'auto'};\n    width: \\${this.totalWidth + 'px'};\n  }\n  .headings {\n    display: \\${this.headingDisplay};\n    background: \\${this.options ? this.options.background : 'transparent'};\n  }\n  .content *::slotted([slot=\"tab\"]) {\n    width: \\${this.tabWidth + 'px'};\n    margin: 0 \\${this.options ? this.options.arrowMargin + 'px' : 0};\n  }\n  .arrow {\n    width: \\${this.options ? this.options.arrowWidth : '20px'};\n  }\n</style>\n<div class=\"headings\">\n  <ul>\n    <slot name=\"heading\">\n    </slot>\n  </ul>\n  <div class=\"underline\"></div>\n</div>\n<div class=\"content\">\n  <div class=\"arrow l\" _click=\\${this.prev}>\n    <span></span>\n  </div>\n  <div class=\"arrow r\" _click=\\${this.next}>\n    <span></span>\n  </div>\n  <div class=\"tabs\">\n    <slot name=\"tab\">\n    </slot>\n  </div>\n</div>`;\n\nfunction removeExceptOne(elements, name, index) {\n  if (elements instanceof HTMLElement) elements = elements.children;\n  for (let j = 0; j < elements.length; j++) {\n    j !== index && elements[j] !== index ? elements[j].classList.remove(name) : elements[j].classList.add(name);\n  }\n}\n\n//Simple tabs\nclass SifrrTabs extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['options'];\n  }\n\n  onConnect() {\n    this._connected = true;\n    this.refresh();\n    this.setWindowResizeEvent();\n    this.setSlotChangeEvent();\n    this.setScrollEvent();\n  }\n\n  onAttributeChange(n, _, v) {\n    if (n === 'options') {\n      this._attrOptions = JSON.parse(v || '{}');\n      if (this._connected) this.refresh();\n    }\n  }\n\n  refresh() {\n    this.options = Object.assign({\n      menu: this.$('.headings ul'),\n      content: this.$('.content'),\n      tabcontainer: this.$('.tabs'),\n      menus: this.$('slot[name=heading]').assignedNodes(),\n      tabs: this.$('slot[name=tab]').assignedNodes(),\n      la: this.$('.arrow.l'),\n      ra: this.$('.arrow.r'),\n      line: this.$('.underline'),\n      num: 1,\n      showArrows: false,\n      arrowMargin: 0,\n      arrowWidth: '20px',\n      showMenu: true,\n      step: 1,\n      tabHeight: 'auto',\n      showUnderline: true,\n      loop: false,\n      animation: 'ease',\n      animationTime: 300,\n      scrollBreakpoint: 0.2,\n      background: '#714cfe'\n    }, this._attrOptions);\n    if (!this.options.tabs || this.options.tabs.length < 1) return;\n    this.usableWidth = this.clientWidth;\n    this.totalWidth = this.usableWidth / this.options.num * this.options.tabs.length;\n    this.usableWidth -= 2 * this.options.arrowMargin;\n    this.tabWidth = this.usableWidth / this.options.num;\n    this.setProps();\n    this.update();\n    this.active = this.active || 0;\n  }\n\n  setProps() {\n    if (!this.options.showArrows) {\n      this.options.la.style.display = 'none';\n      this.options.ra.style.display = 'none';\n    } else {\n      this.options.la.style.display = 'block';\n      this.options.ra.style.display = 'block';\n      Array.from(this.options.tabs).forEach(e => e.style.margin = `0 ${this.margin}px`);\n    }\n    if (!this.options.showUnderline) this.options.line.style.display = 'none';\n    if (this.options.showMenu) {\n      this.headingDisplay = 'block';\n      this.options.line.style.width = this.options.menus[0].offsetWidth + 'px';\n      this.setMenuProps();\n    } else this.headingDisplay = 'none';\n  }\n\n  setMenuProps() {\n    let left = 0;\n    this.options.menuProps = [];\n    Array.from(this.options.menus).forEach((elem, i) => {\n      this.options.menuProps[i] = {\n        width: elem.offsetWidth,\n        left: left\n      };\n      left += elem.offsetWidth;\n      elem._click = () => this.active = i;\n    });\n    const last = this.options.menuProps[this.options.menus.length - 1];\n    this.options.menu.style.width = last.left + last.width + 5 * this.options.menus.length + 'px';\n    const active = this.options.menuProps[this.active];\n    this.options.line.style.left = active.left + 'px';\n    this.options.line.style.width = active.width + 'px';\n  }\n\n  setScrollEvent() {\n    let me = this,\n      isScrolling,\n      scrollPos;\n    this.options.content.onscroll = () => requestAnimationFrame(onScroll);\n\n    function onScroll() {\n      scrollPos = me.active;\n      const total = me.options.content.scrollLeft / me.tabWidth;\n      const per = total % 1;\n      const t = Math.floor(total);\n      if (me.options.showMenu) {\n        const left = me.options.menuProps[t].left * (1 - per) + (me.options.menuProps[t + 1] || {\n          left: 0\n        }).left * per;\n        const width = me.options.menuProps[t].width * (1 - per) + (me.options.menuProps[t + 1] || {\n          width: 0\n        }).width * per;\n        me.options.line.style.left = left + 'px';\n        me.options.line.style.width = width + 'px';\n        me.options.menu.parentElement.scrollLeft = left + (width - me.tabWidth) / 2;\n      }\n      clearTimeout(isScrolling);\n      isScrolling = setTimeout(function() {\n        if (total - scrollPos < -me.options.scrollBreakpoint) {\n          me.active = t;\n        } else if (total - scrollPos > +me.options.scrollBreakpoint) {\n          me.active = t + 1;\n        } else {\n          me.active = scrollPos;\n        }\n      }, 66);\n    }\n  }\n\n  setWindowResizeEvent() {\n    window.addEventListener('resize', () => requestAnimationFrame(this.refresh.bind(this)));\n  }\n\n  setSlotChangeEvent() {\n    const me = this;\n    const fxn = () => {\n      me.options.menus = me.$$('slot')[0].assignedNodes();\n      me.options.tabs = me.$$('slot')[1].assignedNodes();\n      me.refresh();\n    };\n    this.$$('slot')[0].addEventListener('slotchange', fxn);\n    this.$$('slot')[1].addEventListener('slotchange', fxn);\n  }\n\n  get active() {\n    return this.state ? this.state.active : 0;\n  }\n\n  set active(i) {\n    this.state = {\n      active: i\n    };\n  }\n\n  beforeUpdate() {\n    if (!this.options) return;\n    let i = this.state.active;\n    i = this.getTabNumber(i);\n    if (!isNaN(i) && i !== this.state.active) return this.active = i;\n    animate({\n      target: this.options.content,\n      to: {\n        scrollLeft: i * (this.tabWidth + 2 * this.options.arrowMargin)\n      },\n      time: this.options.animationTime,\n      type: this.options.animation\n    });\n    removeExceptOne(this.options.tabs, 'active', i);\n    removeExceptOne(this.options.tabs, 'prev', this.getTabNumber(i - 1));\n    removeExceptOne(this.options.tabs, 'next', this.getTabNumber(i + 1));\n    removeExceptOne(this.options.menus, 'active', i);\n    removeExceptOne(this.options.menus, 'prev', this.getTabNumber(i - 1));\n    removeExceptOne(this.options.menus, 'next', this.getTabNumber(i + 1));\n    if (this.options.showArrows) {\n      this.options.la.style.display = this.hasPrev() || this.options.loop ? 'block' : 'none';\n      this.options.ra.style.display = this.hasNext() || this.options.loop ? 'block' : 'none';\n    }\n  }\n\n  next() {\n    this.active = this.state.active + this.options.step;\n  }\n\n  hasNext() {\n    if (this.active === this.options.tabs.length - this.options.num) return false;\n    return true;\n  }\n\n  prev() {\n    this.active = this.state.active - this.options.step;\n  }\n\n  hasPrev() {\n    if (this.active === 0) return false;\n    return true;\n  }\n\n  getTabNumber(i) {\n    const l = this.options.tabs.length;\n    const num = this.options.num;\n    i = i < 0 ? i + l : i % l;\n    if (i + num - 1 >= l) {\n      i = this.options.loop ? 0 : l - num;\n    }\n    return i;\n  }\n}\n\nSifrrTabs.defaultState = { active: 0 };\n\nSifrrDom.register(SifrrTabs);\nexport default SifrrTabs;\n","import SifrrDom from '@sifrr/dom';\nimport SifrrStorage from '@sifrr/storage';\nimport '../../sifrr-tabs/src/sifrrtabs';\nimport style from './style.scss';\n\nconst template = SifrrDom.template`<style>\n  ${style}\n</style>\n<div id=\"showHide\" _click=\\${this.showHide}></div>\n<sifrr-tabs options='{\"tabHeight\": \"calc(100vh - 132px)\"}' data-sifrr-html=\"true\">\n  \\${ this.headingHtml() }\n  \\${ this.stateHtml() }\n</sifrr-tabs>\n<footer>\n  <input _keyup=\\${this.addTargetOnEnter} id=\"addTargetInput\" type=\"text\" name=\"addTargetInput\" value=\"\" placeholder=\"Enter css selector query of target\">\n  <button _click=\\${this.addTarget} class=\"btn3\" type=\"button\" name=\"addTargetButton\">Add Taget</button>\n  <button _click=\\${this.commitAll} class=\"btn3\" type=\"button\" name=\"commitAll\">Commit All</button>\n  <button _click=\\${this.resetAllToFirstState} class=\"btn3\" type=\"button\" name=\"resetAll\">Reset All</button>\n  <button _click=\\${this.saveData} class=\"btn3\" type=\"button\" name=\"saveData\">Save Data</button>\n  <button _click=\\${this.loadData} class=\"btn3\" type=\"button\" name=\"loadData\">Load Data</button>\n  <button _click=\\${this.clearAll} class=\"btn3\" type=\"button\" name=\"clearAll\">Remove All</button>\n</footer>`;\n\nSifrrDom.Event.add('click');\nSifrrDom.Event.add('keyup');\nclass SifrrStater extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  onConnect() {\n    let me = this;\n    this.storage = new SifrrStorage({\n      name: 'sifrr-stater' + window.location.href\n    });\n    SifrrDom.Event.addListener('click', '.state', function(e, el) {\n      el.classList.contains('open') ? el.classList.remove('open') : el.classList.add('open');\n    });\n    SifrrDom.Event.addListener('click', '.dotC', function(e, target, el) {\n      me.toState(parseInt(el.dataset.target), parseInt(el.dataset.stateIndex));\n    });\n    SifrrDom.Event.addListener('click', '.delete', function(e, el) {\n      me.deleteState(parseInt(el.dataset.target), parseInt(el.dataset.stateIndex));\n    });\n    SifrrDom.Event.addListener('click', '.commit', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.commit(i);\n    });\n    SifrrDom.Event.addListener('click', '.reset', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.resetToFirstState(i);\n    });\n    SifrrDom.Event.addListener('click', '.remove', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.removeTarget(i);\n    });\n  }\n\n  showHide() {\n    this.classList.contains('show') ? this.classList.remove('show') : this.classList.add('show');\n  }\n\n  addTargetOnEnter(event) {\n    if (event.key === 'Enter') {\n      this.addTarget();\n    }\n  }\n\n  headingHtml() {\n    return this.state.queries.map((q) => `<li slot=\"heading\">${q}</li>`).join('');\n  }\n\n  stateHtml() {\n    let me = this;\n    return this.state.states.map((s, i) =>\n      `<div data-target=\"${i}\" slot=\"tab\">\n      <button class=\"btn3 commit\" type=\"button\" name=\"commit\">Commit</button>\n      <button class=\"btn3 reset\" type=\"button\" name=\"reset\">Reset</button>\n      <button class=\"btn3 remove\" type=\"button\" name=\"remove\">Remove</button>\n      ${s.map((jsn, j) => `<div class=\"stateContainer ${j <= me.state.activeStates[i] ? 'on' : 'off'}\">\n                           <div class=\"dotC\" data-target=\"${i}\" data-state-index=\"${j}\"><div class=\"dot\"></div></div>\n                           <div class=\"state\">${SifrrStater.prettyJSON(jsn)}</div>\n                           <div class=\"delete\" data-target=\"${i}\" data-state-index=\"${j}\">X</div>\n                           </div>`).join('')}</div>`\n    ).join('');\n  }\n\n  addTarget(query) {\n    if (typeof query !== 'string') query = this.$('#addTargetInput').value;\n    let target = window.document.querySelector(query);\n    if (!target.isSifrr) {\n      window.console.log('Invalid Sifrr Element.', target);\n      return false;\n    }\n    if (!target.state) {\n      window.console.log('Sifrr Element has no state.', target);\n      return false;\n    }\n    const old = target.onStateChange, me = this;\n    target.onStateChange = function() {\n      me.addState(this, this.state);\n      old.call(this);\n    };\n    let index = this.state.targets.indexOf(target);\n    if (index > -1) return;\n    this.state.targets.push(target);\n    this.state.queries.push(query);\n    index = this.state.targets.indexOf(target);\n    this.state.states[index] = [JSON.parse(JSON.stringify(target.state))];\n    this.state.activeStates[index] = 0;\n    this.update();\n  }\n\n  removeTarget(el) {\n    const {\n      index\n    } = this.getTarget(el);\n    if (index > -1) {\n      this.state.targets.splice(index, 1);\n      this.state.queries.splice(index, 1);\n      this.state.states.splice(index, 1);\n      this.state.activeStates.splice(index, 1);\n      this.update();\n    }\n  }\n\n  addState(el, state) {\n    const {\n      index\n    } = this.getTarget(el);\n    if (index > -1) {\n      const active = this.state.activeStates[index];\n      const newState = JSON.stringify(state);\n      if (newState !== JSON.stringify(this.state.states[index][active])) {\n        this.state.states[index].splice(active + 1, 0, JSON.parse(newState));\n        this.state.activeStates[index] = active + 1;\n        this.update();\n      }\n    }\n  }\n  deleteState(el, stateN) {\n    const {\n      index\n    } = this.getTarget(el);\n    this.state.states[index].splice(stateN, 1);\n    if (stateN < this.state.activeStates[index]) {\n      this.state.activeStates[index] -= 1;\n    } else if (stateN == this.state.activeStates[index]) {\n      this.state.activeStates[index] -= 1;\n      this.toState(index, this.state.activeStates[index]);\n    }\n    this.update();\n  }\n\n  commit(el) {\n    const {\n      index\n    } = this.getTarget(el);\n    const last_state = this.state.states[index][this.state.states[index].length - 1];\n    this.state.states[index] = [last_state];\n    this.state.activeStates[index] = 0;\n    this.update();\n  }\n\n  commitAll() {\n    const me = this;\n    this.state.targets.forEach(t => me.commit(t));\n    this.update();\n  }\n\n  toState(el, n) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    this.state.activeStates[index] = n;\n    target.state = this.state.states[index][n];\n    this.update();\n  }\n\n  resetToFirstState(el) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    this.toState(target, 0, false);\n    this.state.states[index] = [this.state.states[index][0]];\n    this.update();\n  }\n\n  resetAllToFirstState() {\n    const me = this;\n    this.state.targets.forEach(t => me.resetToFirstState(t));\n    this.update();\n  }\n\n  clear(target) {\n    const {\n      index\n    } = this.getTarget(target);\n    this.state.activeStates[index] = -1;\n    this.state.states[index] = [];\n    this.update();\n  }\n\n  clearAll() {\n    const me = this;\n    this.state.targets.forEach(t => me.clear(t));\n    this.update();\n  }\n\n  saveData() {\n    const me = this;\n    this.storage.clear().then(() => {\n      me.state.queries.forEach((q, i) => {\n        const data = {\n          active: me.state.activeStates[i],\n          states: me.state.states[i]\n        };\n        me.storage.set(q, data);\n      });\n    });\n  }\n\n  loadData() {\n    const me = this;\n    this.storage.all().then((data) => {\n      let i = 0;\n      for (let q in data) {\n        me.addTarget(q);\n        me.clear(i);\n        data[q].states.forEach(s => me.addState(i, s));\n        me.toState(i, data[q].active);\n        i++;\n      }\n    });\n  }\n\n  getTarget(target) {\n    let index;\n    if (Number.isInteger(target)) {\n      index = target;\n      target = this.state.targets[index];\n    } else {\n      index = this.state.targets.indexOf(target);\n    }\n    return {\n      index: index,\n      target: target\n    };\n  }\n\n  static prettyJSON(json) {\n    json = JSON.stringify(json, null, 4);\n    json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/g, function(match) {\n      let cls = 'number';\n      if (/:$/.test(match)) {\n        cls = 'key';\n        return '<span class=\"' + cls + '\">' + match + '</span>';\n      } else if (/^\"/.test(match)) {\n        cls = 'string';\n      } else if (/true|false/.test(match)) {\n        cls = 'boolean';\n      } else if (/null/.test(match)) {\n        cls = 'null';\n      }\n      return '<span class=\"' + cls + '\">' + match + '</span>';\n    });\n  }\n}\n\nSifrrStater.defaultState = {\n  targets: [],\n  states: [],\n  queries: [],\n  activeStates: []\n};\n\nSifrrDom.register(SifrrStater);\n\nexport default SifrrStater;\n","import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\n\nconst template = SifrrDom.template`\n<style media=\"screen\">\n  ${style}\n</style>\n<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/\\${this.theme}.min.css\">\n<pre class='hljs'>\n  <code id=\"highlight\" data-sifrr-html=\"true\">\n    \\${this.htmlValue}\n  </code>\n</pre>\n<textarea class='hljs' _input=\"\\${this.input}\"></textarea>`;\n\nclass SifrrCodeEditor extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['value', 'theme'];\n  }\n\n  static hljs() {\n    this._hljs = this._hljs || fetch('https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js')\n      .then(resp => resp.text())\n      .then(text => new Function(text)());\n    return this._hljs;\n  }\n\n  onAttributeChange() {\n    this.update();\n  }\n\n  onConnect() {\n    this.constructor.hljs().then(() => this.hljsLoaded());\n\n    const txtarea = this.$('textarea');\n    txtarea.addEventListener('keydown', (e) => {\n      let keyCode = e.keyCode || e.which;\n      this.$('#highlight').style.height = this.$('textarea').height;\n      if (keyCode == 9) {\n        e.preventDefault();\n        const start = txtarea.selectionStart;\n        const end = txtarea.selectionEnd;\n\n        const tabCharacter = '  ';\n        const tabOffset = 2;\n\n        // set textarea value to: text before caret + tab + text after caret\n        txtarea.value = txtarea.value.substring(0, start) + tabCharacter + txtarea.value.substring(end);\n\n        // put caret at right position again\n        txtarea.selectionStart = txtarea.selectionEnd = start + tabOffset;\n\n        this.update();\n      }\n    });\n    txtarea.onscroll = () => {\n      this.$('pre.hljs').scrollTop = txtarea.scrollTop;\n    };\n  }\n\n  input() {\n    SifrrDom.Event.trigger(this, 'input');\n    this.update();\n  }\n\n  hljsLoaded() {\n    this.$('textarea').classList.add('loaded');\n    this.update();\n  }\n\n  get htmlValue() {\n    if (window.hljs) return window.hljs.highlight(this.lang, this.value).value;\n    else return this.value.replace(/</g, '&lt;');\n  }\n\n  get theme() {\n    return this.getAttribute('theme') || 'atom-one-dark';\n  }\n\n  set theme(v) {\n    this.setAttribute('theme', v);\n    this.update();\n  }\n\n  get value() {\n    return this.$('textarea').value;\n  }\n\n  set value(v) {\n    this.$('textarea').value = v;\n    this.update();\n  }\n\n  get lang() {\n    return this.getAttribute('lang') || 'html';\n  }\n}\n\nSifrrDom.register(SifrrCodeEditor);\n\nexport default SifrrCodeEditor;\n","import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\nimport html from './template.html';\nimport '../../sifrr-code-editor/src/sifrrcodeeditor';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n<style>\n\\${this.state.style}\n</style>\n${html}`;\n\nSifrrDom.Event.add('click');\n\nconst defaultShowcase = {\n  id: 1,\n  name: 'Placeholder Element',\n  element: 'sifrr-placeholder',\n  elementUrl: '',\n  isjs: true,\n  variantName: '',\n  variants: [\n    {\n      variantId: 1,\n      variantName: 'variant',\n      style: `#element > * {\n  display: block;\n  background-color: white;\n  margin: auto;\n}`,\n      code: '<sifrr-placeholder>\\n</sifrr-placeholder>',\n      elState: 'return {\\n\\n}'\n    }\n  ]\n};\n\nclass SifrrSingleShowcase extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['url'];\n  }\n\n  onConnect() {\n    this.switchVariant();\n    Sifrr.Dom.Event.addListener('click', '.variant', (e, el) => {\n      if (el.matches('.variant')) this.switchVariant(el.dataset.variantId);\n      if (el.matches('.variant span')) this.deleteVariant(el.parentNode.dataset.variantId);\n    });\n  }\n\n  beforeUpdate() {\n    this.saveVariant();\n    if (!this.state.elemnt) return;\n    if (this._element !== this.state.element || this._js !== this.state.isjs || this._url !== this.state.elementUrl) {\n      SifrrDom.load(this.state.element, {\n        js: this.state.isjs == 'true',\n        url: this.state.elementUrl ? this.state.elementUrl : undefined\n      }).then(() => this.$('#error').innerText = '').catch(e => this.$('#error').innerText = e.message);\n      this._js = this.state.isjs;\n      this._element = this.state.element;\n      this._url = this.state.elementUrl;\n    }\n  }\n\n  onUpdate() {\n    let state;\n    try {\n      state = new Function(this.$('#elState').value).call(this.element());\n    } catch (e) { window.console.warn(e); }\n    if (state && this.element() && this.element().isSifrr && this.element().state !== state) {\n      this.element().state = state;\n    }\n  }\n\n  onAttributeChange(name, _, value) {\n    if (name === 'url') this.url = value;\n  }\n\n  createNewVariant() {\n    const id = Math.max(...this.state.variants.map(s => s.variantId), 0) + 1;\n    const cid = this.state.variants.findIndex(v => v.variantId == this.state.variantId) + 1 || 1;\n    this.state.variants.splice(cid, 0, Object.assign({}, {\n      variantId: id,\n      variantName: this.state.variantName,\n      style: this.state.style || '',\n      code: this.state.code || '',\n      elState: this.state.elState || ''\n    }));\n    this.switchVariant(id);\n  }\n\n  deleteVariant(id) {\n    this.state.variants.forEach((s, i) => {\n      if (s.variantId == id) {\n        this.state.variants.splice(i, 1);\n        if (this.state.variantId == id) this.switchVariant((this.state.variants[i] || {}).variantId);\n        else this.update();\n      }\n    });\n  }\n\n  saveVariant() {\n    if (!this.state.variants) this.state.variants = [];\n    const id = this.state.variantId;\n    this.state.variants.forEach(s => {\n      if (s.variantId == id) {\n        Object.assign(s, {\n          variantName: this.state.variantName,\n          style: this.state.style,\n          code: this.state.code,\n          elState: this.state.elState\n        });\n      }\n    });\n  }\n\n  switchVariant(id) {\n    Object.assign(this.state, this.variant(id));\n    this.update();\n  }\n\n  updateHtml(e, el) {\n    const html = `<${el.value}></${el.value}>`;\n    this.state = { code: html, element: el.value };\n  }\n\n  element() {\n    return this.$('#element').firstElementChild;\n  }\n\n  variant(id) {\n    return this.state.variants.find(s => s.variantId == id) || this.state.variants[this.state.variants.length - 1];\n  }\n}\n\nSifrrSingleShowcase.defaultState = defaultShowcase;\n\nSifrrDom.register(SifrrSingleShowcase);\n\nexport default SifrrSingleShowcase;\n","import SifrrDom from '@sifrr/dom';\nimport SifrrStorage from '@sifrr/storage';\nimport style from './style.scss';\nimport './singleshowcase';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n<div class=\"container\">\n  <div class=\"flex-column\" id=\"sidemenu\">\n    <div class=\"box\">\n      <h1 class=\"font head\">Sifrr Showcase</h1>\n      <p class=\"font\" id=\"loader\"></p>\n      <input id=\"url\" type=\"text\" placeholder=\"Enter url here...\" name=\"url\" />\n      <button type=\"button\" name=\"loadUrl\" _click=\\${this.loadUrl}>Load from url</button>\n      <p class=\"font\" id=\"status\"></p>\n      <span class=\"button font\">\n        Upload File\n        <input type=\"file\" name=\"file\" accept=\"application/json\" _input=\"\\${this.loadFile}\" />\n      </span>\n      <button class=\"font\" type=\"button\" name=\"saveFile\" _click=\"\\${this.saveFile}\">Save to File</button>\n      <h3 class=\"font head\">Showcases</h3>\n      <input id=\"showcaseName\" type=\"text\" name=\"showcase\" _input=\\${this.changeName} value=\\${this.state.showcases[this.state.current].name}>\n      <button class=\"font\" type=\"button\" name=\"createVariant\" _click=\"\\${this.createShowcase}\">Create new showcase</button>\n      <div id=\"showcases\" data-sifrr-repeat=\"\\${this.state.showcases}\">\n        <li class=\"font showcase small\" data-showcase-id=\"\\${this.state.key}\" draggable=\"true\">\\${this.state.name}<span>X</span></li>\n      </div>\n    </div>\n  </div>\n  <sifrr-single-showcase _update=\\${this.saveShowcase}></sifrr-single-showcase>\n</div>`;\n\nconst storage = new SifrrStorage({ name: 'showcases', version: '1.0' });\n\nclass SifrrShowcase extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['url'];\n  }\n\n  onAttributeChange(n, _, value) {\n    if (n === 'url') this.url = value;\n  }\n\n  onConnect() {\n    Sifrr.Dom.Event.addListener('click', '.showcase', (e, el) => {\n      if (el.matches('.showcase')) this.switchShowcase(this.getChildIndex(el));\n      if (el.matches('.showcase span')) this.deleteShowcase(this.getChildIndex(el.parentNode));\n    });\n    this.loadUrl();\n    this.switchShowcase(0);\n    if (window.Sortable) {\n      const me = this;\n      new window.Sortable(this.$('#showcases'), {\n        draggable: 'li',\n        onEnd: (e) => {\n          const o = e.oldIndex, n = e.newIndex;\n          const old = me.state.showcases[o];\n          me.state.showcases[o] = me.state.showcases[n];\n          me.state.showcases[n] = old;\n          const current = me.$('#showcases .current');\n          me.switchShowcase(me.getChildIndex(current));\n        }\n      });\n    }\n  }\n\n  getChildIndex(el) {\n    let i = 0;\n    while((el = el.previousElementSibling) != null) i++;\n    return i;\n  }\n\n  deleteShowcase(i) {\n    this.state.showcases.splice(i, 1);\n    if (i == this.state.current) this.switchShowcase(this.state.current);\n    else this.switchShowcase(this.state.current - 1);\n  }\n\n  createShowcase() {\n    this.state.showcases.splice(this.state.current + 1, 0, {\n      name: this.$('#showcaseName').value,\n      variants: [],\n      element: this.$('#showcaseName').value\n    });\n    this.switchShowcase(this.state.current + 1);\n  }\n\n  switchShowcase(i) {\n    this.current = i;\n    this.$('#showcases').children[this.state.current].classList.remove('current');\n    if (!this.state.showcases[i]) i = this.state.showcases.length - 1;\n    this.state = { current: i };\n    this.el._state = this.state.showcases[i];\n    this.el.update();\n    this.$('#showcases').children[i].id = 'showcase' + i;\n    this.$('#showcases').children[i].classList.add('current');\n  }\n\n  onStateChange() {\n    if (this.state.current !== this.current) this.switchShowcase(this.state.current);\n  }\n\n  saveShowcase() {\n    this.state.showcases[this.state.current] = Object.assign(this.state.showcases[this.state.current] || {}, JSON.parse(JSON.stringify(this.el.state)));\n    if (this._loaded) {\n      this.$('#status').textContent = 'saving locally!';\n      if (this._timeout) clearTimeout(this._timeout);\n      this._timeout = setTimeout(() => {\n        this._timeout = null;\n        storage.set({ showcases: this.state.showcases, current: this.state.current }).then(() => {\n          this.$('#status').textContent = 'saved locally!';\n        });\n      }, 500);\n    }\n  }\n\n  changeName() {\n    this.state.showcases[this.state.current].name = this.$('#showcaseName').value;\n    this.update();\n  }\n\n  get el() {\n    return this.$('sifrr-single-showcase');\n  }\n\n  set url(v) {\n    this._url = v;\n    if (this.getAttribute('url') !== v) this.setAttribute('url', v);\n    if (this.$('#url').value !== v) this.$('#url').value = v;\n    this.loadUrl();\n  }\n\n  get url() {\n    return this._url;\n  }\n\n  loadUrl() {\n    this._url = this.$('#url').value;\n    window.fetch(this._url).then((resp) => resp.json()).then(v => {\n      this.state.showcases = v.showcases;\n      this.switchShowcase(v.current);\n      this.$('#status').textContent = 'loaded from url!';\n    }).catch((e) => {\n      this.$('#status').textContent = e.message;\n      storage.all().then(v => {\n        this.$('#status').textContent = 'failed to load from url, loaded from storage!';\n        this._loaded = true;\n        if (Array.isArray(v.showcases)) {\n          this.state.showcases = v.showcases;\n          this.switchShowcase(v.current);\n        }\n      });\n    });\n  }\n\n  saveFile() {\n    const blob = new Blob([JSON.stringify(this.state, null, 2)], {\n      type: 'application/json'\n    });\n    const a = document.createElement('a');\n    a.href = URL.createObjectURL(blob);\n    a.download = 'showcases';\n    a.click();\n  }\n\n  loadFile(e, el) {\n    const file = el.files[0];\n    const fr = new FileReader();\n    fr.onload = () => {\n      const json = JSON.parse(fr.result);\n      this.state = json;\n      this.switchShowcase(json.current);\n      this.$('#status').textContent = 'loaded from file!';\n    };\n    fr.readAsText(file);\n  }\n}\n\nSifrrShowcase.defaultState = {\n  current: 0,\n  showcases: [{\n    name: 'new'\n  }]\n};\n\nSifrrDom.register(SifrrShowcase);\n\nexport default SifrrShowcase;\n","import SifrrDom from '@sifrr/dom';\n\nimport template from './template.html';\n\nclass SifrrProgressRound extends Sifrr.Dom.Element {\n  static get template() {\n    return SifrrDom.template(template);\n  }\n\n  static observedAttrs() {\n    return ['progress'];\n  }\n\n  get progress() {\n    return this._state.progress;\n  }\n\n  set progress(v) {\n    return this.state = { progress: v };\n  }\n\n  onAttributeChange(n, _, v) {\n    if (n === 'progress') this.state = { [n]: v };\n  }\n}\n\nSifrrProgressRound.defaultState = { progress: 0 };\n\nSifrrDom.register(SifrrProgressRound);\n\nexport default SifrrProgressRound;\n","import SifrrDom from '@sifrr/dom';\nimport template from './template.html';\n\nclass SifrrShimmer extends Sifrr.Dom.Element {\n  static get template() {\n    return SifrrDom.template(template);\n  }\n}\n\nSifrrDom.register(SifrrShimmer);\n\nexport default SifrrShimmer;\n","// elements\nexport { default as SifrrLazzyImg } from '../elements/sifrr-lazy-img/src/sifrrlazyimg';\nexport { default as SifrrLazyPicture } from '../elements/sifrr-lazy-picture/src/sifrrlazypicture';\nexport { default as SifrrStater } from '../elements/sifrr-stater/src/sifrrstater';\nexport { default as SifrrTabs } from '../elements/sifrr-tabs/src/sifrrtabs';\nexport { default as SifrrShowcase } from '../elements/sifrr-showcase/src/sifrrshowcase';\nexport { default as SifrrCodeEditor } from '../elements/sifrr-code-editor/src/sifrrcodeeditor';\nexport { default as SifrrProgressRound } from '../elements/sifrr-progress-round/src/sifrrprogressround';\nexport { default as SifrrShimmer } from '../elements/sifrr-shimmer/src/sifrrshimmer';\n\n// helpers\nexport { animate as animate } from '../helpers/animate';\nexport { wait as wait } from '../helpers/animate';\nimport { animate } from '../helpers/animate';\nif (window && window.Sifrr) Sifrr.animate = animate;\n// window.animate = animate;\n"],"names":["moveAttr","el","attr","dataset","setAttribute","removeAttribute","loadPicture","img","SifrrLazyImg","Sifrr","Dom","Element","extends","HTMLImageElement","observer","_observer","IntersectionObserver","onVisible","rootMargin","entries","forEach","entry","isIntersecting","target","_loaded","beforeLoad","unobserve","afterLoad","onConnect","reload","constructor","observe","onDisconnect","SifrrDom","register","pic","$$","s","$","SifrrLazyPicture","HTMLPictureElement","types","linear","ease","easeIn","easeOut","easeInOut","beziers","digitRgx","noop","Bezier","args","key","join","setProps","final","bind","x1","y1","x2","y2","props","A","aA1","aA2","B","C","CalcBezier","aT","GetSlope","Object","assign","x","GetTForX","xx","t","i","slope","animateOne","prop","from","to","time","type","onUpdate","round","toSplit","toString","split","l","length","raw","fromNums","diffs","fromSplit","n","Number","isNaN","push","bezier","Promise","res","startTime","frame","currentTime","percent","bper","next","map","d","Math","val","String","window","requestAnimationFrame","animate","targets","Array","iterate","promises","isArray","all","wait","setTimeout","template","style","removeExceptOne","elements","name","index","HTMLElement","children","j","classList","remove","add","SifrrTabs","observedAttrs","_connected","refresh","setWindowResizeEvent","setSlotChangeEvent","setScrollEvent","onAttributeChange","_","v","_attrOptions","JSON","parse","options","menu","content","tabcontainer","menus","assignedNodes","tabs","la","ra","line","num","showArrows","arrowMargin","arrowWidth","showMenu","step","tabHeight","showUnderline","loop","animation","animationTime","scrollBreakpoint","background","usableWidth","clientWidth","totalWidth","tabWidth","update","active","display","e","margin","headingDisplay","width","offsetWidth","setMenuProps","left","menuProps","elem","_click","last","me","isScrolling","scrollPos","onscroll","onScroll","total","scrollLeft","per","floor","parentElement","clearTimeout","addEventListener","fxn","state","beforeUpdate","getTabNumber","hasPrev","hasNext","prev","defaultState","Event","SifrrStater","storage","SifrrStorage","location","href","addListener","contains","toState","parseInt","stateIndex","deleteState","parentNode","commit","resetToFirstState","removeTarget","showHide","addTargetOnEnter","event","addTarget","headingHtml","queries","q","stateHtml","states","jsn","activeStates","prettyJSON","query","value","document","querySelector","isSifrr","console","log","old","onStateChange","addState","call","indexOf","stringify","getTarget","splice","newState","stateN","last_state","commitAll","resetAllToFirstState","clear","clearAll","saveData","then","data","set","loadData","isInteger","json","replace","match","cls","test","SifrrCodeEditor","hljs","_hljs","fetch","resp","text","Function","hljsLoaded","txtarea","keyCode","which","height","preventDefault","start","selectionStart","end","selectionEnd","tabCharacter","tabOffset","substring","scrollTop","input","trigger","htmlValue","highlight","lang","theme","getAttribute","html","defaultShowcase","id","element","elementUrl","isjs","variantName","variants","variantId","code","elState","SifrrSingleShowcase","switchVariant","matches","deleteVariant","saveVariant","elemnt","_element","_js","_url","load","js","url","undefined","innerText","catch","message","warn","createNewVariant","max","cid","findIndex","variant","updateHtml","firstElementChild","find","version","SifrrShowcase","switchShowcase","getChildIndex","deleteShowcase","loadUrl","Sortable","draggable","onEnd","o","oldIndex","newIndex","showcases","current","previousElementSibling","createShowcase","_state","saveShowcase","textContent","_timeout","changeName","saveFile","blob","Blob","a","createElement","URL","createObjectURL","download","click","loadFile","file","files","fr","FileReader","onload","result","readAsText","SifrrProgressRound","progress","SifrrShimmer"],"mappings":"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"}