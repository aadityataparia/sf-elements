{"version":3,"file":"sifrrelements.js","sources":["../elements/sifrr-lazy-picture/src/sifrrlazypicture.js","../elements/sifrr-tabs/src/sifrrtabs.js","../elements/sifrr-stater/src/sifrrstater.js","../elements/sifrr-code-editor/dist/sifrrcodeeditor.js","../elements/sifrr-showcase/src/singleshowcase.js","../elements/sifrr-showcase/src/sifrrshowcase.js","../elements/sifrr-code-editor/src/sifrrcodeeditor.js"],"sourcesContent":["import SifrrDom from '@sifrr/dom';\n\nfunction moveAttr(el, attr) {\n  if (!el.dataset[attr]) return;\n  el.setAttribute(attr, el.dataset[attr]);\n  el.removeAttribute(`data-${attr}`);\n}\n\nfunction loadPicture(pic) {\n  if (pic.sifrrLazyLoaded) return false;\n  pic.sifrrLazyLoaded = true;\n  pic.$$('source', false).forEach((s) => {\n    moveAttr(s, 'srcset');\n  });\n  const img = pic.$('img', false);\n  moveAttr(img, 'src');\n  moveAttr(img, 'srcset');\n  return true;\n}\n\n//Sifrr Lazy Loading Picture\nclass SifrrLazyPicture extends Sifrr.Dom.Element.extends(HTMLPictureElement) {\n  static useShadowRoot() {\n    return true;\n  }\n\n  static get observer() {\n    this._observer = this._observer || new IntersectionObserver(this.onVisible, {\n      rootMargin: this.rootMargin\n    });\n    return this._observer;\n  }\n\n  static onVisible(entries) {\n    entries.forEach(entry => {\n      console.log(entries);\n      if (entry.isIntersecting) {\n        this.observer.unobserve(entry.target);\n        loadPicture(entry.target);\n      }\n    });\n  }\n\n  onConnect() {\n    this.sifrrLazyLoaded = false;\n    this.constructor.observer.observe(this);\n  }\n\n  onDisconnect() {\n    this.constructor.observer.unobserve(this);\n  }\n}\n\nSifrrLazyPicture.rootMargin = '0px 0px 200px 0px';\n\nif (window) SifrrDom.register(SifrrLazyPicture, { extends: 'picture' });\n\nexport default SifrrLazyPicture;\n","import SifrrDom from '@sifrr/dom'\nimport style from './style.scss'\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n<div class=\"headings\">\n  <ul>\n    <slot name=\"heading\">\n    </slot>\n  </ul>\n  <div class=\"underline\"></div>\n</div>\n<div class=\"content\">\n  <div class=\"arrow l\">\n    <span></span>\n  </div>\n  <div class=\"arrow r\">\n    <span></span>\n  </div>\n  <div class=\"tabs\">\n    <slot name=\"tab\">\n    </slot>\n  </div>\n</div>`;\n\nfunction removeExceptOne(elems, classN, index) {\n  for (let j = 0; j < elems.length; j++) {\n    j !== index && elems[j] !== index ? elems[j].classList.remove(classN) : elems[j].classList.add(classN);\n  }\n}\n\n//Simple tabs\nclass SifrrTabs extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  onConnect() {\n    this.options = {\n      menu: this.$(\".headings ul\"),\n      content: this.$(\".content\"),\n      tabcontainer: this.$(\".tabs\"),\n      menus: this.$('slot[name=heading]').assignedNodes(),\n      tabs: this.$('slot[name=tab]').assignedNodes(),\n      la: this.$(\".arrow.l\"),\n      ra: this.$(\".arrow.r\"),\n      line: this.$(\".underline\"),\n      num: 1,\n      showArrows: false,\n      arrowMargin: 0,\n      showMenu: true,\n      step: 1,\n      tabHeight: 'auto',\n      showUnderline: true,\n      loop: false,\n      animation: 'easeOut',\n      animationTime: 300,\n      scrollBreakpoint: 0.2\n    }\n    if (this.getAttribute('options')) Object.assign(this.options, JSON.parse(this.getAttribute('options')));\n    this.animations = this.animations();\n    this.setWindowResizeEvent();\n    this.setClickEvents();\n    this.setSlotChangeEvent();\n    this.refresh();\n  }\n\n  refresh(params = {}) {\n    Object.assign(this.options, params);\n    if (!this.options.tabs || this.options.tabs.length < 1) return;\n    this.width = this.clientWidth / this.options.num;\n    this.margin = 0;\n    if (this.options.showArrows) {\n      this.width -= 2 * this.options.arrowMargin;\n      this.margin = this.options.arrowMargin;\n    }\n    this.setProps();\n    this.active = params.active || this.active || 0;\n  }\n\n  get active() {\n    return this.state ? this.state.active : 0;\n  }\n\n  set active(i) {\n    this.state = {\n      active: i\n    };\n  }\n\n  onStateChange() {\n    if (!this.options) return;\n    let i = this.state.active;\n    i = this.getTabNumber(i);\n    if (i + this.options.num - 1 == this.options.tabs.length) {\n      if (this.options.loop) i = 0;\n      else i = this.options.tabs.length - this.options.num;\n    }\n    if (!isNaN(i) && i !== this.state.active) {\n      this.state = {\n        active: i\n      };\n      return;\n    }\n    this.animate(this.options.content, 'scrollLeft', i * (this.width + 2 * this.margin), this.options.animationTime, this.options.animation);\n    removeExceptOne(this.options.tabs, 'active', i);\n    removeExceptOne(this.options.tabs, 'prev', this.getTabNumber(i - 1));\n    removeExceptOne(this.options.tabs, 'next', this.getTabNumber(i + 1));\n    removeExceptOne(this.options.menus, 'active', i);\n    removeExceptOne(this.options.menus, 'prev', this.getTabNumber(i - 1));\n    removeExceptOne(this.options.menus, 'next', this.getTabNumber(i + 1));\n    if (this.options.showArrows) {\n      this.options.la.style.display = this.hasPrev() || this.options.loop ? \"block\" : \"none\";\n      this.options.ra.style.display = this.hasNext() || this.options.loop ? \"block\" : \"none\";\n    }\n  }\n\n  next() {\n    this.active = this.state.active + this.options.step;\n  }\n\n  hasNext() {\n    if (this.active === this.options.tabs.length - this.options.num) return false;\n    return true;\n  }\n\n  prev() {\n    this.active = this.state.active - this.options.step;\n  }\n\n  hasPrev() {\n    if (this.active === 0) return false;\n    return true;\n  }\n\n  getTabNumber(i) {\n    const l = this.options.tabs.length;\n    i = i < 0 ? i + l : i % l\n    return i;\n  }\n\n  setProps() {\n    const me = this;\n    if (!this.options.showArrows) {\n      if (this.options.la) this.options.la.style.display = 'none';\n      if (this.options.ra) this.options.ra.style.display = 'none';\n    } else {\n      Array.from(this.options.tabs).forEach(e => e.style.margin = `0 ${this.margin}px`);\n    }\n    if (!this.options.showUnderline) {\n      if (this.options.line) this.options.line.style.display = 'none';\n    }\n    if (this.options.showMenu) {\n      this.setMenuProps();\n      this.options.line.style.width = this.options.menus[0].offsetWidth + 'px';\n    } else {\n      if (this.options.menu) this.options.menu.style.display = 'none';\n    }\n    this.setScrollEvent();\n    this.options.tabcontainer.style.width = this.options.tabs.length * (this.width + 2 * this.margin) + 'px';\n    this.options.tabcontainer.style.height = this.options.tabHeight;\n    Array.from(this.options.tabs).forEach(e => e.style.width = this.width + 'px');\n  }\n\n  setMenuProps() {\n    const me = this;\n    let left = 0;\n    this.options.menuProps = {};\n    Array.from(this.options.menus).forEach((elem, i) => {\n      this.options.menuProps[i] = {\n        width: elem.offsetWidth,\n        left: left\n      }\n      left += elem.offsetWidth;\n      elem._click = () => me.active = i;\n    });\n    const last = this.options.menuProps[this.options.menus.length - 1];\n    this.options.menu.style.width = last.left + last.width + 5 + 'px';\n    const active = this.options.menuProps[this.active];\n    if (active) {\n      me.options.line.style.left = active.left + 'px';\n      me.options.line.style.width = active.width + 'px';\n    }\n  }\n\n  setClickEvents() {\n    let me = this;\n    if (this.options.la) this.options.la._click = () => me.prev();\n    if (this.options.ra) this.options.ra._click = () => me.next();\n  }\n\n  setScrollEvent() {\n    let me = this,\n      isScrolling,\n      scrollPos = -1;\n    me.options.content.onscroll = () => requestAnimationFrame(onScroll);\n\n    function onScroll() {\n      const total = me.options.content.scrollLeft / me.width;\n      const per = total % 1;\n      if (scrollPos < 0) scrollPos = per;\n      const t = Math.floor(total);\n      try {\n        const left = me.options.menuProps[t].left * (1 - per) + (me.options.menuProps[t + 1] || {\n          left: 0\n        }).left * per;\n        const width = me.options.menuProps[t].width * (1 - per) + (me.options.menuProps[t + 1] || {\n          width: 0\n        }).width * per;\n        me.options.line.style.left = left + 'px';\n        me.options.line.style.width = width + 'px';\n        me.options.menu.parentElement.scrollLeft = left - (me.width - width) / 2;\n      } catch (e) {}\n      clearTimeout(isScrolling);\n      isScrolling = setTimeout(function() {\n        if (per - scrollPos < -me.options.scrollBreakpoint) {\n          me.active = t;\n        } else if (per - scrollPos > +me.options.scrollBreakpoint) {\n          me.active = t + 1;\n        } else {\n          me.active = me.active;\n        }\n        scrollPos = -1;\n      }, 66);\n    }\n  }\n\n  setWindowResizeEvent() {\n    const me = this;\n    window.addEventListener(\"resize\", function() {\n      me.refresh();\n    });\n  }\n\n  setSlotChangeEvent() {\n    const me = this;\n    const fxn = () => {\n      me.options.menus = me.$$('slot')[0].assignedNodes();\n      me.options.tabs = me.$$('slot')[1].assignedNodes();\n      me.refresh();\n    }\n    this.$$('slot')[0].addEventListener('slotchange', fxn);\n    this.$$('slot')[1].addEventListener('slotchange', fxn);\n  }\n\n  animate(who, what, to, time, type = 'easeOut') {\n    const from = who[what];\n    const diff = to - from;\n    const step = 1 / Math.round(time / 16) * diff;\n    const me = this;\n    let pos = 0,\n      raf, startTime;\n\n    function frame(currentTime) {\n      startTime = startTime || currentTime;\n      if (currentTime - startTime > time) {\n        who[what] = to;\n        return;\n      }\n      let percent = (currentTime - startTime) / time;\n      who[what] = Math.round(me.animations[type].call(this, percent) * diff + from);\n      window.requestAnimationFrame(frame);\n    }\n    window.requestAnimationFrame(frame);\n  }\n\n  animations() {\n    return {\n      linear: i => i,\n      easeOut: i => (--i) * i * i + 1,\n      easeIn: i => i * i * i,\n      none: i => 1\n    }\n  }\n}\n\nif (window) SifrrDom.register(SifrrTabs);\nexport default SifrrTabs;\n","import SifrrDom from '@sifrr/dom'\nimport SifrrStorage from '@sifrr/storage'\nimport '../../sifrr-tabs/src/sifrrtabs'\nimport style from './style.scss'\n\nconst template = SifrrDom.template`<style>\n  ${style}\n</style>\n<div id=\"showHide\" _click=\\${this.showHide}></div>\n<sifrr-tabs options='{\"tabHeight\": \"calc(100vh - 132px)\"}' data-sifrr-html=\"true\">\n  \\${ this.headingHtml() }\n  \\${ this.stateHtml() }\n</sifrr-tabs>\n<footer>\n  <input _keyup=\\${this.addTargetOnEnter} id=\"addTargetInput\" type=\"text\" name=\"addTargetInput\" value=\"\" placeholder=\"Enter css selector query of target\">\n  <button _click=\\${this.addTarget} class=\"btn3\" type=\"button\" name=\"addTargetButton\">Add Taget</button>\n  <button _click=\\${this.commitAll} class=\"btn3\" type=\"button\" name=\"commitAll\">Commit All</button>\n  <button _click=\\${this.resetAllToFirstState} class=\"btn3\" type=\"button\" name=\"resetAll\">Reset All</button>\n  <button _click=\\${this.saveData} class=\"btn3\" type=\"button\" name=\"saveData\">Save Data</button>\n  <button _click=\\${this.loadData} class=\"btn3\" type=\"button\" name=\"loadData\">Load Data</button>\n  <button _click=\\${this.clearAll} class=\"btn3\" type=\"button\" name=\"clearAll\">Remove All</button>\n</footer>`;\n\nSifrrDom.Event.add('click');\nSifrrDom.Event.add('keyup');\nclass SifrrStater extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  onConnect() {\n    let me = this;\n    this.storage = new SifrrStorage({\n      name: window.location.href\n    });\n    SifrrDom.Event.addListener('click', '.state', function(e, el) {\n      el.classList.contains('open') ? el.classList.remove('open') : el.classList.add('open');\n    });\n    SifrrDom.Event.addListener('click', '.dotC', function(e, target, el) {\n      me.toState(parseInt(el.dataset.target), parseInt(el.dataset.stateIndex));\n    });\n    SifrrDom.Event.addListener('click', '.delete', function(e, el) {\n      me.deleteState(parseInt(el.dataset.target), parseInt(el.dataset.stateIndex));\n    });\n    SifrrDom.Event.addListener('click', '.commit', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.commit(i);\n    });\n    SifrrDom.Event.addListener('click', '.reset', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.resetToFirstState(i);\n    });\n    SifrrDom.Event.addListener('click', '.remove', function(e, el) {\n      const i = parseInt(el.parentNode.dataset.target);\n      me.removeTarget(i);\n    });\n    SifrrDom.Element.onStateChange = function(target) {\n      me.addState(target, target.state);\n    }\n  }\n\n  showHide() {\n    this.classList.contains('show') ? this.classList.remove('show') : this.classList.add('show');\n  }\n\n  addTargetOnEnter(event) {\n    if (event.key === 'Enter') {\n      this.addTarget();\n    }\n  }\n\n  headingHtml() {\n    return this.state.queries.map((q) => `<li slot=\"heading\">${q}</li>`).join('');\n  }\n\n  stateHtml() {\n    let me = this;\n    return this.state.states.map((s, i) =>\n      `<div data-target=\"${i}\" slot=\"tab\">\n      <button class=\"btn3 commit\" type=\"button\" name=\"commit\">Commit</button>\n      <button class=\"btn3 reset\" type=\"button\" name=\"reset\">Reset</button>\n      <button class=\"btn3 remove\" type=\"button\" name=\"remove\">Remove</button>\n      ${s.map((jsn, j) => `<div class=\"stateContainer ${j <= me.state.activeStates[i] ? 'on' : 'off'}\">\n                           <div class=\"dotC\" data-target=\"${i}\" data-state-index=\"${j}\"><div class=\"dot\"></div></div>\n                           <div class=\"state\">${SifrrStater.prettyJSON(jsn)}</div>\n                           <div class=\"delete\" data-target=\"${i}\" data-state-index=\"${j}\">X</div>\n                           </div>`).join('')}</div>`\n    ).join('');\n  }\n\n  addTarget(query) {\n    if (typeof query !== 'string') query = this.$('#addTargetInput').value;\n    const target = window.document.querySelector(query);\n    if (!target.isSifrr) {\n      console.log(\"Invalid Sifrr Element.\", target);\n      return false;\n    }\n    if (!target.state) {\n      console.log(\"Sifrr Element has no state.\", target);\n      return false;\n    }\n    let index = this.state.targets.indexOf(target);\n    if (index > -1) return;\n    this.state.targets.push(target);\n    this.state.queries.push(query);\n    index = this.state.targets.indexOf(target);\n    this.state.states[index] = [JSON.parse(JSON.stringify(target.state))];\n    this.state.activeStates[index] = 0;\n    this.update();\n  }\n\n  removeTarget(el) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    if (index > -1) {\n      this.state.targets.splice(index, 1);\n      this.state.queries.splice(index, 1);\n      this.state.states.splice(index, 1);\n      this.state.activeStates.splice(index, 1);\n      this.update();\n    }\n  }\n\n  addState(el, state) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    if (index > -1) {\n      const active = this.state.activeStates[index];\n      const newState = JSON.stringify(state);\n      if (newState !== JSON.stringify(this.state.states[index][active])) {\n        this.state.states[index].splice(active + 1, 0, JSON.parse(newState));\n        this.state.activeStates[index] = active + 1;\n        this.update();\n      }\n    }\n  }\n  deleteState(el, stateN) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    this.state.states[index].splice(stateN, 1);\n    if (stateN < this.state.activeStates[index]) {\n      this.state.activeStates[index] -= 1;\n    } else if (stateN == this.state.activeStates[index]) {\n      this.state.activeStates[index] -= 1;\n      this.toState(index, this.state.activeStates[index]);\n    }\n    this.update();\n  }\n\n  commit(el) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    const last_state = this.state.states[index][this.state.states[index].length - 1];\n    this.state.states[index] = [last_state];\n    this.state.activeStates[index] = 0;\n    this.update();\n  }\n\n  commitAll() {\n    const me = this;\n    this.state.targets.forEach(t => me.commit(t));\n    this.update();\n  }\n\n  toState(el, n) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    const active = this.state.activeStates[index];\n    this.state.activeStates[index] = n;\n    target.state = this.state.states[index][n];\n    this.update();\n  }\n\n  resetToFirstState(el) {\n    const {\n      index,\n      target\n    } = this.getTarget(el);\n    this.toState(target, 0, false);\n    this.state.states[index] = [this.state.states[index][0]];\n    this.update();\n  }\n\n  resetAllToFirstState() {\n    const me = this;\n    this.state.targets.forEach(t => me.resetToFirstState(t));\n    this.update();\n  }\n\n  clear(target) {\n    const {\n      index\n    } = this.getTarget(target);\n    this.state.activeStates[index] = -1;\n    this.state.states[index] = [];\n    this.update();\n  }\n\n  clearAll() {\n    const me = this;\n    this.state.targets.forEach(t => me.clear(t));\n    this.update();\n  }\n\n  saveData() {\n    const me = this;\n    this.storage.clear().then(() => {\n      me.state.queries.forEach((q, i) => {\n        const data = {\n          active: me.state.activeStates[i],\n          states: me.state.states[i]\n        }\n        me.storage.insert(q, data);\n      });\n    });\n  }\n\n  loadData() {\n    const me = this;\n    this.storage.data().then((data) => {\n      let i = 0;\n      for (let q in data) {\n        me.addTarget(q);\n        me.clear(i);\n        data[q].states.forEach(s => me.addState(i, s));\n        me.toState(i, data[q].active);\n        i++;\n      }\n    });\n  }\n\n  getTarget(target) {\n    let index;\n    if (Number.isInteger(target)) {\n      index = target;\n      target = this.state.targets[index]\n    } else {\n      index = this.state.targets.indexOf(target);\n    }\n    return {\n      index: index,\n      target: target\n    };\n  }\n\n  static prettyJSON(json) {\n    json = JSON.stringify(json, null, 4);\n    json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g, function(match) {\n      var cls = 'number';\n      if (/:$/.test(match)) {\n        cls = 'key';\n        return '<span class=\"' + cls + '\">' + match + '</span>';\n      } else if (/^\"/.test(match)) {\n        cls = 'string';\n      } else if (/true|false/.test(match)) {\n        cls = 'boolean';\n      } else if (/null/.test(match)) {\n        cls = 'null';\n      }\n      return '<span class=\"' + cls + '\">' + match + '</span>';\n    });\n  }\n}\n\nSifrrStater.defaultState = {\n  targets: [],\n  states: [],\n  queries: [],\n  activeStates: []\n}\n\nif (window) SifrrDom.register(SifrrStater);\n\nexport default SifrrStater;\n","/*! SifrrCodeEditor v0.0.4 - sifrr project | MIT licensed | https://github.com/sifrr/sifrr-elements */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('@sifrr/dom')) :\n  typeof define === 'function' && define.amd ? define(['@sifrr/dom'], factory) :\n  (global = global || self, global.SifrrCodeEditor = factory(global.Sifrr.Dom));\n}(this, function (SifrrDom) { 'use strict';\n\n  SifrrDom = SifrrDom && SifrrDom.hasOwnProperty('default') ? SifrrDom['default'] : SifrrDom;\n\n  function _taggedTemplateLiteral(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    return Object.freeze(Object.defineProperties(strings, {\n      raw: {\n        value: Object.freeze(raw)\n      }\n    }));\n  }\n\n  var css = \":host {\\n  display: block;\\n  position: relative; }\\n\\n* {\\n  box-sizing: border-box; }\\n\\n.hljs {\\n  width: 100%;\\n  height: 100%;\\n  font-family: Consolas,Liberation Mono,Courier,monospace;\\n  font-size: 14px;\\n  line-height: 18px;\\n  padding: 8px;\\n  margin: 0;\\n  position: absolute;\\n  white-space: pre-wrap;\\n  top: 0;\\n  left: 0; }\\n\\ntextarea {\\n  z-index: 2;\\n  resize: none;\\n  border: none; }\\n\\ntextarea.loaded {\\n  background: transparent !important;\\n  text-shadow: 0px 0px 0px rgba(0, 0, 0, 0);\\n  text-fill-color: transparent;\\n  -webkit-text-fill-color: transparent; }\\n\\npre {\\n  z-index: 1; }\\n\";\n\n  function _templateObject() {\n    const data = _taggedTemplateLiteral([\"\\n<style media=\\\"screen\\\">\\n  \", \"\\n</style>\\n<link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/atom-one-dark.min.css\\\">\\n<pre class='hljs'>\\n  <code id=\\\"highight\\\" data-sifrr-html=\\\"true\\\">\\n    ${this.htmlValue}\\n  </code>\\n</pre>\\n<textarea class='hljs' _input=\\\"${this.input}\\\"></textarea>\"], [\"\\n<style media=\\\"screen\\\">\\n  \", \"\\n</style>\\n<link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/atom-one-dark.min.css\\\">\\n<pre class='hljs'>\\n  <code id=\\\"highight\\\" data-sifrr-html=\\\"true\\\">\\n    \\\\${this.htmlValue}\\n  </code>\\n</pre>\\n<textarea class='hljs' _input=\\\"\\\\${this.input}\\\"></textarea>\"]);\n    _templateObject = function () {\n      return data;\n    };\n    return data;\n  }\n  const template = SifrrDom.template(_templateObject(), css);\n  class SifrrCodeEditor extends SifrrDom.Element {\n    static get template() {\n      return template;\n    }\n    onAttributeChange() {\n      this.update();\n    }\n    onConnect() {\n      fetch(\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js\").then(resp => resp.text()).then(text => new Function(text)()).then(() => this.hljsLoaded());\n      const txtarea = this.$('textarea');\n      this.$('textarea').addEventListener('keydown', e => {\n        let keyCode = e.keyCode || e.which;\n        if (keyCode == 9) {\n          e.preventDefault();\n          const start = txtarea.selectionStart;\n          const end = txtarea.selectionEnd;\n          const tabCharacter = '  ';\n          const tabOffset = 2;\n          txtarea.value = txtarea.value.substring(0, start) + tabCharacter + txtarea.value.substring(end);\n          txtarea.selectionStart = txtarea.selectionEnd = start + tabOffset;\n        }\n      });\n    }\n    input() {\n      SifrrDom.Event.trigger(this, 'input');\n      this.update();\n    }\n    hljsLoaded() {\n      this.$('textarea').classList.add('loaded');\n      this.update();\n    }\n    get htmlValue() {\n      if (window.hljs) return hljs.highlight(this.lang, this.value).value;else return this.value.replace(/</g, '&lt;');\n    }\n    get value() {\n      return this.$('textarea').value;\n    }\n    set value(v) {\n      this.$('textarea').value = v;\n      this.update();\n    }\n    get lang() {\n      return this.getAttribute('lang') || 'html';\n    }\n  }\n  if (window) SifrrDom.register(SifrrCodeEditor);\n\n  return SifrrCodeEditor;\n\n}));\n/*! (c) @aadityataparia */\n//# sourceMappingURL=sifrrcodeeditor.js.map\n","import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\nimport html from './template.html';\nimport '../../sifrr-code-editor';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n${html}`;\n\nSifrrDom.Event.add('click');\n\nconst defaultShowcase = {\n  id: 1,\n  name: 'Placeholder Element',\n  element: 'sifrr-placeholder',\n  elementUrl: '',\n  isjs: true,\n  variantName: '',\n  variants: [\n    {\n      variantId: 1,\n      variantName: 'variant',\n      style: `#element > * {\n  display: block;\n  background-color: white;\n  margin: auto;\n}`,\n      code: '<sifrr-placeholder>\\n</sifrr-placeholder>',\n      elState: 'return {\\n\\n}'\n    }\n  ]\n};\n\nclass SifrrSingleShowcase extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['url'];\n  }\n\n  onConnect() {\n    this.switchVariant();\n    Sifrr.Dom.Event.addListener('click', '.variant', (e, el) => {\n      if (el.matches('.variant')) this.switchVariant(el.dataset.variantId);\n      if (el.matches('.variant span')) this.deleteVariant(el.parentNode.dataset.variantId);\n    });\n  }\n\n  beforeUpdate() {\n    this.saveVariant();\n  }\n\n  onUpdate() {\n    if (this._element !== this.state.element || this._js !== this.state.isjs || this._url !== this.state.elementUrl) {\n      SifrrDom.load(this.state.element, {\n        js: this.state.isjs == 'true',\n        url: this.state.elementUrl ? this.state.elementUrl : undefined\n      }).then(() => this.$('#error').innerText = '').catch(e => this.$('#error').innerText = e.message);\n      this._js = this.state.isjs;\n      this._element = this.state.element;\n      this._url = this.state.elementUrl;\n    }\n    let state;\n    try {\n      state = new Function(this.$('#elState').value).call(this.element());\n    } catch (e) {}\n    if (state && this.element() && this.element().isSifrr && this.element().state !== state) {\n      this.element().state = state;\n    }\n  }\n\n  onAttributeChange(name, _, value) {\n    if (name === 'url') this.url = value;\n  }\n\n  createNewVariant() {\n    const id = Math.max(...this.state.variants.map(s => s.variantId), 0) + 1;\n    this.state.variants.push(Object.assign({}, {\n      variantId: id,\n      variantName: this.state.variantName,\n      style: this.state.style,\n      code: this.state.code,\n      elState: this.state.elState\n    }));\n    this.switchVariant(id);\n  }\n\n  deleteVariant(id) {\n    this.state.variants.forEach((s, i) => {\n      if (s.variantId == id) {\n        this.state.variants.splice(i, 1);\n        if (this.state.variantId == id) this.switchVariant((this.state.variants[i] || {}).variantId);\n        else this.update();\n      }\n    });\n  }\n\n  saveVariant() {\n    const id = this.state.variantId;\n    this.state.variants.forEach(s => {\n      if (s.variantId == id) {\n        Object.assign(s, {\n          variantName: this.state.variantName,\n          style: this.state.style,\n          code: this.state.code,\n          elState: this.state.elState\n        });\n      }\n    });\n  }\n\n  switchVariant(id) {\n    Object.assign(this.state, this.variant(id));\n    this.update();\n  }\n\n  updateHtml(e, el) {\n    const html = `<${el.value}></${el.value}>`;\n    this.state = { code: html, element: el.value };\n  }\n\n  element() {\n    return this.$('#element').firstElementChild;\n  }\n\n  variant(id) {\n    return this.state.variants.filter(s => s.variantId == id)[0] || this.state.variants[this.state.variants.length - 1];\n  }\n}\n\nSifrrSingleShowcase.defaultState = defaultShowcase;\n\nif (window) SifrrDom.register(SifrrSingleShowcase);\n\nexport default SifrrSingleShowcase;\n","import SifrrDom from '@sifrr/dom';\nimport SifrrStorage from '@sifrr/storage';\nimport style from './style.scss';\nimport './singleshowcase';\n\nconst template = SifrrDom.template`<style media=\"screen\">\n  ${style}\n</style>\n<div class=\"container\">\n  <div class=\"flex-column\" id=\"sidemenu\">\n    <div class=\"box\">\n      <h1>Sifrr Showcase</h1>\n      <p id=\"loader\"></p>\n      <input id=\"url\" type=\"text\" placeholder=\"Enter url here...\" name=\"url\" />\n      <button type=\"button\" name=\"loadUrl\" _click=\\${this.loadUrl}>Load from url</button>\n      <p id=\"status\"></p>\n      <span class=\"button\">\n        Upload File\n        <input type=\"file\" name=\"file\" accept=\"application/json\" _input=\"\\${this.loadFile}\" />\n      </span>\n      <button type=\"button\" name=\"saveFile\" _click=\"\\${this.saveFile}\">Save to File</button>\n      <h3>Showcases</h3>\n      <input id=\"showcaseName\" type=\"text\" name=\"showcase\" _input=\\${this.changeName}>\n      <button type=\"button\" name=\"createVariant\" _click=\"\\${this.createShowcase}\">Create new showcase</button>\n      <style>\n        #showcase\\${this.state.current} {\n          background: #5f616d;\n        }\n      </style>\n      <div id=\"showcases\" data-sifrr-repeat=\"\\${this.state.showcases}\">\n        <li class=\"showcase\" data-showcase-id=\"\\${this.state.key}\">\\${this.state.name}<span>X</span></li>\n      </div>\n    </div>\n  </div>\n  <sifrr-single-showcase _update=\\${this.saveShowcase}></sifrr-single-showcase>\n</div>`;\n\nconst storage = new SifrrStorage({ name: 'showcases', version: '1.0' });\n\nclass SifrrShowcase extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  static observedAttrs() {\n    return ['url'];\n  }\n\n  onAttributeChange(n, _, value) {\n    if (n === 'url') this.url = value;\n  }\n\n  onConnect() {\n    Sifrr.Dom.Event.addListener('click', '.showcase', (e, el) => {\n      if (el.matches('.showcase')) this.switchShowcase(this.getChildIndex(el));\n      if (el.matches('.showcase span')) this.deleteShowcase(this.getChildIndex(el));\n    });\n    this.switchShowcase(0);\n    storage.get(['showcases', 'current']).then(v => {\n      if (Array.isArray(v.showcases)) this.state = v;\n      this.switchShowcase(v.current);\n      this._loaded = true;\n    });\n  }\n\n  getChildIndex(el) {\n    let i = 0;\n    while((el = el.previousSibling) != null) i++;\n    return i;\n  }\n\n  deleteShowcase(i) {\n    this.state.showcases.splice(i, 1);\n    if (i == this.state.current) this.switchShowcase(this.state.current);\n    else this.switchShowcase(this.state.current - 1);\n  }\n\n  createShowcase() {\n    const i = this.state.showcases.push({ name: this.$('#showcaseName').value, variants: [] });\n    this.switchShowcase(i - 1);\n  }\n\n  switchShowcase(i) {\n    if (!this.state.showcases[i]) i = this.state.showcases.length - 1;\n    this.state = { current: i };\n    this.el.state = this.state.showcases[i];\n    this.$('#showcases').children[i].id = 'showcase' + i;\n  }\n\n  saveShowcase() {\n    delete this.el.state.name;\n    this.state.showcases[this.state.current] = Object.assign(this.state.showcases[this.state.current], this.el.state);\n    if (this._loaded) {\n      this.$('#status').textContent = 'saving locally!';\n      if (this._timeout) clearTimeout(this._timeout);\n      setTimeout(() => {\n        storage.set({ showcases: this.state.showcases, current: this.state.current }).then(() => {\n          this.$('#status').textContent = 'saved locally!';\n        });\n      }, 500);\n    }\n  }\n\n  changeName() {\n    this.state.showcases[this.state.current].name = this.$('#showcaseName').value;\n    this.update();\n  }\n\n  get el() {\n    return this.$('sifrr-single-showcase');\n  }\n\n  set url(v) {\n    this._url = v;\n    if (this.getAttribute('url') !== v) this.setAttribute('url', v);\n    if (this.$('#url').value !== v) this.$('#url').value = v;\n    this.loadUrl();\n  }\n\n  get url() {\n    return this._url;\n  }\n\n  loadUrl() {\n    this._url = this.$('#url').value;\n    window.fetch(this._url).then((resp) => resp.json()).then(json => {\n      this.state = json;\n      this.$('#status').textContent = 'loaded from url!';\n    }).catch((e) => {\n      this.$('#status').textContent = e.message;\n    });\n  }\n\n  saveFile() {\n    const blob = new Blob([JSON.stringify(this.state, null, 2)], {\n      type: 'application/json'\n    });\n    const a = document.createElement('a');\n    a.href = URL.createObjectURL(blob);\n    a.download = 'showcases';\n    a.click();\n  }\n\n  loadFile(e, el) {\n    const file = el.files[0];\n    const fr = new FileReader();\n    fr.onload = () => {\n      const json = JSON.parse(fr.result);\n      this.state = json;\n      this.$('#status').textContent = 'loaded from file!';\n    };\n    fr.readAsText(file);\n  }\n}\n\nSifrrShowcase.defaultState = {\n  current: 0,\n  showcases: [{\n    name: 'new'\n  }]\n};\n\nif (window) SifrrDom.register(SifrrShowcase);\n\nexport default SifrrShowcase;\n","import SifrrDom from '@sifrr/dom';\nimport style from './style.scss';\n\nconst template = SifrrDom.template`\n<style media=\"screen\">\n  ${style}\n</style>\n<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/atom-one-dark.min.css\">\n<pre class='hljs'>\n  <code id=\"highight\" data-sifrr-html=\"true\">\n    \\${this.htmlValue}\n  </code>\n</pre>\n<textarea class='hljs' _input=\"\\${this.input}\"></textarea>`;\n\nclass SifrrCodeEditor extends SifrrDom.Element {\n  static get template() {\n    return template;\n  }\n\n  onAttributeChange() {\n    this.update();\n  }\n\n  onConnect() {\n    fetch(\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js\")\n      .then(resp => resp.text())\n      .then(text => new Function(text)())\n      .then(() => this.hljsLoaded());\n\n    const txtarea = this.$('textarea');\n    this.$('textarea').addEventListener('keydown', (e) => {\n      let keyCode = e.keyCode || e.which;\n      if (keyCode == 9) {\n        e.preventDefault();\n        const start = txtarea.selectionStart;\n        const end = txtarea.selectionEnd;\n\n        const tabCharacter = '  ';\n        const tabOffset = 2;\n\n        // set textarea value to: text before caret + tab + text after caret\n        txtarea.value = txtarea.value.substring(0, start) + tabCharacter + txtarea.value.substring(end);\n\n        // put caret at right position again\n        txtarea.selectionStart = txtarea.selectionEnd = start + tabOffset;\n      }\n    });\n  }\n\n  input() {\n    SifrrDom.Event.trigger(this, 'input');\n    this.update();\n  }\n\n  hljsLoaded() {\n    this.$('textarea').classList.add('loaded');\n    this.update();\n  }\n\n  get htmlValue() {\n    if (window.hljs) return hljs.highlight(this.lang, this.value).value;\n    else return this.value.replace(/</g, '&lt;');\n  }\n\n  get value() {\n    return this.$('textarea').value;\n  }\n\n  set value(v) {\n    this.$('textarea').value = v;\n    this.update();\n  }\n\n  get lang() {\n    return this.getAttribute('lang') || 'html';\n  }\n}\n\nif (window) SifrrDom.register(SifrrCodeEditor);\n\nexport default SifrrCodeEditor;\n"],"names":["moveAttr","el","attr","dataset","setAttribute","removeAttribute","loadPicture","pic","sifrrLazyLoaded","$$","forEach","s","img","$","SifrrLazyPicture","Sifrr","Dom","Element","extends","HTMLPictureElement","useShadowRoot","observer","_observer","IntersectionObserver","onVisible","rootMargin","entries","entry","console","log","isIntersecting","unobserve","target","onConnect","constructor","observe","onDisconnect","window","SifrrDom","register","template","style","removeExceptOne","elems","classN","index","j","length","classList","remove","add","SifrrTabs","options","menu","content","tabcontainer","menus","assignedNodes","tabs","la","ra","line","num","showArrows","arrowMargin","showMenu","step","tabHeight","showUnderline","loop","animation","animationTime","scrollBreakpoint","getAttribute","Object","assign","JSON","parse","animations","setWindowResizeEvent","setClickEvents","setSlotChangeEvent","refresh","params","width","clientWidth","margin","setProps","active","state","i","onStateChange","getTabNumber","isNaN","animate","display","hasPrev","hasNext","next","prev","l","Array","from","e","setMenuProps","offsetWidth","setScrollEvent","height","me","left","menuProps","elem","_click","last","isScrolling","scrollPos","onscroll","requestAnimationFrame","onScroll","total","scrollLeft","per","t","Math","floor","parentElement","clearTimeout","setTimeout","addEventListener","fxn","who","what","to","time","type","diff","startTime","frame","currentTime","percent","round","call","linear","easeOut","easeIn","none","Event","SifrrStater","storage","SifrrStorage","name","location","href","addListener","contains","toState","parseInt","stateIndex","deleteState","parentNode","commit","resetToFirstState","removeTarget","addState","showHide","addTargetOnEnter","event","key","addTarget","headingHtml","queries","map","q","join","stateHtml","states","jsn","activeStates","prettyJSON","query","value","document","querySelector","isSifrr","targets","indexOf","push","stringify","update","getTarget","splice","newState","stateN","last_state","commitAll","n","resetAllToFirstState","clear","clearAll","saveData","then","data","insert","loadData","Number","isInteger","json","replace","match","cls","test","defaultState","html","defaultShowcase","id","element","elementUrl","isjs","variantName","variants","variantId","code","elState","SifrrSingleShowcase","observedAttrs","switchVariant","matches","deleteVariant","beforeUpdate","saveVariant","onUpdate","_element","_js","_url","load","js","url","undefined","innerText","catch","message","Function","onAttributeChange","_","createNewVariant","max","variant","updateHtml","firstElementChild","filter","version","SifrrShowcase","switchShowcase","getChildIndex","deleteShowcase","get","v","isArray","showcases","current","_loaded","previousSibling","createShowcase","children","saveShowcase","textContent","_timeout","set","changeName","loadUrl","fetch","resp","saveFile","blob","Blob","a","createElement","URL","createObjectURL","download","click","loadFile","file","files","fr","FileReader","onload","result","readAsText","SifrrCodeEditor","text","hljsLoaded","txtarea","keyCode","which","preventDefault","start","selectionStart","end","selectionEnd","tabCharacter","tabOffset","substring","input","trigger","htmlValue","hljs","highlight","lang"],"mappings":"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"}