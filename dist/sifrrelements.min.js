/*! SifrrElements v0.0.4 - sifrr project | MIT licensed | https://github.com/sifrr/sifrr */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@sifrr/dom"),require("@sifrr/storage")):"function"==typeof define&&define.amd?define(["exports","@sifrr/dom","@sifrr/storage"],e):e((t=t||self).SifrrElements={},t.Sifrr.Dom,t.Sifrr.Storage)}(this,function(t,e,n){"use strict";function s(t,e){t.dataset[e]&&(t.setAttribute(e,t.dataset[e]),t.removeAttribute("data-".concat(e)))}e=e&&e.hasOwnProperty("default")?e.default:e,n=n&&n.hasOwnProperty("default")?n.default:n;class i extends(Sifrr.Dom.Element.extends(HTMLPictureElement)){static useShadowRoot(){return!0}static get observer(){return this._observer=this._observer||new IntersectionObserver(this.onVisible,{rootMargin:this.rootMargin}),this._observer}static onVisible(t){t.forEach(t=>{t.isIntersecting&&(i.observer.unobserve(t.target),function(t){!t.sifrrLazyLoaded&&(t.sifrrLazyLoaded=!0,t.$$("source",!1).forEach(t=>{s(t,"srcset")}),s(t.$("img",!1),"src"))}(t.target))})}onConnect(){this.sifrrLazyLoaded=!1,this.constructor.observer.observe(this)}onDisconnect(){this.constructor.observer.unobserve(this)}}i.rootMargin="0px 0px 200px 0px",window&&e.register(i,{extends:"picture"});const a=/* */Object.freeze({default:i});function o(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function r(){const t=o(['<style media="screen">\n  ','\n</style>\n<div class="headings">\n  <ul>\n    <slot name="heading">\n    </slot>\n  </ul>\n  <div class="underline"></div>\n</div>\n<div class="content">\n  <div class="arrow l">\n    <span></span>\n  </div>\n  <div class="arrow r">\n    <span></span>\n  </div>\n  <div class="tabs">\n    <slot name="tab">\n    </slot>\n  </div>\n</div>']);return r=function(){return t},t}const l=e.template(r(),':host {\n  /* CSS for tabs container */\n  line-height: 24px;\n  overflow: hidden;\n  width: 100%;\n  display: block;\n  position: relative;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-radius: 5px; }\n\n.headings {\n  /* CSS for heading bar */\n  width: 100%;\n  overflow-y: hidden;\n  overflow-x: auto;\n  position: relative;\n  background: #714cfe;\n  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.2); }\n\n.headings ul {\n  padding: 0 0 3px;\n  margin: 0;\n  font-size: 0; }\n\n/* CSS for heading text li */\n.headings *::slotted(li) {\n  font-size: 16px;\n  display: inline-block;\n  text-align: center;\n  padding: 8px;\n  text-decoration: none;\n  list-style: none;\n  color: white;\n  border-bottom: 2px solid transparent;\n  opacity: 0.9;\n  cursor: pointer;\n  box-sizing: border-box; }\n\n.headings *::slotted(li.active) {\n  opacity: 1; }\n\n.headings *::slotted(li:hover) {\n  opacity: 1; }\n\n/* CSS for line under active tab heading */\n.headings .underline {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  height: 3px;\n  background: white; }\n\n/* Arrows css */\n.arrow {\n  position: absolute;\n  z-index: 5;\n  top: 0;\n  bottom: 0;\n  width: 20px; }\n\n.arrow > * {\n  position: absolute;\n  width: 8px;\n  height: 8px;\n  margin: -6px 5px;\n  top: 50%;\n  border: solid white;\n  border-width: 0 3px 3px 0;\n  display: inline-block;\n  padding: 3px;\n  filter: drop-shadow(-1px -1px 3px #000); }\n\n.arrow.l {\n  left: 0; }\n\n.arrow.l > * {\n  left: 0;\n  transform: rotate(135deg); }\n\n.arrow.r {\n  right: 0; }\n\n.arrow.r > * {\n  right: 0;\n  transform: rotate(-45deg); }\n\n/* Tab container css */\n.content {\n  width: 100%;\n  height: 100%;\n  overflow-x: auto;\n  overflow-y: hidden;\n  margin: 0;\n  line-height: normal;\n  box-sizing: border-box; }\n\n.content .tabs {\n  min-height: 1px; }\n\n/* Tab element css */\n.content *::slotted([slot="tab"]) {\n  float: left;\n  max-height: 100%;\n  width: 100%;\n  height: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  vertical-align: top;\n  padding: 8px;\n  box-sizing: border-box; }\n');function h(t,e,n){for(let s=0;s<t.length;s++)s!==n&&t[s]!==n?t[s].classList.remove(e):t[s].classList.add(e)}class c extends e.Element{static get template(){return l}onConnect(){this.options={menu:this.$(".headings ul"),content:this.$(".content"),tabcontainer:this.$(".tabs"),menus:this.$("slot[name=heading]").assignedNodes(),tabs:this.$("slot[name=tab]").assignedNodes(),la:this.$(".arrow.l"),ra:this.$(".arrow.r"),line:this.$(".underline"),num:1,showArrows:!1,arrowMargin:0,showMenu:!0,step:1,tabHeight:"auto",showUnderline:!0,loop:!1,animation:"easeOut",animationTime:150,scrollBreakpoint:.2},this.getAttribute("options")&&Object.assign(this.options,JSON.parse(this.getAttribute("options"))),this.animations=this.animations(),this.setWindowResizeEvent(),this.setClickEvents(),this.setSlotChangeEvent(),this.refresh()}refresh(t={}){Object.assign(this.options,t),!this.options.tabs||this.options.tabs.length<1||(this.width=this.clientWidth/this.options.num,this.margin=0,this.options.showArrows&&(this.width-=2*this.options.arrowMargin,this.margin=this.options.arrowMargin),this.setProps(),this.active=t.active||this.active||0)}get active(){return this.state?this.state.active:0}set active(t){this.state={active:t}}onStateChange(){if(!this.options)return;let t=this.state.active;(t=this.getTabNumber(t))+this.options.num-1==this.options.tabs.length&&(t=this.options.loop?0:this.options.tabs.length-this.options.num),t===this.state.active?(this.animate(this.options.content,"scrollLeft",t*(this.width+2*this.margin),this.options.animationTime,this.options.animation),h(this.options.tabs,"active",t),h(this.options.tabs,"prev",this.getTabNumber(t-1)),h(this.options.tabs,"next",this.getTabNumber(t+1)),h(this.options.menus,"active",t),h(this.options.menus,"prev",this.getTabNumber(t-1)),h(this.options.menus,"next",this.getTabNumber(t+1)),this.options.showArrows&&(this.options.la.style.display=this.hasPrev()||this.options.loop?"block":"none",this.options.ra.style.display=this.hasNext()||this.options.loop?"block":"none")):this.state={active:t}}next(){this.active=this.state.active+this.options.step}hasNext(){return this.active!==this.options.tabs.length-this.options.num}prev(){this.active=this.state.active-this.options.step}hasPrev(){return 0!==this.active}getTabNumber(t){const e=this.options.tabs.length;return t=t<0?t+e:t%e}setProps(){this.options.showArrows?Array.from(this.options.tabs).forEach(t=>t.style.margin="0 ".concat(this.margin,"px")):(this.options.la&&(this.options.la.style.display="none"),this.options.ra&&(this.options.ra.style.display="none")),this.options.showUnderline||this.options.line&&(this.options.line.style.display="none"),this.options.showMenu?(this.setMenuProps(),this.options.line.style.width=this.options.menus[0].offsetWidth+"px"):this.options.menu&&(this.options.menu.style.display="none"),this.setScrollEvent(),this.options.tabcontainer.style.width=this.options.tabs.length*(this.width+2*this.margin)+"px",this.options.tabcontainer.style.height=this.options.tabHeight,Array.from(this.options.tabs).forEach(t=>t.style.width=this.width+"px")}setMenuProps(){const t=this;let e=0;this.options.menuProps={},Array.from(this.options.menus).forEach((n,s)=>{this.options.menuProps[s]={width:n.offsetWidth,left:e},e+=n.offsetWidth,n._click=(()=>t.active=s)});const n=this.options.menuProps[this.options.menus.length-1];this.options.menu.style.width=n.left+n.width+5+"px";const s=this.options.menuProps[this.active];s&&(t.options.line.style.left=s.left+"px",t.options.line.style.width=s.width+"px")}setClickEvents(){let t=this;this.options.la&&(this.options.la._click=(()=>t.prev())),this.options.ra&&(this.options.ra._click=(()=>t.next()))}setScrollEvent(){let t,e=this,n=-1;function s(){const s=e.options.content.scrollLeft/e.width,i=s%1;n<0&&(n=i);const a=Math.floor(s);try{const t=e.options.menuProps[a].left*(1-i)+(e.options.menuProps[a+1]||{left:0}).left*i,n=e.options.menuProps[a].width*(1-i)+(e.options.menuProps[a+1]||{width:0}).width*i;e.options.line.style.left=t+"px",e.options.line.style.width=n+"px",e.options.menu.parentElement.scrollLeft=t-(e.width-n)/2}catch(t){}clearTimeout(t),t=setTimeout(function(){i-n<-e.options.scrollBreakpoint?e.active=a:i-n>+e.options.scrollBreakpoint?e.active=a+1:e.active=e.active,n=-1},66)}e.options.content.onscroll=(()=>requestAnimationFrame(s))}setWindowResizeEvent(){const t=this;window.addEventListener("resize",function(){t.refresh()})}setSlotChangeEvent(){const t=this,e=()=>{t.options.menus=t.$$("slot")[0].assignedNodes(),t.options.tabs=t.$$("slot")[1].assignedNodes(),t.refresh()};this.$$("slot")[0].addEventListener("slotchange",e),this.$$("slot")[1].addEventListener("slotchange",e)}animate(t,e,n,s,i="easeOut"){const a=t[e],o=n-a,r=this;let l;window.requestAnimationFrame(function h(c){if(c-(l=l||c)>s)return void(t[e]=n);let d=(c-l)/s;t[e]=Math.round(r.animations[i].call(this,d)*o+a),window.requestAnimationFrame(h)})}animations(){return{linear:t=>t,easeOut:t=>--t*t*t+1,easeIn:t=>t*t*t,none:t=>1}}}window&&e.register(c);const d=/* */Object.freeze({default:c});function p(){const t=o(["<style>\n  ",'\n</style>\n<div id="showHide" _click=${this.showHide}></div>\n<sifrr-tabs options=\'{"tabHeight": "calc(100vh - 132px)"}\' data-sifrr-html="true">\n  ${ this.headingHtml() }\n  ${ this.stateHtml() }\n</sifrr-tabs>\n<footer>\n  <input _keyup=${this.addTargetOnEnter} id="addTargetInput" type="text" name="addTargetInput" value="" placeholder="Enter css selector query of target">\n  <button _click=${this.addTarget} class="btn3" type="button" name="addTargetButton">Add Taget</button>\n  <button _click=${this.commitAll} class="btn3" type="button" name="commitAll">Commit All</button>\n  <button _click=${this.resetAllToFirstState} class="btn3" type="button" name="resetAll">Reset All</button>\n  <button _click=${this.saveData} class="btn3" type="button" name="saveData">Save Data</button>\n  <button _click=${this.loadData} class="btn3" type="button" name="loadData">Load Data</button>\n  <button _click=${this.clearAll} class="btn3" type="button" name="clearAll">Remove All</button>\n</footer>'],["<style>\n  ",'\n</style>\n<div id="showHide" _click=\\${this.showHide}></div>\n<sifrr-tabs options=\'{"tabHeight": "calc(100vh - 132px)"}\' data-sifrr-html="true">\n  \\${ this.headingHtml() }\n  \\${ this.stateHtml() }\n</sifrr-tabs>\n<footer>\n  <input _keyup=\\${this.addTargetOnEnter} id="addTargetInput" type="text" name="addTargetInput" value="" placeholder="Enter css selector query of target">\n  <button _click=\\${this.addTarget} class="btn3" type="button" name="addTargetButton">Add Taget</button>\n  <button _click=\\${this.commitAll} class="btn3" type="button" name="commitAll">Commit All</button>\n  <button _click=\\${this.resetAllToFirstState} class="btn3" type="button" name="resetAll">Reset All</button>\n  <button _click=\\${this.saveData} class="btn3" type="button" name="saveData">Save Data</button>\n  <button _click=\\${this.loadData} class="btn3" type="button" name="loadData">Load Data</button>\n  <button _click=\\${this.clearAll} class="btn3" type="button" name="clearAll">Remove All</button>\n</footer>']);return p=function(){return t},t}const u=e.template(p(),":host {\n  position: fixed;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  height: 100%;\n  max-width: 100%;\n  width: 320px;\n  z-index: 1000;\n  background-color: rgba(0, 0, 0, 0.8);\n  transform: translate3d(100%, 0, 0);\n  transition: all 0.2s ease; }\n\n:host(.show) {\n  transform: translate3d(0, 0, 0); }\n\n* {\n  box-sizing: border-box; }\n\n#showHide {\n  position: fixed;\n  left: -30px;\n  top: 0;\n  bottom: 0;\n  width: 30px;\n  height: 30px;\n  margin-top: 5px;\n  background-color: blue;\n  z-index: 2; }\n\n.stateContainer {\n  padding-left: 10px;\n  margin-left: 10px;\n  border-left: 1px solid white;\n  position: relative; }\n\n.stateContainer.off {\n  opacity: 0.5; }\n\n.stateContainer .dotC {\n  position: absolute;\n  top: 0;\n  left: -10px;\n  width: 20px;\n  height: 100%;\n  cursor: pointer; }\n\n.stateContainer .dotC .dot {\n  position: absolute;\n  top: 50%;\n  left: 10px;\n  width: 10px;\n  height: 10px;\n  transform: translate3d(-50%, -50%, 0);\n  background-color: white;\n  border-radius: 50%; }\n\n.stateContainer .delete {\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 4px;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: white;\n  cursor: pointer; }\n\n.state {\n  white-space: pre-wrap;\n  max-height: 90px;\n  overflow: hidden;\n  background-color: rgba(255, 255, 255, 0.97);\n  padding: 5px;\n  margin-bottom: 5px;\n  position: relative;\n  cursor: pointer; }\n\n.state:hover::after {\n  content: '\\\\\\/';\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  text-align: center;\n  color: white; }\n\n.state.open {\n  max-height: none; }\n\n.state.open:hover::after {\n  content: '\\/\\\\'; }\n\n.key {\n  color: red; }\n\n.string {\n  color: green; }\n\n.number, .null, .boolean {\n  color: blue; }\n\nfooter {\n  position: absolute;\n  bottom: 0; }\n\ninput {\n  margin: 3px;\n  width: calc(100% - 6px);\n  padding: 3px; }\n\n.btn3 {\n  margin: 3px;\n  width: calc(33% - 8px);\n  padding: 3px;\n  background: white; }\n");e.Event.add("click"),e.Event.add("keyup");class g extends e.Element{static get template(){return u}onConnect(){let t=this;this.storage=new n({name:window.location.href}),e.Event.addListener("click",".state",function(t,e){e.classList.contains("open")?e.classList.remove("open"):e.classList.add("open")}),e.Event.addListener("click",".dotC",function(e,n,s){t.toState(parseInt(s.dataset.target),parseInt(s.dataset.stateIndex))}),e.Event.addListener("click",".delete",function(e,n){t.deleteState(parseInt(n.dataset.target),parseInt(n.dataset.stateIndex))}),e.Event.addListener("click",".commit",function(e,n){const s=parseInt(n.parentNode.dataset.target);t.commit(s)}),e.Event.addListener("click",".reset",function(e,n){const s=parseInt(n.parentNode.dataset.target);t.resetToFirstState(s)}),e.Event.addListener("click",".remove",function(e,n){const s=parseInt(n.parentNode.dataset.target);t.removeTarget(s)}),e.Element.onStateChange=function(e){t.addState(e,e.state)}}showHide(){this.classList.contains("show")?this.classList.remove("show"):this.classList.add("show")}addTargetOnEnter(t){"Enter"===t.key&&this.addTarget()}headingHtml(){return this.state.queries.map(t=>'<li slot="heading">'.concat(t,"</li>")).join("")}stateHtml(){let t=this;return this.state.states.map((e,n)=>'<div data-target="'.concat(n,'" slot="tab">\n      <button class="btn3 commit" type="button" name="commit">Commit</button>\n      <button class="btn3 reset" type="button" name="reset">Reset</button>\n      <button class="btn3 remove" type="button" name="remove">Remove</button>\n      ').concat(e.map((e,s)=>'<div class="stateContainer '.concat(s<=t.state.activeStates[n]?"on":"off",'">\n                           <div class="dotC" data-target="').concat(n,'" data-state-index="').concat(s,'"><div class="dot"></div></div>\n                           <div class="state">').concat(g.prettyJSON(e),'</div>\n                           <div class="delete" data-target="').concat(n,'" data-state-index="').concat(s,'">X</div>\n                           </div>')).join(""),"</div>")).join("")}addTarget(t){"string"!=typeof t&&(t=this.$("#addTargetInput").value);const e=window.document.querySelector(t);if(!e.isSifrr)return console.log("Invalid Sifrr Element.",e),!1;if(!e.state)return console.log("Sifrr Element has no state.",e),!1;let n=this.state.targets.indexOf(e);n>-1||(this.state.targets.push(e),this.state.queries.push(t),n=this.state.targets.indexOf(e),this.state.states[n]=[JSON.parse(JSON.stringify(e.state))],this.state.activeStates[n]=0,this.update())}removeTarget(t){const{index:e,target:n}=this.getTarget(t);e>-1&&(this.state.targets.splice(e,1),this.state.queries.splice(e,1),this.state.states.splice(e,1),this.state.activeStates.splice(e,1),this.update())}addState(t,e){const{index:n,target:s}=this.getTarget(t);if(n>-1){const t=this.state.activeStates[n],s=JSON.stringify(e);s!==JSON.stringify(this.state.states[n][t])&&(this.state.states[n].splice(t+1,0,JSON.parse(s)),this.state.activeStates[n]=t+1,this.update())}}deleteState(t,e){const{index:n,target:s}=this.getTarget(t);this.state.states[n].splice(e,1),e<this.state.activeStates[n]?this.state.activeStates[n]-=1:e==this.state.activeStates[n]&&(this.state.activeStates[n]-=1,this.toState(n,this.state.activeStates[n])),this.update()}commit(t){const{index:e,target:n}=this.getTarget(t),s=this.state.states[e][this.state.states[e].length-1];this.state.states[e]=[s],this.state.activeStates[e]=0,this.update()}commitAll(){const t=this;this.state.targets.forEach(e=>t.commit(e)),this.update()}toState(t,e){const{index:n,target:s}=this.getTarget(t);this.state.activeStates[n];this.state.activeStates[n]=e,s.state=this.state.states[n][e],this.update()}resetToFirstState(t){const{index:e,target:n}=this.getTarget(t);this.toState(n,0,!1),this.state.states[e]=[this.state.states[e][0]],this.update()}resetAllToFirstState(){const t=this;this.state.targets.forEach(e=>t.resetToFirstState(e)),this.update()}clear(t){const{index:e}=this.getTarget(t);this.state.activeStates[e]=-1,this.state.states[e]=[],this.update()}clearAll(){const t=this;this.state.targets.forEach(e=>t.clear(e)),this.update()}saveData(){const t=this;this.storage.clear().then(()=>{t.state.queries.forEach((e,n)=>{const s={active:t.state.activeStates[n],states:t.state.states[n]};t.storage.insert(e,s)})})}loadData(){const t=this;this.storage.data().then(e=>{let n=0;for(let s in e)t.addTarget(s),t.clear(n),e[s].states.forEach(e=>t.addState(n,e)),t.toState(n,e[s].active),n++})}getTarget(t){let e;return Number.isInteger(t)?(e=t,t=this.state.targets[e]):e=this.state.targets.indexOf(t),{index:e,target:t}}static prettyJSON(t){return(t=(t=JSON.stringify(t,null,4)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(t){var e="number";return/:$/.test(t)?'<span class="'+(e="key")+'">'+t+"</span>":(/^"/.test(t)?e="string":/true|false/.test(t)?e="boolean":/null/.test(t)&&(e="null"),'<span class="'+e+'">'+t+"</span>")})}}g.defaultState={targets:[],states:[],queries:[],activeStates:[]},window&&e.register(g);const b=/* */Object.freeze({default:g});function m(t){return t&&t.default||t}var f={SifrrLazyPicture:m(a),SifrrStater:m(b),SifrrTabs:m(d)},v=f.SifrrLazyPicture,x=f.SifrrStater,w=f.SifrrTabs;t.SifrrLazyPicture=v,t.SifrrStater=x,t.SifrrTabs=w,t.default=f,Object.defineProperty(t,"__esModule",{value:!0})});
/*! (c) @aadityataparia */
