/*! SifrrElements v0.0.4 - sifrr project | MIT licensed | https://github.com/sifrr/sifrr */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@sifrr/dom"),require("@sifrr/storage")):"function"==typeof define&&define.amd?define(["exports","@sifrr/dom","@sifrr/storage"],e):e((t=t||self).SifrrElements={},t.Sifrr.Dom,t.Sifrr.Storage)}(this,function(t,e,a){"use strict";function s(t,e){t.dataset[e]&&(t.setAttribute(e,t.dataset[e]),t.removeAttribute("data-".concat(e)))}e=e&&e.hasOwnProperty("default")?e.default:e,a=a&&a.hasOwnProperty("default")?a.default:a;class n extends(Sifrr.Dom.Element.extends(HTMLPictureElement)){static useShadowRoot(){return!0}static get observer(){return this._observer=this._observer||new IntersectionObserver(this.onVisible,{rootMargin:this.rootMargin}),this._observer}static onVisible(t){t.forEach(t=>{t.isIntersecting&&(n.observer.unobserve(t.target),function(t){!t.sifrrLazyLoaded&&(t.sifrrLazyLoaded=!0,t.$$("source",!1).forEach(t=>{s(t,"srcset")}),s(t.$("img",!1),"src"))}(t.target))})}onConnect(){this.sifrrLazyLoaded=!1,this.constructor.observer.observe(this)}onDisconnect(){this.constructor.observer.unobserve(this)}}n.rootMargin="0px 0px 200px 0px",window&&e.register(n,{extends:"picture"});const i=/* */Object.freeze({});function r(){const t=(e=["<style>\n  ",'\n</style>\n<div id="showHide" _click=${this.showHide}></div>\n<sifrr-tabs options=\'{"tabHeight": "calc(100vh - 132px)"}\' data-sifrr-html="true">\n  ${ this.headingHtml() }\n  ${ this.stateHtml() }\n</sifrr-tabs>\n<footer>\n  <input _keyup=${this.addTargetOnEnter} id="addTargetInput" type="text" name="addTargetInput" value="" placeholder="Enter css selector query of target">\n  <button _click=${this.addTarget} class="btn3" type="button" name="addTargetButton">Add Taget</button>\n  <button _click=${this.commitAll} class="btn3" type="button" name="commitAll">Commit All</button>\n  <button _click=${this.resetAllToFirstState} class="btn3" type="button" name="resetAll">Reset All</button>\n  <button _click=${this.saveData} class="btn3" type="button" name="saveData">Save Data</button>\n  <button _click=${this.loadData} class="btn3" type="button" name="loadData">Load Data</button>\n  <button _click=${this.clearAll} class="btn3" type="button" name="clearAll">Remove All</button>\n</footer>'],(a=["<style>\n  ",'\n</style>\n<div id="showHide" _click=\\${this.showHide}></div>\n<sifrr-tabs options=\'{"tabHeight": "calc(100vh - 132px)"}\' data-sifrr-html="true">\n  \\${ this.headingHtml() }\n  \\${ this.stateHtml() }\n</sifrr-tabs>\n<footer>\n  <input _keyup=\\${this.addTargetOnEnter} id="addTargetInput" type="text" name="addTargetInput" value="" placeholder="Enter css selector query of target">\n  <button _click=\\${this.addTarget} class="btn3" type="button" name="addTargetButton">Add Taget</button>\n  <button _click=\\${this.commitAll} class="btn3" type="button" name="commitAll">Commit All</button>\n  <button _click=\\${this.resetAllToFirstState} class="btn3" type="button" name="resetAll">Reset All</button>\n  <button _click=\\${this.saveData} class="btn3" type="button" name="saveData">Save Data</button>\n  <button _click=\\${this.loadData} class="btn3" type="button" name="loadData">Load Data</button>\n  <button _click=\\${this.clearAll} class="btn3" type="button" name="clearAll">Remove All</button>\n</footer>'])||(a=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(a)}})));var e,a;return r=function(){return t},t}const o=e.template(r(),":host {\n  position: fixed;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  height: 100%;\n  max-width: 100%;\n  width: 320px;\n  z-index: 1000;\n  background-color: rgba(0, 0, 0, 0.8);\n  transform: translate3d(100%, 0, 0);\n  transition: all 0.2s ease; }\n\n:host(.show) {\n  transform: translate3d(0, 0, 0); }\n\n* {\n  box-sizing: border-box; }\n\n#showHide {\n  position: fixed;\n  left: -30px;\n  top: 0;\n  bottom: 0;\n  width: 30px;\n  height: 30px;\n  margin-top: 5px;\n  background-color: blue;\n  z-index: 2; }\n\n.stateContainer {\n  padding-left: 10px;\n  margin-left: 10px;\n  border-left: 1px solid white;\n  position: relative; }\n\n.stateContainer.off {\n  opacity: 0.5; }\n\n.stateContainer .dotC {\n  position: absolute;\n  top: 0;\n  left: -10px;\n  width: 20px;\n  height: 100%;\n  cursor: pointer; }\n\n.stateContainer .dotC .dot {\n  position: absolute;\n  top: 50%;\n  left: 10px;\n  width: 10px;\n  height: 10px;\n  transform: translate3d(-50%, -50%, 0);\n  background-color: white;\n  border-radius: 50%; }\n\n.stateContainer .delete {\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 4px;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: white;\n  cursor: pointer; }\n\n.state {\n  white-space: pre-wrap;\n  max-height: 90px;\n  overflow: hidden;\n  background-color: rgba(255, 255, 255, 0.97);\n  padding: 5px;\n  margin-bottom: 5px;\n  position: relative;\n  cursor: pointer; }\n\n.state:hover::after {\n  content: '\\\\\\/';\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  text-align: center;\n  color: white; }\n\n.state.open {\n  max-height: none; }\n\n.state.open:hover::after {\n  content: '\\/\\\\'; }\n\n.key {\n  color: red; }\n\n.string {\n  color: green; }\n\n.number, .null, .boolean {\n  color: blue; }\n\nfooter {\n  position: absolute;\n  bottom: 0; }\n\ninput {\n  margin: 3px;\n  width: calc(100% - 6px);\n  padding: 3px; }\n\n.btn3 {\n  margin: 3px;\n  width: calc(33% - 8px);\n  padding: 3px;\n  background: white; }\n");e.Event.add("click"),e.Event.add("keyup");class c extends e.Element{static get template(){return o}onConnect(){let t=this;this.storage=new a({name:window.location.href}),e.Event.addListener("click",".state",function(t,e){e.classList.contains("open")?e.classList.remove("open"):e.classList.add("open")}),e.Event.addListener("click",".dotC",function(e,a,s){t.toState(parseInt(s.dataset.target),parseInt(s.dataset.stateIndex))}),e.Event.addListener("click",".delete",function(e,a){t.deleteState(parseInt(a.dataset.target),parseInt(a.dataset.stateIndex))}),e.Event.addListener("click",".commit",function(e,a){const s=parseInt(a.parentNode.dataset.target);t.commit(s)}),e.Event.addListener("click",".reset",function(e,a){const s=parseInt(a.parentNode.dataset.target);t.resetToFirstState(s)}),e.Event.addListener("click",".remove",function(e,a){const s=parseInt(a.parentNode.dataset.target);t.removeTarget(s)}),e.Element.onStateChange=function(e){t.addState(e,e.state)}}showHide(){this.classList.contains("show")?this.classList.remove("show"):this.classList.add("show")}addTargetOnEnter(t){"Enter"===t.key&&this.addTarget()}headingHtml(){return this.state.queries.map(t=>'<li slot="heading">'.concat(t,"</li>")).join("")}stateHtml(){let t=this;return this.state.states.map((e,a)=>'<div data-target="'.concat(a,'" slot="tab">\n      <button class="btn3 commit" type="button" name="commit">Commit</button>\n      <button class="btn3 reset" type="button" name="reset">Reset</button>\n      <button class="btn3 remove" type="button" name="remove">Remove</button>\n      ').concat(e.map((e,s)=>'<div class="stateContainer '.concat(s<=t.state.activeStates[a]?"on":"off",'">\n                           <div class="dotC" data-target="').concat(a,'" data-state-index="').concat(s,'"><div class="dot"></div></div>\n                           <div class="state">').concat(c.prettyJSON(e),'</div>\n                           <div class="delete" data-target="').concat(a,'" data-state-index="').concat(s,'">X</div>\n                           </div>')).join(""),"</div>")).join("")}addTarget(t){"string"!=typeof t&&(t=this.$("#addTargetInput").value);const e=window.document.querySelector(t);if(!e.isSifrr)return console.log("Invalid Sifrr Element.",e),!1;if(!e.state)return console.log("Sifrr Element has no state.",e),!1;let a=this.state.targets.indexOf(e);a>-1||(this.state.targets.push(e),this.state.queries.push(t),a=this.state.targets.indexOf(e),this.state.states[a]=[JSON.parse(JSON.stringify(e.state))],this.state.activeStates[a]=0,this.update())}removeTarget(t){const{index:e,target:a}=this.getTarget(t);e>-1&&(this.state.targets.splice(e,1),this.state.queries.splice(e,1),this.state.states.splice(e,1),this.state.activeStates.splice(e,1),this.update())}addState(t,e){const{index:a,target:s}=this.getTarget(t);if(a>-1){const t=this.state.activeStates[a],s=JSON.stringify(e);s!==JSON.stringify(this.state.states[a][t])&&(this.state.states[a].splice(t+1,0,JSON.parse(s)),this.state.activeStates[a]=t+1,this.update())}}deleteState(t,e){const{index:a,target:s}=this.getTarget(t);this.state.states[a].splice(e,1),e<this.state.activeStates[a]?this.state.activeStates[a]-=1:e==this.state.activeStates[a]&&(this.state.activeStates[a]-=1,this.toState(a,this.state.activeStates[a])),this.update()}commit(t){const{index:e,target:a}=this.getTarget(t),s=this.state.states[e][this.state.states[e].length-1];this.state.states[e]=[s],this.state.activeStates[e]=0,this.update()}commitAll(){const t=this;this.state.targets.forEach(e=>t.commit(e)),this.update()}toState(t,e){const{index:a,target:s}=this.getTarget(t);this.state.activeStates[a];this.state.activeStates[a]=e,s.state=this.state.states[a][e],this.update()}resetToFirstState(t){const{index:e,target:a}=this.getTarget(t);this.toState(a,0,!1),this.state.states[e]=[this.state.states[e][0]],this.update()}resetAllToFirstState(){const t=this;this.state.targets.forEach(e=>t.resetToFirstState(e)),this.update()}clear(t){const{index:e}=this.getTarget(t);this.state.activeStates[e]=-1,this.state.states[e]=[],this.update()}clearAll(){const t=this;this.state.targets.forEach(e=>t.clear(e)),this.update()}saveData(){const t=this;this.storage.clear().then(()=>{t.state.queries.forEach((e,a)=>{const s={active:t.state.activeStates[a],states:t.state.states[a]};t.storage.insert(e,s)})})}loadData(){const t=this;this.storage.data().then(e=>{let a=0;for(let s in e)t.addTarget(s),t.clear(a),e[s].states.forEach(e=>t.addState(a,e)),t.toState(a,e[s].active),a++})}getTarget(t){let e;return Number.isInteger(t)?(e=t,t=this.state.targets[e]):e=this.state.targets.indexOf(t),{index:e,target:t}}static prettyJSON(t){return(t=(t=JSON.stringify(t,null,4)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(t){var e="number";return/:$/.test(t)?'<span class="'+(e="key")+'">'+t+"</span>":(/^"/.test(t)?e="string":/true|false/.test(t)?e="boolean":/null/.test(t)&&(e="null"),'<span class="'+e+'">'+t+"</span>")})}}c.defaultState={targets:[],states:[],queries:[],activeStates:[]},window&&e.register(c);var l={SifrrLazyPicture:n,SifrrStater:/* */Object.freeze({default:c}),SifrrTabs:i},d=l.SifrrLazyPicture,h=l.SifrrStater,u=l.SifrrTabs;t.SifrrLazyPicture=d,t.SifrrStater=h,t.SifrrTabs=u,t.default=l,Object.defineProperty(t,"__esModule",{value:!0})});
/*! (c) @aadityataparia */
