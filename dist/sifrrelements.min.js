/*! SifrrElements v0.0.4 - sifrr project | MIT licensed | https://github.com/sifrr/sifrr-elements */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@sifrr/dom"),require("@sifrr/storage")):"function"==typeof define&&define.amd?define(["exports","@sifrr/dom","@sifrr/storage"],e):e((t=t||self).SifrrElements={},t.Sifrr.Dom,t.Sifrr.Storage)}(this,function(t,e,s){"use strict";function a(t,e){t.dataset[e]&&(t.setAttribute(e,t.dataset[e]),t.removeAttribute("data-".concat(e)))}e=e&&e.hasOwnProperty("default")?e.default:e,s=s&&s.hasOwnProperty("default")?s.default:s;class i extends(Sifrr.Dom.Element.extends(HTMLPictureElement)){static useShadowRoot(){return!0}static get observer(){return this._observer=this._observer||new IntersectionObserver(this.onVisible,{rootMargin:this.rootMargin}),this._observer}static onVisible(t){t.forEach(e=>{console.log(t),e.isIntersecting&&(this.observer.unobserve(e.target),function(t){if(t.sifrrLazyLoaded)return!1;t.sifrrLazyLoaded=!0,t.$$("source",!1).forEach(t=>{a(t,"srcset")});const e=t.$("img",!1);a(e,"src"),a(e,"srcset")}(e.target))})}onConnect(){this.sifrrLazyLoaded=!1,this.constructor.observer.observe(this)}onDisconnect(){this.constructor.observer.unobserve(this)}}function n(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}i.rootMargin="0px 0px 200px 0px",window&&e.register(i,{extends:"picture"});function o(){const t=n(['<style media="screen">\n  ','\n</style>\n<div class="headings">\n  <ul>\n    <slot name="heading">\n    </slot>\n  </ul>\n  <div class="underline"></div>\n</div>\n<div class="content">\n  <div class="arrow l">\n    <span></span>\n  </div>\n  <div class="arrow r">\n    <span></span>\n  </div>\n  <div class="tabs">\n    <slot name="tab">\n    </slot>\n  </div>\n</div>']);return o=function(){return t},t}const r=e.template(o(),":host{\n  /* CSS for tabs container */line-height:24px;overflow:hidden;display:block;border:1px solid rgba(0,0,0,.1);border-radius:5px}.headings,:host{width:100%;position:relative}.headings{\n  /* CSS for heading bar */overflow-y:hidden;overflow-x:auto;background:#714cfe;box-shadow:0 2px 3px rgba(0,0,0,.2)}.headings ul{padding:0 0 3px;margin:0;font-size:0}\n\n/* CSS for heading text li */.headings ::slotted(li){font-size:16px;display:inline-block;text-align:center;padding:8px;text-decoration:none;list-style:none;color:#fff;border-bottom:2px solid transparent;opacity:.9;cursor:pointer;box-sizing:border-box}.headings ::slotted(li.active),.headings ::slotted(li:hover){opacity:1}\n\n/* CSS for line under active tab heading */.headings .underline{position:absolute;bottom:0;left:0;height:3px;background:#fff}\n\n/* Arrows css */.arrow{z-index:5;top:0;bottom:0;width:20px}.arrow,.arrow>*{position:absolute}.arrow>*{width:8px;height:8px;margin:-6px 5px;top:50%;border:solid #fff;border-width:0 3px 3px 0;display:inline-block;padding:3px;filter:drop-shadow(-1px -1px 3px #000)}.arrow.l{left:0}.arrow.l>*{left:0;transform:rotate(135deg)}.arrow.r{right:0}.arrow.r>*{right:0;transform:rotate(-45deg)}\n\n/* Tab container css */.content{width:100%;height:100%;overflow-x:auto;overflow-y:hidden;margin:0;line-height:normal;box-sizing:border-box}.content .tabs{min-height:1px}\n\n/* Tab element css */.content ::slotted([slot=tab]){float:left;max-height:100%;width:100%;height:100%;overflow-x:hidden;overflow-y:auto;vertical-align:top;padding:8px;box-sizing:border-box}");function l(t,e,s){for(let a=0;a<t.length;a++)a!==s&&t[a]!==s?t[a].classList.remove(e):t[a].classList.add(e)}class h extends e.Element{static get template(){return r}onConnect(){this.options={menu:this.$(".headings ul"),content:this.$(".content"),tabcontainer:this.$(".tabs"),menus:this.$("slot[name=heading]").assignedNodes(),tabs:this.$("slot[name=tab]").assignedNodes(),la:this.$(".arrow.l"),ra:this.$(".arrow.r"),line:this.$(".underline"),num:1,showArrows:!1,arrowMargin:0,showMenu:!0,step:1,tabHeight:"auto",showUnderline:!0,loop:!1,animation:"easeOut",animationTime:300,scrollBreakpoint:.2},this.getAttribute("options")&&Object.assign(this.options,JSON.parse(this.getAttribute("options"))),this.animations=this.animations(),this.setWindowResizeEvent(),this.setClickEvents(),this.setSlotChangeEvent(),this.refresh()}refresh(t={}){Object.assign(this.options,t),!this.options.tabs||this.options.tabs.length<1||(this.width=this.clientWidth/this.options.num,this.margin=0,this.options.showArrows&&(this.width-=2*this.options.arrowMargin,this.margin=this.options.arrowMargin),this.setProps(),this.active=t.active||this.active||0)}get active(){return this.state?this.state.active:0}set active(t){this.state={active:t}}onStateChange(){if(!this.options)return;let t=this.state.active;(t=this.getTabNumber(t))+this.options.num-1==this.options.tabs.length&&(t=this.options.loop?0:this.options.tabs.length-this.options.num),isNaN(t)||t===this.state.active?(this.animate(this.options.content,"scrollLeft",t*(this.width+2*this.margin),this.options.animationTime,this.options.animation),l(this.options.tabs,"active",t),l(this.options.tabs,"prev",this.getTabNumber(t-1)),l(this.options.tabs,"next",this.getTabNumber(t+1)),l(this.options.menus,"active",t),l(this.options.menus,"prev",this.getTabNumber(t-1)),l(this.options.menus,"next",this.getTabNumber(t+1)),this.options.showArrows&&(this.options.la.style.display=this.hasPrev()||this.options.loop?"block":"none",this.options.ra.style.display=this.hasNext()||this.options.loop?"block":"none")):this.state={active:t}}next(){this.active=this.state.active+this.options.step}hasNext(){return this.active!==this.options.tabs.length-this.options.num}prev(){this.active=this.state.active-this.options.step}hasPrev(){return 0!==this.active}getTabNumber(t){const e=this.options.tabs.length;return t=t<0?t+e:t%e}setProps(){this.options.showArrows?Array.from(this.options.tabs).forEach(t=>t.style.margin="0 ".concat(this.margin,"px")):(this.options.la&&(this.options.la.style.display="none"),this.options.ra&&(this.options.ra.style.display="none")),this.options.showUnderline||this.options.line&&(this.options.line.style.display="none"),this.options.showMenu?(this.setMenuProps(),this.options.line.style.width=this.options.menus[0].offsetWidth+"px"):this.options.menu&&(this.options.menu.style.display="none"),this.setScrollEvent(),this.options.tabcontainer.style.width=this.options.tabs.length*(this.width+2*this.margin)+"px",this.options.tabcontainer.style.height=this.options.tabHeight,Array.from(this.options.tabs).forEach(t=>t.style.width=this.width+"px")}setMenuProps(){const t=this;let e=0;this.options.menuProps={},Array.from(this.options.menus).forEach((s,a)=>{this.options.menuProps[a]={width:s.offsetWidth,left:e},e+=s.offsetWidth,s._click=(()=>t.active=a)});const s=this.options.menuProps[this.options.menus.length-1];this.options.menu.style.width=s.left+s.width+5+"px";const a=this.options.menuProps[this.active];a&&(t.options.line.style.left=a.left+"px",t.options.line.style.width=a.width+"px")}setClickEvents(){let t=this;this.options.la&&(this.options.la._click=(()=>t.prev())),this.options.ra&&(this.options.ra._click=(()=>t.next()))}setScrollEvent(){let t,e=this,s=-1;function a(){const a=e.options.content.scrollLeft/e.width,i=a%1;s<0&&(s=i);const n=Math.floor(a);try{const t=e.options.menuProps[n].left*(1-i)+(e.options.menuProps[n+1]||{left:0}).left*i,s=e.options.menuProps[n].width*(1-i)+(e.options.menuProps[n+1]||{width:0}).width*i;e.options.line.style.left=t+"px",e.options.line.style.width=s+"px",e.options.menu.parentElement.scrollLeft=t-(e.width-s)/2}catch(t){}clearTimeout(t),t=setTimeout(function(){i-s<-e.options.scrollBreakpoint?e.active=n:i-s>+e.options.scrollBreakpoint?e.active=n+1:e.active=e.active,s=-1},66)}e.options.content.onscroll=(()=>requestAnimationFrame(a))}setWindowResizeEvent(){const t=this;window.addEventListener("resize",function(){t.refresh()})}setSlotChangeEvent(){const t=this,e=()=>{t.options.menus=t.$$("slot")[0].assignedNodes(),t.options.tabs=t.$$("slot")[1].assignedNodes(),t.refresh()};this.$$("slot")[0].addEventListener("slotchange",e),this.$$("slot")[1].addEventListener("slotchange",e)}animate(t,e,s,a,i="easeOut"){const n=t[e],o=s-n,r=this;let l;window.requestAnimationFrame(function h(c){if(c-(l=l||c)>a)return void(t[e]=s);let d=(c-l)/a;t[e]=Math.round(r.animations[i].call(this,d)*o+n),window.requestAnimationFrame(h)})}animations(){return{linear:t=>t,easeOut:t=>--t*t*t+1,easeIn:t=>t*t*t,none:t=>1}}}window&&e.register(h);function c(){const t=n(["<style>\n  ",'\n</style>\n<div id="showHide" _click=${this.showHide}></div>\n<sifrr-tabs options=\'{"tabHeight": "calc(100vh - 132px)"}\' data-sifrr-html="true">\n  ${ this.headingHtml() }\n  ${ this.stateHtml() }\n</sifrr-tabs>\n<footer>\n  <input _keyup=${this.addTargetOnEnter} id="addTargetInput" type="text" name="addTargetInput" value="" placeholder="Enter css selector query of target">\n  <button _click=${this.addTarget} class="btn3" type="button" name="addTargetButton">Add Taget</button>\n  <button _click=${this.commitAll} class="btn3" type="button" name="commitAll">Commit All</button>\n  <button _click=${this.resetAllToFirstState} class="btn3" type="button" name="resetAll">Reset All</button>\n  <button _click=${this.saveData} class="btn3" type="button" name="saveData">Save Data</button>\n  <button _click=${this.loadData} class="btn3" type="button" name="loadData">Load Data</button>\n  <button _click=${this.clearAll} class="btn3" type="button" name="clearAll">Remove All</button>\n</footer>'],["<style>\n  ",'\n</style>\n<div id="showHide" _click=\\${this.showHide}></div>\n<sifrr-tabs options=\'{"tabHeight": "calc(100vh - 132px)"}\' data-sifrr-html="true">\n  \\${ this.headingHtml() }\n  \\${ this.stateHtml() }\n</sifrr-tabs>\n<footer>\n  <input _keyup=\\${this.addTargetOnEnter} id="addTargetInput" type="text" name="addTargetInput" value="" placeholder="Enter css selector query of target">\n  <button _click=\\${this.addTarget} class="btn3" type="button" name="addTargetButton">Add Taget</button>\n  <button _click=\\${this.commitAll} class="btn3" type="button" name="commitAll">Commit All</button>\n  <button _click=\\${this.resetAllToFirstState} class="btn3" type="button" name="resetAll">Reset All</button>\n  <button _click=\\${this.saveData} class="btn3" type="button" name="saveData">Save Data</button>\n  <button _click=\\${this.loadData} class="btn3" type="button" name="loadData">Load Data</button>\n  <button _click=\\${this.clearAll} class="btn3" type="button" name="clearAll">Remove All</button>\n</footer>']);return c=function(){return t},t}const d=e.template(c(),':host{position:fixed;right:0;top:0;bottom:0;height:100%;max-width:100%;width:320px;z-index:1000;background-color:rgba(0,0,0,.8);transform:translate3d(100%,0,0);transition:all .2s ease}:host(.show){transform:translateZ(0)}*{box-sizing:border-box}#showHide{position:fixed;left:-30px;top:0;bottom:0;width:30px;height:30px;margin-top:5px;background-color:#00f;z-index:2}.stateContainer{padding-left:10px;margin-left:10px;border-left:1px solid #fff;position:relative}.stateContainer.off{opacity:.5}.stateContainer .dotC{position:absolute;top:0;left:-10px;width:20px;height:100%;cursor:pointer}.stateContainer .dotC .dot{position:absolute;top:50%;left:10px;width:10px;height:10px;transform:translate3d(-50%,-50%,0);background-color:#fff;border-radius:50%}.stateContainer .delete{position:absolute;top:0;right:0;padding:4px;background-color:rgba(0,0,0,.7);color:#fff;cursor:pointer}.state{white-space:pre-wrap;max-height:90px;overflow:hidden;background-color:hsla(0,0%,100%,.97);padding:5px;margin-bottom:5px;position:relative;cursor:pointer}.state:hover:after{content:"\\\\\\/";position:absolute;bottom:0;left:0;width:100%;background-color:rgba(0,0,0,.7);text-align:center;color:#fff}.state.open{max-height:none}.state.open:hover:after{content:"\\/\\\\"}.key{color:red}.string{color:green}.boolean,.null,.number{color:#00f}footer{position:absolute;bottom:0}input{width:calc(100% - 6px)}.btn3,input{margin:3px;padding:3px}.btn3{width:calc(33% - 8px);background:#fff}');e.Event.add("click"),e.Event.add("keyup");class p extends e.Element{static get template(){return d}onConnect(){let t=this;this.storage=new s({name:window.location.href}),e.Event.addListener("click",".state",function(t,e){e.classList.contains("open")?e.classList.remove("open"):e.classList.add("open")}),e.Event.addListener("click",".dotC",function(e,s,a){t.toState(parseInt(a.dataset.target),parseInt(a.dataset.stateIndex))}),e.Event.addListener("click",".delete",function(e,s){t.deleteState(parseInt(s.dataset.target),parseInt(s.dataset.stateIndex))}),e.Event.addListener("click",".commit",function(e,s){const a=parseInt(s.parentNode.dataset.target);t.commit(a)}),e.Event.addListener("click",".reset",function(e,s){const a=parseInt(s.parentNode.dataset.target);t.resetToFirstState(a)}),e.Event.addListener("click",".remove",function(e,s){const a=parseInt(s.parentNode.dataset.target);t.removeTarget(a)}),e.Element.onStateChange=function(e){t.addState(e,e.state)}}showHide(){this.classList.contains("show")?this.classList.remove("show"):this.classList.add("show")}addTargetOnEnter(t){"Enter"===t.key&&this.addTarget()}headingHtml(){return this.state.queries.map(t=>'<li slot="heading">'.concat(t,"</li>")).join("")}stateHtml(){let t=this;return this.state.states.map((e,s)=>'<div data-target="'.concat(s,'" slot="tab">\n      <button class="btn3 commit" type="button" name="commit">Commit</button>\n      <button class="btn3 reset" type="button" name="reset">Reset</button>\n      <button class="btn3 remove" type="button" name="remove">Remove</button>\n      ').concat(e.map((e,a)=>'<div class="stateContainer '.concat(a<=t.state.activeStates[s]?"on":"off",'">\n                           <div class="dotC" data-target="').concat(s,'" data-state-index="').concat(a,'"><div class="dot"></div></div>\n                           <div class="state">').concat(p.prettyJSON(e),'</div>\n                           <div class="delete" data-target="').concat(s,'" data-state-index="').concat(a,'">X</div>\n                           </div>')).join(""),"</div>")).join("")}addTarget(t){"string"!=typeof t&&(t=this.$("#addTargetInput").value);const e=window.document.querySelector(t);if(!e.isSifrr)return console.log("Invalid Sifrr Element.",e),!1;if(!e.state)return console.log("Sifrr Element has no state.",e),!1;let s=this.state.targets.indexOf(e);s>-1||(this.state.targets.push(e),this.state.queries.push(t),s=this.state.targets.indexOf(e),this.state.states[s]=[JSON.parse(JSON.stringify(e.state))],this.state.activeStates[s]=0,this.update())}removeTarget(t){const{index:e,target:s}=this.getTarget(t);e>-1&&(this.state.targets.splice(e,1),this.state.queries.splice(e,1),this.state.states.splice(e,1),this.state.activeStates.splice(e,1),this.update())}addState(t,e){const{index:s,target:a}=this.getTarget(t);if(s>-1){const t=this.state.activeStates[s],a=JSON.stringify(e);a!==JSON.stringify(this.state.states[s][t])&&(this.state.states[s].splice(t+1,0,JSON.parse(a)),this.state.activeStates[s]=t+1,this.update())}}deleteState(t,e){const{index:s,target:a}=this.getTarget(t);this.state.states[s].splice(e,1),e<this.state.activeStates[s]?this.state.activeStates[s]-=1:e==this.state.activeStates[s]&&(this.state.activeStates[s]-=1,this.toState(s,this.state.activeStates[s])),this.update()}commit(t){const{index:e,target:s}=this.getTarget(t),a=this.state.states[e][this.state.states[e].length-1];this.state.states[e]=[a],this.state.activeStates[e]=0,this.update()}commitAll(){const t=this;this.state.targets.forEach(e=>t.commit(e)),this.update()}toState(t,e){const{index:s,target:a}=this.getTarget(t);this.state.activeStates[s];this.state.activeStates[s]=e,a.state=this.state.states[s][e],this.update()}resetToFirstState(t){const{index:e,target:s}=this.getTarget(t);this.toState(s,0,!1),this.state.states[e]=[this.state.states[e][0]],this.update()}resetAllToFirstState(){const t=this;this.state.targets.forEach(e=>t.resetToFirstState(e)),this.update()}clear(t){const{index:e}=this.getTarget(t);this.state.activeStates[e]=-1,this.state.states[e]=[],this.update()}clearAll(){const t=this;this.state.targets.forEach(e=>t.clear(e)),this.update()}saveData(){const t=this;this.storage.clear().then(()=>{t.state.queries.forEach((e,s)=>{const a={active:t.state.activeStates[s],states:t.state.states[s]};t.storage.insert(e,a)})})}loadData(){const t=this;this.storage.data().then(e=>{let s=0;for(let a in e)t.addTarget(a),t.clear(s),e[a].states.forEach(e=>t.addState(s,e)),t.toState(s,e[a].active),s++})}getTarget(t){let e;return Number.isInteger(t)?(e=t,t=this.state.targets[e]):e=this.state.targets.indexOf(t),{index:e,target:t}}static prettyJSON(t){return(t=(t=JSON.stringify(t,null,4)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(t){var e="number";return/:$/.test(t)?'<span class="'+(e="key")+'">'+t+"</span>":(/^"/.test(t)?e="string":/true|false/.test(t)?e="boolean":/null/.test(t)&&(e="null"),'<span class="'+e+'">'+t+"</span>")})}}p.defaultState={targets:[],states:[],queries:[],activeStates:[]},window&&e.register(p);var u="*{box-sizing:border-box}h1,h3,label,li,p,span{font-family:Roboto,Ariel}.container{width:100%;height:100%;display:flex;flex-wrap:nowrap;background-color:#3a3f5a}#sidemenu{width:15%}#sidemenu,#sidemenu>*{height:100%}sifrr-single-showcase{width:85%;height:100%;display:block}#sidebar{width:30%;height:100%}#sidebar>*{height:33.33%}#main{width:70%;height:100%}.flex-column{height:100%;display:flex;flex-wrap:nowrap;flex-direction:column}.box{width:100%;overflow:scroll;border:1px solid #5f616d}#element{padding:20px;height:70%}\n\n${this.state.style}#code{height:30%}#code sifrr-code-editor{height:calc(100% - 48px)!important}h1,h3{color:#ccc;text-align:center}label,li{color:#8f9cb3;font-size:16px;line-height:24px;padding:4px}#error,#status{color:red}sifrr-code-editor{width:100%;height:calc(100% - 24px);font-size:14px;padding:4px}ul{padding:8px;margin:0}.showcase,.variant{list-style-type:none}.showcase span,.variant span{color:red;float:right}#loader,#saver{color:green;padding:4px;margin:0}.button,button{position:relative;display:inline-block;background:#ccc;border:1px solid grey;color:#3a3f5a;font-size:14px;padding:4px}.button input,button input{position:absolute;width:100%;height:100%;top:0;left:0;opacity:0}";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var m;(function(t,s){t.exports=function(t){function e(){const t=(s=['\n<style media="screen">\n  ','\n</style>\n<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/atom-one-dark.min.css">\n<pre class=\'hljs\'>\n  <code id="highight" data-sifrr-html="true">\n    ${this.htmlValue}\n  </code>\n</pre>\n<textarea class=\'hljs\' _input="${this.input}"></textarea>'],(a=['\n<style media="screen">\n  ','\n</style>\n<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/atom-one-dark.min.css">\n<pre class=\'hljs\'>\n  <code id="highight" data-sifrr-html="true">\n    \\${this.htmlValue}\n  </code>\n</pre>\n<textarea class=\'hljs\' _input="\\${this.input}"></textarea>'])||(a=s.slice(0)),Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(a)}})));var s,a;return e=function(){return t},t}const s=(t=t&&t.hasOwnProperty("default")?t.default:t).template(e(),":host {\n  display: block;\n  position: relative; }\n\n* {\n  box-sizing: border-box; }\n\n.hljs {\n  width: 100%;\n  height: 100%;\n  font-family: Consolas,Liberation Mono,Courier,monospace;\n  font-size: 14px;\n  line-height: 18px;\n  padding: 8px;\n  margin: 0;\n  position: absolute;\n  white-space: pre-wrap;\n  top: 0;\n  left: 0; }\n\ntextarea {\n  z-index: 2;\n  resize: none;\n  border: none; }\n\ntextarea.loaded {\n  background: transparent !important;\n  text-shadow: 0px 0px 0px rgba(0, 0, 0, 0);\n  text-fill-color: transparent;\n  -webkit-text-fill-color: transparent; }\n\npre {\n  z-index: 1; }\n");class a extends t.Element{static get template(){return s}onAttributeChange(){this.update()}onConnect(){fetch("https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js").then(t=>t.text()).then(t=>new Function(t)()).then(()=>this.hljsLoaded());const t=this.$("textarea");this.$("textarea").addEventListener("keydown",e=>{let s=e.keyCode||e.which;if(9==s){e.preventDefault();const s=t.selectionStart,a=t.selectionEnd,i="  ",n=2;t.value=t.value.substring(0,s)+i+t.value.substring(a),t.selectionStart=t.selectionEnd=s+n}})}input(){t.Event.trigger(this,"input"),this.update()}hljsLoaded(){this.$("textarea").classList.add("loaded"),this.update()}get htmlValue(){return window.hljs?hljs.highlight(this.lang,this.value).value:this.value.replace(/</g,"&lt;")}get value(){return this.$("textarea").value}set value(t){this.$("textarea").value=t,this.update()}get lang(){return this.getAttribute("lang")||"html"}}return window&&t.register(a),a}(e)})(m={exports:{}},m.exports);function g(){const t=n(['<style media="screen">\n  ',"\n</style>\n",""]);return g=function(){return t},t}const f=e.template(g(),u,'<div class="container"> <div class="flex-column" id="sidebar"> <div class="box"> <label for="states">Variants</label> <input id="variantName" type="text" name="variantName" value="${this.state.variantName}" data-sifrr-bind="variantName"> <button type="button" name="createVariant" _click="${this.createNewVariant}">Create new variant</button> <p id="saver"></p> <style media="screen"> #variant${this.state.variantId} {\n          background: #5f616d;\n        } </style> <div id="showcases"> <ul data-sifrr-repeat="${this.state.variants}"> <li class="variant" data-variant-id="${this.state.variantId}" id="variant${this.state.variantId}">${this.state.variantName}<span>X</span></li> </ul> </div> </div> <div class="box"> <label for="style">Element CSS Styles</label> <sifrr-code-editor lang="css" data-sifrr-bind="style" value="${this.state.style}"></sifrr-code-editor> </div> <div class="box"> <label for="elState">Element State Function</label> <sifrr-code-editor id="elState" lang="js" data-sifrr-bind="elState" value="${this.state.elState}"></sifrr-code-editor> </div> </div> <div class="flex-column" id="main"> <div class="box" id="element" data-sifrr-html="true"> ${this.state.code} </div> <div class="box" id="code"> <label for="elementName">Element Name</label> <input type="text" name="elementName" placeholder="Enter element name here..." _input="${this.updateHtml}" value="${this.state.element}"> <label for="customUrl">Custom Url</label> <input type="text" name="customUrl" placeholder="Enter element url here..." value="${this.state.elementUrl}" data-sifrr-bind="elementUrl"> <label for="elementName">Is JS File</label> <select id="isjs" name="isjs" value="${this.state.isjs}" data-sifrr-bind="isjs"> <option value="true">true</option> <option value="false">false</option> </select> <span id="error"></span> <br> <label for="htmlcode">HTML Code</label> <sifrr-code-editor lang="html" data-sifrr-bind="code" value="${this.state.code}"></sifrr-code-editor> </div> </div> </div>');e.Event.add("click");class b extends e.Element{static get template(){return f}static observedAttrs(){return["url"]}onConnect(){this.switchVariant(),Sifrr.Dom.Event.addListener("click",".variant",(t,e)=>{e.matches(".variant")&&this.switchVariant(e.dataset.variantId),e.matches(".variant span")&&this.deleteVariant(e.parentNode.dataset.variantId)})}beforeUpdate(){this.saveVariant()}onUpdate(){let t;this._element===this.state.element&&this._js===this.state.isjs&&this._url===this.state.elementUrl||(e.load(this.state.element,{js:"true"==this.state.isjs,url:this.state.elementUrl?this.state.elementUrl:void 0}).then(()=>this.$("#error").innerText="").catch(t=>this.$("#error").innerText=t.message),this._js=this.state.isjs,this._element=this.state.element,this._url=this.state.elementUrl);try{t=new Function(this.$("#elState").value).call(this.element())}catch(t){}t&&this.element()&&this.element().isSifrr&&this.element().state!==t&&(this.element().state=t)}onAttributeChange(t,e,s){"url"===t&&(this.url=s)}createNewVariant(){const t=Math.max(...this.state.variants.map(t=>t.variantId),0)+1;this.state.variants.push(Object.assign({},{variantId:t,variantName:this.state.variantName,style:this.state.style,code:this.state.code,elState:this.state.elState})),this.switchVariant(t)}deleteVariant(t){this.state.variants.forEach((e,s)=>{e.variantId==t&&(this.state.variants.splice(s,1),this.state.variantId==t?this.switchVariant((this.state.variants[s]||{}).variantId):this.update())})}saveVariant(){const t=this.state.variantId;this.state.variants.forEach(e=>{e.variantId==t&&Object.assign(e,{variantName:this.state.variantName,style:this.state.style,code:this.state.code,elState:this.state.elState})})}switchVariant(t){Object.assign(this.state,this.variant(t)),this.update()}updateHtml(t,e){const s="<".concat(e.value,"></").concat(e.value,">");this.state={code:s,element:e.value}}element(){return this.$("#element").firstElementChild}variant(t){return this.state.variants.filter(e=>e.variantId==t)[0]||this.state.variants[this.state.variants.length-1]}}function v(){const t=n(['<style media="screen">\n  ','\n</style>\n<div class="container">\n  <div class="flex-column" id="sidemenu">\n    <div class="box">\n      <h1>Sifrr Showcase</h1>\n      <p id="loader"></p>\n      <input id="url" type="text" placeholder="Enter url here..." name="url" />\n      <button type="button" name="loadUrl" _click=${this.loadUrl}>Load from url</button>\n      <p id="status"></p>\n      <span class="button">\n        Upload File\n        <input type="file" name="file" accept="application/json" _input="${this.loadFile}" />\n      </span>\n      <button type="button" name="saveFile" _click="${this.saveFile}">Save to File</button>\n      <h3>Showcases</h3>\n      <input id="showcaseName" type="text" name="showcase" _input=${this.changeName}>\n      <button type="button" name="createVariant" _click="${this.createShowcase}">Create new showcase</button>\n      <style>\n        #showcase${this.state.current} {\n          background: #5f616d;\n        }\n      </style>\n      <div id="showcases" data-sifrr-repeat="${this.state.showcases}">\n        <li class="showcase" data-showcase-id="${this.state.key}">${this.state.name}<span>X</span></li>\n      </div>\n    </div>\n  </div>\n  <sifrr-single-showcase _update=${this.saveShowcase}></sifrr-single-showcase>\n</div>'],['<style media="screen">\n  ','\n</style>\n<div class="container">\n  <div class="flex-column" id="sidemenu">\n    <div class="box">\n      <h1>Sifrr Showcase</h1>\n      <p id="loader"></p>\n      <input id="url" type="text" placeholder="Enter url here..." name="url" />\n      <button type="button" name="loadUrl" _click=\\${this.loadUrl}>Load from url</button>\n      <p id="status"></p>\n      <span class="button">\n        Upload File\n        <input type="file" name="file" accept="application/json" _input="\\${this.loadFile}" />\n      </span>\n      <button type="button" name="saveFile" _click="\\${this.saveFile}">Save to File</button>\n      <h3>Showcases</h3>\n      <input id="showcaseName" type="text" name="showcase" _input=\\${this.changeName}>\n      <button type="button" name="createVariant" _click="\\${this.createShowcase}">Create new showcase</button>\n      <style>\n        #showcase\\${this.state.current} {\n          background: #5f616d;\n        }\n      </style>\n      <div id="showcases" data-sifrr-repeat="\\${this.state.showcases}">\n        <li class="showcase" data-showcase-id="\\${this.state.key}">\\${this.state.name}<span>X</span></li>\n      </div>\n    </div>\n  </div>\n  <sifrr-single-showcase _update=\\${this.saveShowcase}></sifrr-single-showcase>\n</div>']);return v=function(){return t},t}b.defaultState={id:1,name:"Placeholder Element",element:"sifrr-placeholder",elementUrl:"",isjs:!0,variantName:"",variants:[{variantId:1,variantName:"variant",style:"#element > * {\n  display: block;\n  background-color: white;\n  margin: auto;\n}",code:"<sifrr-placeholder>\n</sifrr-placeholder>",elState:"return {\n\n}"}]},window&&e.register(b);const w=e.template(v(),u),x=new s({name:"showcases",version:"1.0"});class y extends e.Element{static get template(){return w}static observedAttrs(){return["url"]}onAttributeChange(t,e,s){"url"===t&&(this.url=s)}onConnect(){Sifrr.Dom.Event.addListener("click",".showcase",(t,e)=>{e.matches(".showcase")&&this.switchShowcase(this.getChildIndex(e)),e.matches(".showcase span")&&this.deleteShowcase(this.getChildIndex(e))}),this.switchShowcase(0),x.get(["showcases","current"]).then(t=>{Array.isArray(t.showcases)&&(this.state=t),this.switchShowcase(t.current),this._loaded=!0})}getChildIndex(t){let e=0;for(;null!=(t=t.previousSibling);)e++;return e}deleteShowcase(t){this.state.showcases.splice(t,1),t==this.state.current?this.switchShowcase(this.state.current):this.switchShowcase(this.state.current-1)}createShowcase(){const t=this.state.showcases.push({name:this.$("#showcaseName").value,variants:[]});this.switchShowcase(t-1)}switchShowcase(t){this.state.showcases[t]||(t=this.state.showcases.length-1),this.state={current:t},this.el.state=this.state.showcases[t],this.$("#showcases").children[t].id="showcase"+t}saveShowcase(){delete this.el.state.name,this.state.showcases[this.state.current]=Object.assign(this.state.showcases[this.state.current],this.el.state),this._loaded&&(this.$("#status").textContent="saving locally!",this._timeout&&clearTimeout(this._timeout),setTimeout(()=>{x.set({showcases:this.state.showcases,current:this.state.current}).then(()=>{this.$("#status").textContent="saved locally!"})},500))}changeName(){this.state.showcases[this.state.current].name=this.$("#showcaseName").value,this.update()}get el(){return this.$("sifrr-single-showcase")}set url(t){this._url=t,this.getAttribute("url")!==t&&this.setAttribute("url",t),this.$("#url").value!==t&&(this.$("#url").value=t),this.loadUrl()}get url(){return this._url}loadUrl(){this._url=this.$("#url").value,window.fetch(this._url).then(t=>t.json()).then(t=>{this.state=t,this.$("#status").textContent="loaded from url!"}).catch(t=>{this.$("#status").textContent=t.message})}saveFile(){const t=new Blob([JSON.stringify(this.state,null,2)],{type:"application/json"}),e=document.createElement("a");e.href=URL.createObjectURL(t),e.download="showcases",e.click()}loadFile(t,e){const s=e.files[0],a=new FileReader;a.onload=(()=>{const t=JSON.parse(a.result);this.state=t,this.$("#status").textContent="loaded from file!"}),a.readAsText(s)}}y.defaultState={current:0,showcases:[{name:"new"}]},window&&e.register(y);function S(){const t=n(['\n<style media="screen">\n  ','\n</style>\n<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/atom-one-dark.min.css">\n<pre class=\'hljs\'>\n  <code id="highight" data-sifrr-html="true">\n    ${this.htmlValue}\n  </code>\n</pre>\n<textarea class=\'hljs\' _input="${this.input}"></textarea>'],['\n<style media="screen">\n  ','\n</style>\n<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/atom-one-dark.min.css">\n<pre class=\'hljs\'>\n  <code id="highight" data-sifrr-html="true">\n    \\${this.htmlValue}\n  </code>\n</pre>\n<textarea class=\'hljs\' _input="\\${this.input}"></textarea>']);return S=function(){return t},t}const $=e.template(S(),":host{display:block;position:relative}*{box-sizing:border-box}.hljs{width:100%;height:100%;font-family:Consolas,Liberation Mono,Courier,monospace;font-size:14px;line-height:18px;padding:8px;margin:0;position:absolute;white-space:pre-wrap;top:0;left:0}textarea{z-index:2;resize:none;border:none}textarea.loaded{background:transparent!important;text-shadow:0 0 0 transparent;text-fill-color:transparent;-webkit-text-fill-color:transparent}pre{z-index:1}");class k extends e.Element{static get template(){return $}onAttributeChange(){this.update()}onConnect(){fetch("https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js").then(t=>t.text()).then(t=>new Function(t)()).then(()=>this.hljsLoaded());const t=this.$("textarea");this.$("textarea").addEventListener("keydown",e=>{if(9==(e.keyCode||e.which)){e.preventDefault();const s=t.selectionStart,a=t.selectionEnd,i="  ",n=2;t.value=t.value.substring(0,s)+i+t.value.substring(a),t.selectionStart=t.selectionEnd=s+n}})}input(){e.Event.trigger(this,"input"),this.update()}hljsLoaded(){this.$("textarea").classList.add("loaded"),this.update()}get htmlValue(){return window.hljs?hljs.highlight(this.lang,this.value).value:this.value.replace(/</g,"&lt;")}get value(){return this.$("textarea").value}set value(t){this.$("textarea").value=t,this.update()}get lang(){return this.getAttribute("lang")||"html"}}window&&e.register(k),t.SifrrCodeEditor=k,t.SifrrLazyPicture=i,t.SifrrShowcase=y,t.SifrrStater=p,t.SifrrTabs=h,Object.defineProperty(t,"__esModule",{value:!0})});
/*! (c) @aadityataparia */
